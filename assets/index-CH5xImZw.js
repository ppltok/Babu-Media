function xg(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function vg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Lh={exports:{}},Ba={},Oh={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ti=Symbol.for("react.element"),wg=Symbol.for("react.portal"),bg=Symbol.for("react.fragment"),jg=Symbol.for("react.strict_mode"),kg=Symbol.for("react.profiler"),_g=Symbol.for("react.provider"),Ng=Symbol.for("react.context"),Sg=Symbol.for("react.forward_ref"),Cg=Symbol.for("react.suspense"),Eg=Symbol.for("react.memo"),Pg=Symbol.for("react.lazy"),wu=Symbol.iterator;function Tg(e){return e===null||typeof e!="object"?null:(e=wu&&e[wu]||e["@@iterator"],typeof e=="function"?e:null)}var Rh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$h=Object.assign,Ah={};function Kn(e,t,r){this.props=e,this.context=t,this.refs=Ah,this.updater=r||Rh}Kn.prototype.isReactComponent={};Kn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ih(){}Ih.prototype=Kn.prototype;function ac(e,t,r){this.props=e,this.context=t,this.refs=Ah,this.updater=r||Rh}var oc=ac.prototype=new Ih;oc.constructor=ac;$h(oc,Kn.prototype);oc.isPureReactComponent=!0;var bu=Array.isArray,Dh=Object.prototype.hasOwnProperty,lc={current:null},Bh={key:!0,ref:!0,__self:!0,__source:!0};function Mh(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Dh.call(t,n)&&!Bh.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ti,type:e,key:i,ref:o,props:s,_owner:lc.current}}function Lg(e,t){return{$$typeof:ti,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ti}function Og(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ju=/\/+/g;function oo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Og(""+e.key):t.toString(36)}function qi(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ti:case wg:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+oo(o,0):n,bu(s)?(r="",e!=null&&(r=e.replace(ju,"$&/")+"/"),qi(s,t,r,"",function(u){return u})):s!=null&&(cc(s)&&(s=Lg(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ju,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",bu(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+oo(i,l);o+=qi(i,t,r,c,s)}else if(c=Tg(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+oo(i,l++),o+=qi(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fi(e,t,r){if(e==null)return e;var n=[],s=0;return qi(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Rg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Je={current:null},Ki={transition:null},$g={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:Ki,ReactCurrentOwner:lc};function Uh(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:fi,forEach:function(e,t,r){fi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fi(e,function(){t++}),t},toArray:function(e){return fi(e,function(t){return t})||[]},only:function(e){if(!cc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Q.Component=Kn;Q.Fragment=bg;Q.Profiler=kg;Q.PureComponent=ac;Q.StrictMode=jg;Q.Suspense=Cg;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$g;Q.act=Uh;Q.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=$h({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=lc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Dh.call(t,c)&&!Bh.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ti,type:e.type,key:s,ref:i,props:n,_owner:o}};Q.createContext=function(e){return e={$$typeof:Ng,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_g,_context:e},e.Consumer=e};Q.createElement=Mh;Q.createFactory=function(e){var t=Mh.bind(null,e);return t.type=e,t};Q.createRef=function(){return{current:null}};Q.forwardRef=function(e){return{$$typeof:Sg,render:e}};Q.isValidElement=cc;Q.lazy=function(e){return{$$typeof:Pg,_payload:{_status:-1,_result:e},_init:Rg}};Q.memo=function(e,t){return{$$typeof:Eg,type:e,compare:t===void 0?null:t}};Q.startTransition=function(e){var t=Ki.transition;Ki.transition={};try{e()}finally{Ki.transition=t}};Q.unstable_act=Uh;Q.useCallback=function(e,t){return Je.current.useCallback(e,t)};Q.useContext=function(e){return Je.current.useContext(e)};Q.useDebugValue=function(){};Q.useDeferredValue=function(e){return Je.current.useDeferredValue(e)};Q.useEffect=function(e,t){return Je.current.useEffect(e,t)};Q.useId=function(){return Je.current.useId()};Q.useImperativeHandle=function(e,t,r){return Je.current.useImperativeHandle(e,t,r)};Q.useInsertionEffect=function(e,t){return Je.current.useInsertionEffect(e,t)};Q.useLayoutEffect=function(e,t){return Je.current.useLayoutEffect(e,t)};Q.useMemo=function(e,t){return Je.current.useMemo(e,t)};Q.useReducer=function(e,t,r){return Je.current.useReducer(e,t,r)};Q.useRef=function(e){return Je.current.useRef(e)};Q.useState=function(e){return Je.current.useState(e)};Q.useSyncExternalStore=function(e,t,r){return Je.current.useSyncExternalStore(e,t,r)};Q.useTransition=function(){return Je.current.useTransition()};Q.version="18.3.1";Oh.exports=Q;var w=Oh.exports;const Ag=vg(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig=w,Dg=Symbol.for("react.element"),Bg=Symbol.for("react.fragment"),Mg=Object.prototype.hasOwnProperty,Ug=Ig.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wg={key:!0,ref:!0,__self:!0,__source:!0};function Wh(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Mg.call(t,n)&&!Wg.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Dg,type:e,key:i,ref:o,props:s,_owner:Ug.current}}Ba.Fragment=Bg;Ba.jsx=Wh;Ba.jsxs=Wh;Lh.exports=Ba;var a=Lh.exports,Qo={},Fh={exports:{}},ht={},zh={exports:{}},Hh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,I){var M=E.length;E.push(I);e:for(;0<M;){var J=M-1>>>1,W=E[J];if(0<s(W,I))E[J]=I,E[M]=W,M=J;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var I=E[0],M=E.pop();if(M!==I){E[0]=M;e:for(var J=0,W=E.length,V=W>>>1;J<V;){var ee=2*(J+1)-1,fe=E[ee],T=ee+1,O=E[T];if(0>s(fe,M))T<W&&0>s(O,fe)?(E[J]=O,E[T]=M,J=T):(E[J]=fe,E[ee]=M,J=ee);else if(T<W&&0>s(O,M))E[J]=O,E[T]=M,J=T;else break e}}return I}function s(E,I){var M=E.sortIndex-I.sortIndex;return M!==0?M:E.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(E){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=E)n(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=r(u)}}function j(E){if(y=!1,p(E),!v)if(r(c)!==null)v=!0,K(_);else{var I=r(u);I!==null&&F(j,I.startTime-E)}}function _(E,I){v=!1,y&&(y=!1,g(C),C=-1),m=!0;var M=f;try{for(p(I),h=r(c);h!==null&&(!(h.expirationTime>I)||E&&!B());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var W=J(h.expirationTime<=I);I=e.unstable_now(),typeof W=="function"?h.callback=W:h===r(c)&&n(c),p(I)}else n(c);h=r(c)}if(h!==null)var V=!0;else{var ee=r(u);ee!==null&&F(j,ee.startTime-I),V=!1}return V}finally{h=null,f=M,m=!1}}var N=!1,S=null,C=-1,A=5,L=-1;function B(){return!(e.unstable_now()-L<A)}function z(){if(S!==null){var E=e.unstable_now();L=E;var I=!0;try{I=S(!0,E)}finally{I?Y():(N=!1,S=null)}}else N=!1}var Y;if(typeof x=="function")Y=function(){x(z)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ce=ae.port2;ae.port1.onmessage=z,Y=function(){ce.postMessage(null)}}else Y=function(){b(z,0)};function K(E){S=E,N||(N=!0,Y())}function F(E,I){C=b(function(){E(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,K(_))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(E){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var M=f;f=I;try{return E()}finally{f=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,I){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var M=f;f=E;try{return I()}finally{f=M}},e.unstable_scheduleCallback=function(E,I,M){var J=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?J+M:J):M=J,E){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=M+W,E={id:d++,callback:I,priorityLevel:E,startTime:M,expirationTime:W,sortIndex:-1},M>J?(E.sortIndex=M,t(u,E),r(c)===null&&E===r(u)&&(y?(g(C),C=-1):y=!0,F(j,M-J))):(E.sortIndex=W,t(c,E),v||m||(v=!0,K(_))),E},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(E){var I=f;return function(){var M=f;f=I;try{return E.apply(this,arguments)}finally{f=M}}}})(Hh);zh.exports=Hh;var Fg=zh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=w,dt=Fg;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vh=new Set,Ls={};function sn(e,t){Mn(e,t),Mn(e+"Capture",t)}function Mn(e,t){for(Ls[e]=t,e=0;e<t.length;e++)Vh.add(t[e])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xo=Object.prototype.hasOwnProperty,Hg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ku={},_u={};function Vg(e){return Xo.call(_u,e)?!0:Xo.call(ku,e)?!1:Hg.test(e)?_u[e]=!0:(ku[e]=!0,!1)}function qg(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kg(e,t,r,n){if(t===null||typeof t>"u"||qg(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ye(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Me[e]=new Ye(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Me[t]=new Ye(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Me[e]=new Ye(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Me[e]=new Ye(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Me[e]=new Ye(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Me[e]=new Ye(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Me[e]=new Ye(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Me[e]=new Ye(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Me[e]=new Ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var uc=/[\-:]([a-z])/g;function dc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(uc,dc);Me[t]=new Ye(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(uc,dc);Me[t]=new Ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(uc,dc);Me[t]=new Ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Me[e]=new Ye(e,1,!1,e.toLowerCase(),null,!1,!1)});Me.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Me[e]=new Ye(e,1,!1,e.toLowerCase(),null,!0,!0)});function hc(e,t,r,n){var s=Me.hasOwnProperty(t)?Me[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kg(t,r,s,n)&&(r=null),n||s===null?Vg(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ur=zg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mi=Symbol.for("react.element"),yn=Symbol.for("react.portal"),wn=Symbol.for("react.fragment"),fc=Symbol.for("react.strict_mode"),Zo=Symbol.for("react.profiler"),qh=Symbol.for("react.provider"),Kh=Symbol.for("react.context"),mc=Symbol.for("react.forward_ref"),el=Symbol.for("react.suspense"),tl=Symbol.for("react.suspense_list"),pc=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),Gh=Symbol.for("react.offscreen"),Nu=Symbol.iterator;function as(e){return e===null||typeof e!="object"?null:(e=Nu&&e[Nu]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Object.assign,lo;function ps(e){if(lo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);lo=t&&t[1]||""}return`
`+lo+e}var co=!1;function uo(e,t){if(!e||co)return"";co=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{co=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ps(e):""}function Gg(e){switch(e.tag){case 5:return ps(e.type);case 16:return ps("Lazy");case 13:return ps("Suspense");case 19:return ps("SuspenseList");case 0:case 2:case 15:return e=uo(e.type,!1),e;case 11:return e=uo(e.type.render,!1),e;case 1:return e=uo(e.type,!0),e;default:return""}}function rl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wn:return"Fragment";case yn:return"Portal";case Zo:return"Profiler";case fc:return"StrictMode";case el:return"Suspense";case tl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kh:return(e.displayName||"Context")+".Consumer";case qh:return(e._context.displayName||"Context")+".Provider";case mc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pc:return t=e.displayName||null,t!==null?t:rl(e.type)||"Memo";case pr:t=e._payload,e=e._init;try{return rl(e(t))}catch{}}return null}function Jg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rl(t);case 8:return t===fc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yg(e){var t=Jh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pi(e){e._valueTracker||(e._valueTracker=Yg(e))}function Yh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Jh(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function aa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nl(e,t){var r=t.checked;return ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Su(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Tr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qh(e,t){t=t.checked,t!=null&&hc(e,"checked",t,!1)}function sl(e,t){Qh(e,t);var r=Tr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?il(e,t.type,r):t.hasOwnProperty("defaultValue")&&il(e,t.type,Tr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function il(e,t,r){(t!=="number"||aa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var gs=Array.isArray;function On(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Tr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function al(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(gs(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Tr(r)}}function Xh(e,t){var r=Tr(t.value),n=Tr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Pu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ol(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gi,ef=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gi=gi||document.createElement("div"),gi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Os(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ws={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qg=["Webkit","ms","Moz","O"];Object.keys(ws).forEach(function(e){Qg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ws[t]=ws[e]})});function tf(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ws.hasOwnProperty(e)&&ws[e]?(""+t).trim():t+"px"}function rf(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=tf(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Xg=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ll(e,t){if(t){if(Xg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function cl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ul=null;function gc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dl=null,Rn=null,$n=null;function Tu(e){if(e=si(e)){if(typeof dl!="function")throw Error(P(280));var t=e.stateNode;t&&(t=za(t),dl(e.stateNode,e.type,t))}}function nf(e){Rn?$n?$n.push(e):$n=[e]:Rn=e}function sf(){if(Rn){var e=Rn,t=$n;if($n=Rn=null,Tu(e),t)for(e=0;e<t.length;e++)Tu(t[e])}}function af(e,t){return e(t)}function of(){}var ho=!1;function lf(e,t,r){if(ho)return e(t,r);ho=!0;try{return af(e,t,r)}finally{ho=!1,(Rn!==null||$n!==null)&&(of(),sf())}}function Rs(e,t){var r=e.stateNode;if(r===null)return null;var n=za(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var hl=!1;if(ir)try{var os={};Object.defineProperty(os,"passive",{get:function(){hl=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{hl=!1}function Zg(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var bs=!1,oa=null,la=!1,fl=null,e0={onError:function(e){bs=!0,oa=e}};function t0(e,t,r,n,s,i,o,l,c){bs=!1,oa=null,Zg.apply(e0,arguments)}function r0(e,t,r,n,s,i,o,l,c){if(t0.apply(this,arguments),bs){if(bs){var u=oa;bs=!1,oa=null}else throw Error(P(198));la||(la=!0,fl=u)}}function an(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function cf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lu(e){if(an(e)!==e)throw Error(P(188))}function n0(e){var t=e.alternate;if(!t){if(t=an(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Lu(s),e;if(i===n)return Lu(s),t;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function uf(e){return e=n0(e),e!==null?df(e):null}function df(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=df(e);if(t!==null)return t;e=e.sibling}return null}var hf=dt.unstable_scheduleCallback,Ou=dt.unstable_cancelCallback,s0=dt.unstable_shouldYield,i0=dt.unstable_requestPaint,ke=dt.unstable_now,a0=dt.unstable_getCurrentPriorityLevel,xc=dt.unstable_ImmediatePriority,ff=dt.unstable_UserBlockingPriority,ca=dt.unstable_NormalPriority,o0=dt.unstable_LowPriority,mf=dt.unstable_IdlePriority,Ma=null,Gt=null;function l0(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Ma,e,void 0,(e.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:d0,c0=Math.log,u0=Math.LN2;function d0(e){return e>>>=0,e===0?32:31-(c0(e)/u0|0)|0}var xi=64,vi=4194304;function xs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ua(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=xs(l):(i&=o,i!==0&&(n=xs(i)))}else o=r&~s,o!==0?n=xs(o):i!==0&&(n=xs(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Lt(t),s=1<<r,n|=e[r],t&=~s;return n}function h0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f0(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Lt(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=h0(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ml(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pf(){var e=xi;return xi<<=1,!(xi&4194240)&&(xi=64),e}function fo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ri(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lt(t),e[t]=r}function m0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Lt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function vc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Lt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var re=0;function gf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xf,yc,vf,yf,wf,pl=!1,yi=[],jr=null,kr=null,_r=null,$s=new Map,As=new Map,xr=[],p0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ru(e,t){switch(e){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":$s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(t.pointerId)}}function ls(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=si(t),t!==null&&yc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function g0(e,t,r,n,s){switch(t){case"focusin":return jr=ls(jr,e,t,r,n,s),!0;case"dragenter":return kr=ls(kr,e,t,r,n,s),!0;case"mouseover":return _r=ls(_r,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return $s.set(i,ls($s.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,As.set(i,ls(As.get(i)||null,e,t,r,n,s)),!0}return!1}function bf(e){var t=qr(e.target);if(t!==null){var r=an(t);if(r!==null){if(t=r.tag,t===13){if(t=cf(r),t!==null){e.blockedOn=t,wf(e.priority,function(){vf(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=gl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ul=n,r.target.dispatchEvent(n),ul=null}else return t=si(r),t!==null&&yc(t),e.blockedOn=r,!1;t.shift()}return!0}function $u(e,t,r){Gi(e)&&r.delete(t)}function x0(){pl=!1,jr!==null&&Gi(jr)&&(jr=null),kr!==null&&Gi(kr)&&(kr=null),_r!==null&&Gi(_r)&&(_r=null),$s.forEach($u),As.forEach($u)}function cs(e,t){e.blockedOn===t&&(e.blockedOn=null,pl||(pl=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,x0)))}function Is(e){function t(s){return cs(s,e)}if(0<yi.length){cs(yi[0],e);for(var r=1;r<yi.length;r++){var n=yi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(jr!==null&&cs(jr,e),kr!==null&&cs(kr,e),_r!==null&&cs(_r,e),$s.forEach(t),As.forEach(t),r=0;r<xr.length;r++)n=xr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<xr.length&&(r=xr[0],r.blockedOn===null);)bf(r),r.blockedOn===null&&xr.shift()}var An=ur.ReactCurrentBatchConfig,da=!0;function v0(e,t,r,n){var s=re,i=An.transition;An.transition=null;try{re=1,wc(e,t,r,n)}finally{re=s,An.transition=i}}function y0(e,t,r,n){var s=re,i=An.transition;An.transition=null;try{re=4,wc(e,t,r,n)}finally{re=s,An.transition=i}}function wc(e,t,r,n){if(da){var s=gl(e,t,r,n);if(s===null)ko(e,t,n,ha,r),Ru(e,n);else if(g0(s,e,t,r,n))n.stopPropagation();else if(Ru(e,n),t&4&&-1<p0.indexOf(e)){for(;s!==null;){var i=si(s);if(i!==null&&xf(i),i=gl(e,t,r,n),i===null&&ko(e,t,n,ha,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ko(e,t,n,null,r)}}var ha=null;function gl(e,t,r,n){if(ha=null,e=gc(n),e=qr(e),e!==null)if(t=an(e),t===null)e=null;else if(r=t.tag,r===13){if(e=cf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ha=e,null}function jf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0()){case xc:return 1;case ff:return 4;case ca:case o0:return 16;case mf:return 536870912;default:return 16}default:return 16}}var wr=null,bc=null,Ji=null;function kf(){if(Ji)return Ji;var e,t=bc,r=t.length,n,s="value"in wr?wr.value:wr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Ji=s.slice(e,1<n?1-n:void 0)}function Yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wi(){return!0}function Au(){return!1}function ft(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wi:Au,this.isPropagationStopped=Au,this}return ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),t}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jc=ft(Gn),ni=ve({},Gn,{view:0,detail:0}),w0=ft(ni),mo,po,us,Ua=ve({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(mo=e.screenX-us.screenX,po=e.screenY-us.screenY):po=mo=0,us=e),mo)},movementY:function(e){return"movementY"in e?e.movementY:po}}),Iu=ft(Ua),b0=ve({},Ua,{dataTransfer:0}),j0=ft(b0),k0=ve({},ni,{relatedTarget:0}),go=ft(k0),_0=ve({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),N0=ft(_0),S0=ve({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),C0=ft(S0),E0=ve({},Gn,{data:0}),Du=ft(E0),P0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=L0[e])?!!t[e]:!1}function kc(){return O0}var R0=ve({},ni,{key:function(e){if(e.key){var t=P0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(e){return e.type==="keypress"?Yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$0=ft(R0),A0=ve({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bu=ft(A0),I0=ve({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),D0=ft(I0),B0=ve({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),M0=ft(B0),U0=ve({},Ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),W0=ft(U0),F0=[9,13,27,32],_c=ir&&"CompositionEvent"in window,js=null;ir&&"documentMode"in document&&(js=document.documentMode);var z0=ir&&"TextEvent"in window&&!js,_f=ir&&(!_c||js&&8<js&&11>=js),Mu=" ",Uu=!1;function Nf(e,t){switch(e){case"keyup":return F0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bn=!1;function H0(e,t){switch(e){case"compositionend":return Sf(t);case"keypress":return t.which!==32?null:(Uu=!0,Mu);case"textInput":return e=t.data,e===Mu&&Uu?null:e;default:return null}}function V0(e,t){if(bn)return e==="compositionend"||!_c&&Nf(e,t)?(e=kf(),Ji=bc=wr=null,bn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _f&&t.locale!=="ko"?null:t.data;default:return null}}var q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!q0[e.type]:t==="textarea"}function Cf(e,t,r,n){nf(n),t=fa(t,"onChange"),0<t.length&&(r=new jc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ks=null,Ds=null;function K0(e){Bf(e,0)}function Wa(e){var t=_n(e);if(Yh(t))return e}function G0(e,t){if(e==="change")return t}var Ef=!1;if(ir){var xo;if(ir){var vo="oninput"in document;if(!vo){var Fu=document.createElement("div");Fu.setAttribute("oninput","return;"),vo=typeof Fu.oninput=="function"}xo=vo}else xo=!1;Ef=xo&&(!document.documentMode||9<document.documentMode)}function zu(){ks&&(ks.detachEvent("onpropertychange",Pf),Ds=ks=null)}function Pf(e){if(e.propertyName==="value"&&Wa(Ds)){var t=[];Cf(t,Ds,e,gc(e)),lf(K0,t)}}function J0(e,t,r){e==="focusin"?(zu(),ks=t,Ds=r,ks.attachEvent("onpropertychange",Pf)):e==="focusout"&&zu()}function Y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wa(Ds)}function Q0(e,t){if(e==="click")return Wa(t)}function X0(e,t){if(e==="input"||e==="change")return Wa(t)}function Z0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:Z0;function Bs(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Xo.call(t,s)||!Rt(e[s],t[s]))return!1}return!0}function Hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vu(e,t){var r=Hu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hu(r)}}function Tf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lf(){for(var e=window,t=aa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=aa(e.document)}return t}function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ex(e){var t=Lf(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Tf(r.ownerDocument.documentElement,r)){if(n!==null&&Nc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Vu(r,i);var o=Vu(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tx=ir&&"documentMode"in document&&11>=document.documentMode,jn=null,xl=null,_s=null,vl=!1;function qu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vl||jn==null||jn!==aa(n)||(n=jn,"selectionStart"in n&&Nc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_s&&Bs(_s,n)||(_s=n,n=fa(xl,"onSelect"),0<n.length&&(t=new jc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=jn)))}function bi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var kn={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},yo={},Of={};ir&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete kn.animationend.animation,delete kn.animationiteration.animation,delete kn.animationstart.animation),"TransitionEvent"in window||delete kn.transitionend.transition);function Fa(e){if(yo[e])return yo[e];if(!kn[e])return e;var t=kn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Of)return yo[e]=t[r];return e}var Rf=Fa("animationend"),$f=Fa("animationiteration"),Af=Fa("animationstart"),If=Fa("transitionend"),Df=new Map,Ku="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Df.set(e,t),sn(t,[e])}for(var wo=0;wo<Ku.length;wo++){var bo=Ku[wo],rx=bo.toLowerCase(),nx=bo[0].toUpperCase()+bo.slice(1);Or(rx,"on"+nx)}Or(Rf,"onAnimationEnd");Or($f,"onAnimationIteration");Or(Af,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(If,"onTransitionEnd");Mn("onMouseEnter",["mouseout","mouseover"]);Mn("onMouseLeave",["mouseout","mouseover"]);Mn("onPointerEnter",["pointerout","pointerover"]);Mn("onPointerLeave",["pointerout","pointerover"]);sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function Gu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,r0(n,t,void 0,e),e.currentTarget=null}function Bf(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Gu(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Gu(s,l,u),i=c}}}if(la)throw e=fl,la=!1,fl=null,e}function oe(e,t){var r=t[kl];r===void 0&&(r=t[kl]=new Set);var n=e+"__bubble";r.has(n)||(Mf(t,e,2,!1),r.add(n))}function jo(e,t,r){var n=0;t&&(n|=4),Mf(r,e,n,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Ms(e){if(!e[ji]){e[ji]=!0,Vh.forEach(function(r){r!=="selectionchange"&&(sx.has(r)||jo(r,!1,e),jo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ji]||(t[ji]=!0,jo("selectionchange",!1,t))}}function Mf(e,t,r,n){switch(jf(t)){case 1:var s=v0;break;case 4:s=y0;break;default:s=wc}r=s.bind(null,t,r,e),s=void 0,!hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ko(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=qr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}lf(function(){var u=i,d=gc(r),h=[];e:{var f=Df.get(e);if(f!==void 0){var m=jc,v=e;switch(e){case"keypress":if(Yi(r)===0)break e;case"keydown":case"keyup":m=$0;break;case"focusin":v="focus",m=go;break;case"focusout":v="blur",m=go;break;case"beforeblur":case"afterblur":m=go;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=j0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=D0;break;case Rf:case $f:case Af:m=N0;break;case If:m=M0;break;case"scroll":m=w0;break;case"wheel":m=W0;break;case"copy":case"cut":case"paste":m=C0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Bu}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var x=u,p;x!==null;){p=x;var j=p.stateNode;if(p.tag===5&&j!==null&&(p=j,g!==null&&(j=Rs(x,g),j!=null&&y.push(Us(x,j,p)))),b)break;x=x.return}0<y.length&&(f=new m(f,v,null,r,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==ul&&(v=r.relatedTarget||r.fromElement)&&(qr(v)||v[ar]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=u,v=v?qr(v):null,v!==null&&(b=an(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(y=Iu,j="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Bu,j="onPointerLeave",g="onPointerEnter",x="pointer"),b=m==null?f:_n(m),p=v==null?f:_n(v),f=new y(j,x+"leave",m,r,d),f.target=b,f.relatedTarget=p,j=null,qr(d)===u&&(y=new y(g,x+"enter",v,r,d),y.target=p,y.relatedTarget=b,j=y),b=j,m&&v)t:{for(y=m,g=v,x=0,p=y;p;p=un(p))x++;for(p=0,j=g;j;j=un(j))p++;for(;0<x-p;)y=un(y),x--;for(;0<p-x;)g=un(g),p--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=un(y),g=un(g)}y=null}else y=null;m!==null&&Ju(h,f,m,y,!1),v!==null&&b!==null&&Ju(h,b,v,y,!0)}}e:{if(f=u?_n(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=G0;else if(Wu(f))if(Ef)_=X0;else{_=Y0;var N=J0}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Q0);if(_&&(_=_(e,u))){Cf(h,_,r,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&il(f,"number",f.value)}switch(N=u?_n(u):window,e){case"focusin":(Wu(N)||N.contentEditable==="true")&&(jn=N,xl=u,_s=null);break;case"focusout":_s=xl=jn=null;break;case"mousedown":vl=!0;break;case"contextmenu":case"mouseup":case"dragend":vl=!1,qu(h,r,d);break;case"selectionchange":if(tx)break;case"keydown":case"keyup":qu(h,r,d)}var S;if(_c)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else bn?Nf(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(_f&&r.locale!=="ko"&&(bn||C!=="onCompositionStart"?C==="onCompositionEnd"&&bn&&(S=kf()):(wr=d,bc="value"in wr?wr.value:wr.textContent,bn=!0)),N=fa(u,C),0<N.length&&(C=new Du(C,e,null,r,d),h.push({event:C,listeners:N}),S?C.data=S:(S=Sf(r),S!==null&&(C.data=S)))),(S=z0?H0(e,r):V0(e,r))&&(u=fa(u,"onBeforeInput"),0<u.length&&(d=new Du("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=S))}Bf(h,t)})}function Us(e,t,r){return{instance:e,listener:t,currentTarget:r}}function fa(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rs(e,r),i!=null&&n.unshift(Us(e,i,s)),i=Rs(e,t),i!=null&&n.push(Us(e,i,s))),e=e.return}return n}function un(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ju(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Rs(r,i),c!=null&&o.unshift(Us(r,c,l))):s||(c=Rs(r,i),c!=null&&o.push(Us(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var ix=/\r\n?/g,ax=/\u0000|\uFFFD/g;function Yu(e){return(typeof e=="string"?e:""+e).replace(ix,`
`).replace(ax,"")}function ki(e,t,r){if(t=Yu(t),Yu(e)!==t&&r)throw Error(P(425))}function ma(){}var yl=null,wl=null;function bl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jl=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,Qu=typeof Promise=="function"?Promise:void 0,lx=typeof queueMicrotask=="function"?queueMicrotask:typeof Qu<"u"?function(e){return Qu.resolve(null).then(e).catch(cx)}:jl;function cx(e){setTimeout(function(){throw e})}function _o(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Is(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Is(t)}function Nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Jn=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Jn,Ws="__reactProps$"+Jn,ar="__reactContainer$"+Jn,kl="__reactEvents$"+Jn,ux="__reactListeners$"+Jn,dx="__reactHandles$"+Jn;function qr(e){var t=e[Kt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ar]||r[Kt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xu(e);e!==null;){if(r=e[Kt])return r;e=Xu(e)}return t}e=r,r=e.parentNode}return null}function si(e){return e=e[Kt]||e[ar],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _n(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function za(e){return e[Ws]||null}var _l=[],Nn=-1;function Rr(e){return{current:e}}function le(e){0>Nn||(e.current=_l[Nn],_l[Nn]=null,Nn--)}function ie(e,t){Nn++,_l[Nn]=e.current,e.current=t}var Lr={},He=Rr(Lr),Ze=Rr(!1),Zr=Lr;function Un(e,t){var r=e.type.contextTypes;if(!r)return Lr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function et(e){return e=e.childContextTypes,e!=null}function pa(){le(Ze),le(He)}function Zu(e,t,r){if(He.current!==Lr)throw Error(P(168));ie(He,t),ie(Ze,r)}function Uf(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(P(108,Jg(e)||"Unknown",s));return ve({},r,n)}function ga(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lr,Zr=He.current,ie(He,e),ie(Ze,Ze.current),!0}function ed(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=Uf(e,t,Zr),n.__reactInternalMemoizedMergedChildContext=e,le(Ze),le(He),ie(He,e)):le(Ze),ie(Ze,r)}var er=null,Ha=!1,No=!1;function Wf(e){er===null?er=[e]:er.push(e)}function hx(e){Ha=!0,Wf(e)}function $r(){if(!No&&er!==null){No=!0;var e=0,t=re;try{var r=er;for(re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}er=null,Ha=!1}catch(s){throw er!==null&&(er=er.slice(e+1)),hf(xc,$r),s}finally{re=t,No=!1}}return null}var Sn=[],Cn=0,xa=null,va=0,mt=[],pt=0,en=null,tr=1,rr="";function Ur(e,t){Sn[Cn++]=va,Sn[Cn++]=xa,xa=e,va=t}function Ff(e,t,r){mt[pt++]=tr,mt[pt++]=rr,mt[pt++]=en,en=e;var n=tr;e=rr;var s=32-Lt(n)-1;n&=~(1<<s),r+=1;var i=32-Lt(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,tr=1<<32-Lt(t)+s|r<<s|n,rr=i+e}else tr=1<<i|r<<s|n,rr=e}function Sc(e){e.return!==null&&(Ur(e,1),Ff(e,1,0))}function Cc(e){for(;e===xa;)xa=Sn[--Cn],Sn[Cn]=null,va=Sn[--Cn],Sn[Cn]=null;for(;e===en;)en=mt[--pt],mt[pt]=null,rr=mt[--pt],mt[pt]=null,tr=mt[--pt],mt[pt]=null}var ut=null,ct=null,de=!1,Tt=null;function zf(e,t){var r=gt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function td(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ut=e,ct=Nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ut=e,ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=en!==null?{id:tr,overflow:rr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=gt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ut=e,ct=null,!0):!1;default:return!1}}function Nl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sl(e){if(de){var t=ct;if(t){var r=t;if(!td(e,t)){if(Nl(e))throw Error(P(418));t=Nr(r.nextSibling);var n=ut;t&&td(e,t)?zf(n,r):(e.flags=e.flags&-4097|2,de=!1,ut=e)}}else{if(Nl(e))throw Error(P(418));e.flags=e.flags&-4097|2,de=!1,ut=e}}}function rd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ut=e}function _i(e){if(e!==ut)return!1;if(!de)return rd(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bl(e.type,e.memoizedProps)),t&&(t=ct)){if(Nl(e))throw Hf(),Error(P(418));for(;t;)zf(e,t),t=Nr(t.nextSibling)}if(rd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ct=Nr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ct=null}}else ct=ut?Nr(e.stateNode.nextSibling):null;return!0}function Hf(){for(var e=ct;e;)e=Nr(e.nextSibling)}function Wn(){ct=ut=null,de=!1}function Ec(e){Tt===null?Tt=[e]:Tt.push(e)}var fx=ur.ReactCurrentBatchConfig;function ds(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function Ni(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nd(e){var t=e._init;return t(e._payload)}function Vf(e){function t(g,x){if(e){var p=g.deletions;p===null?(g.deletions=[x],g.flags|=16):p.push(x)}}function r(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function n(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function s(g,x){return g=Pr(g,x),g.index=0,g.sibling=null,g}function i(g,x,p){return g.index=p,e?(p=g.alternate,p!==null?(p=p.index,p<x?(g.flags|=2,x):p):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,x,p,j){return x===null||x.tag!==6?(x=Oo(p,g.mode,j),x.return=g,x):(x=s(x,p),x.return=g,x)}function c(g,x,p,j){var _=p.type;return _===wn?d(g,x,p.props.children,j,p.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===pr&&nd(_)===x.type)?(j=s(x,p.props),j.ref=ds(g,x,p),j.return=g,j):(j=na(p.type,p.key,p.props,null,g.mode,j),j.ref=ds(g,x,p),j.return=g,j)}function u(g,x,p,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==p.containerInfo||x.stateNode.implementation!==p.implementation?(x=Ro(p,g.mode,j),x.return=g,x):(x=s(x,p.children||[]),x.return=g,x)}function d(g,x,p,j,_){return x===null||x.tag!==7?(x=Xr(p,g.mode,j,_),x.return=g,x):(x=s(x,p),x.return=g,x)}function h(g,x,p){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Oo(""+x,g.mode,p),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case mi:return p=na(x.type,x.key,x.props,null,g.mode,p),p.ref=ds(g,null,x),p.return=g,p;case yn:return x=Ro(x,g.mode,p),x.return=g,x;case pr:var j=x._init;return h(g,j(x._payload),p)}if(gs(x)||as(x))return x=Xr(x,g.mode,p,null),x.return=g,x;Ni(g,x)}return null}function f(g,x,p,j){var _=x!==null?x.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return _!==null?null:l(g,x,""+p,j);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case mi:return p.key===_?c(g,x,p,j):null;case yn:return p.key===_?u(g,x,p,j):null;case pr:return _=p._init,f(g,x,_(p._payload),j)}if(gs(p)||as(p))return _!==null?null:d(g,x,p,j,null);Ni(g,p)}return null}function m(g,x,p,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(p)||null,l(x,g,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case mi:return g=g.get(j.key===null?p:j.key)||null,c(x,g,j,_);case yn:return g=g.get(j.key===null?p:j.key)||null,u(x,g,j,_);case pr:var N=j._init;return m(g,x,p,N(j._payload),_)}if(gs(j)||as(j))return g=g.get(p)||null,d(x,g,j,_,null);Ni(x,j)}return null}function v(g,x,p,j){for(var _=null,N=null,S=x,C=x=0,A=null;S!==null&&C<p.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var L=f(g,S,p[C],j);if(L===null){S===null&&(S=A);break}e&&S&&L.alternate===null&&t(g,S),x=i(L,x,C),N===null?_=L:N.sibling=L,N=L,S=A}if(C===p.length)return r(g,S),de&&Ur(g,C),_;if(S===null){for(;C<p.length;C++)S=h(g,p[C],j),S!==null&&(x=i(S,x,C),N===null?_=S:N.sibling=S,N=S);return de&&Ur(g,C),_}for(S=n(g,S);C<p.length;C++)A=m(S,g,C,p[C],j),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),x=i(A,x,C),N===null?_=A:N.sibling=A,N=A);return e&&S.forEach(function(B){return t(g,B)}),de&&Ur(g,C),_}function y(g,x,p,j){var _=as(p);if(typeof _!="function")throw Error(P(150));if(p=_.call(p),p==null)throw Error(P(151));for(var N=_=null,S=x,C=x=0,A=null,L=p.next();S!==null&&!L.done;C++,L=p.next()){S.index>C?(A=S,S=null):A=S.sibling;var B=f(g,S,L.value,j);if(B===null){S===null&&(S=A);break}e&&S&&B.alternate===null&&t(g,S),x=i(B,x,C),N===null?_=B:N.sibling=B,N=B,S=A}if(L.done)return r(g,S),de&&Ur(g,C),_;if(S===null){for(;!L.done;C++,L=p.next())L=h(g,L.value,j),L!==null&&(x=i(L,x,C),N===null?_=L:N.sibling=L,N=L);return de&&Ur(g,C),_}for(S=n(g,S);!L.done;C++,L=p.next())L=m(S,g,C,L.value,j),L!==null&&(e&&L.alternate!==null&&S.delete(L.key===null?C:L.key),x=i(L,x,C),N===null?_=L:N.sibling=L,N=L);return e&&S.forEach(function(z){return t(g,z)}),de&&Ur(g,C),_}function b(g,x,p,j){if(typeof p=="object"&&p!==null&&p.type===wn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case mi:e:{for(var _=p.key,N=x;N!==null;){if(N.key===_){if(_=p.type,_===wn){if(N.tag===7){r(g,N.sibling),x=s(N,p.props.children),x.return=g,g=x;break e}}else if(N.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===pr&&nd(_)===N.type){r(g,N.sibling),x=s(N,p.props),x.ref=ds(g,N,p),x.return=g,g=x;break e}r(g,N);break}else t(g,N);N=N.sibling}p.type===wn?(x=Xr(p.props.children,g.mode,j,p.key),x.return=g,g=x):(j=na(p.type,p.key,p.props,null,g.mode,j),j.ref=ds(g,x,p),j.return=g,g=j)}return o(g);case yn:e:{for(N=p.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===p.containerInfo&&x.stateNode.implementation===p.implementation){r(g,x.sibling),x=s(x,p.children||[]),x.return=g,g=x;break e}else{r(g,x);break}else t(g,x);x=x.sibling}x=Ro(p,g.mode,j),x.return=g,g=x}return o(g);case pr:return N=p._init,b(g,x,N(p._payload),j)}if(gs(p))return v(g,x,p,j);if(as(p))return y(g,x,p,j);Ni(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,x!==null&&x.tag===6?(r(g,x.sibling),x=s(x,p),x.return=g,g=x):(r(g,x),x=Oo(p,g.mode,j),x.return=g,g=x),o(g)):r(g,x)}return b}var Fn=Vf(!0),qf=Vf(!1),ya=Rr(null),wa=null,En=null,Pc=null;function Tc(){Pc=En=wa=null}function Lc(e){var t=ya.current;le(ya),e._currentValue=t}function Cl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function In(e,t){wa=e,Pc=En=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xe=!0),e.firstContext=null)}function vt(e){var t=e._currentValue;if(Pc!==e)if(e={context:e,memoizedValue:t,next:null},En===null){if(wa===null)throw Error(P(308));En=e,wa.dependencies={lanes:0,firstContext:e}}else En=En.next=e;return t}var Kr=null;function Oc(e){Kr===null?Kr=[e]:Kr.push(e)}function Kf(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Oc(t)):(r.next=s.next,s.next=r),t.interleaved=r,or(e,n)}function or(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var gr=!1;function Rc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Z&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,or(e,r)}return s=n.interleaved,s===null?(t.next=t,Oc(n)):(t.next=s.next,s.next=t),n.interleaved=t,or(e,r)}function Qi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vc(e,r)}}function sd(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ba(e,t,r,n){var s=e.updateQueue;gr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,y=l;switch(f=t,m=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=ve({},h,f);break e;case 2:gr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);rn|=o,e.lanes=o,e.memoizedState=h}}function id(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var ii={},Jt=Rr(ii),Fs=Rr(ii),zs=Rr(ii);function Gr(e){if(e===ii)throw Error(P(174));return e}function $c(e,t){switch(ie(zs,t),ie(Fs,e),ie(Jt,ii),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ol(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ol(t,e)}le(Jt),ie(Jt,t)}function zn(){le(Jt),le(Fs),le(zs)}function Jf(e){Gr(zs.current);var t=Gr(Jt.current),r=ol(t,e.type);t!==r&&(ie(Fs,e),ie(Jt,r))}function Ac(e){Fs.current===e&&(le(Jt),le(Fs))}var ge=Rr(0);function ja(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var So=[];function Ic(){for(var e=0;e<So.length;e++)So[e]._workInProgressVersionPrimary=null;So.length=0}var Xi=ur.ReactCurrentDispatcher,Co=ur.ReactCurrentBatchConfig,tn=0,xe=null,Ee=null,Oe=null,ka=!1,Ns=!1,Hs=0,mx=0;function We(){throw Error(P(321))}function Dc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Rt(e[r],t[r]))return!1;return!0}function Bc(e,t,r,n,s,i){if(tn=i,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xi.current=e===null||e.memoizedState===null?vx:yx,e=r(n,s),Ns){i=0;do{if(Ns=!1,Hs=0,25<=i)throw Error(P(301));i+=1,Oe=Ee=null,t.updateQueue=null,Xi.current=wx,e=r(n,s)}while(Ns)}if(Xi.current=_a,t=Ee!==null&&Ee.next!==null,tn=0,Oe=Ee=xe=null,ka=!1,t)throw Error(P(300));return e}function Mc(){var e=Hs!==0;return Hs=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?xe.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function yt(){if(Ee===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Oe===null?xe.memoizedState:Oe.next;if(t!==null)Oe=t,Ee=e;else{if(e===null)throw Error(P(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Oe===null?xe.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function Vs(e,t){return typeof t=="function"?t(e):t}function Eo(e){var t=yt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=Ee,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((tn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,xe.lanes|=d,rn|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Rt(n,t.memoizedState)||(Xe=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,xe.lanes|=i,rn|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Po(e){var t=yt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Rt(i,t.memoizedState)||(Xe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Yf(){}function Qf(e,t){var r=xe,n=yt(),s=t(),i=!Rt(n.memoizedState,s);if(i&&(n.memoizedState=s,Xe=!0),n=n.queue,Uc(em.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Oe!==null&&Oe.memoizedState.tag&1){if(r.flags|=2048,qs(9,Zf.bind(null,r,n,s,t),void 0,null),Re===null)throw Error(P(349));tn&30||Xf(r,t,s)}return s}function Xf(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Zf(e,t,r,n){t.value=r,t.getSnapshot=n,tm(t)&&rm(e)}function em(e,t,r){return r(function(){tm(t)&&rm(e)})}function tm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Rt(e,r)}catch{return!0}}function rm(e){var t=or(e,1);t!==null&&Ot(t,e,1,-1)}function ad(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:e},t.queue=e,e=e.dispatch=xx.bind(null,xe,e),[t.memoizedState,e]}function qs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function nm(){return yt().memoizedState}function Zi(e,t,r,n){var s=qt();xe.flags|=e,s.memoizedState=qs(1|t,r,void 0,n===void 0?null:n)}function Va(e,t,r,n){var s=yt();n=n===void 0?null:n;var i=void 0;if(Ee!==null){var o=Ee.memoizedState;if(i=o.destroy,n!==null&&Dc(n,o.deps)){s.memoizedState=qs(t,r,i,n);return}}xe.flags|=e,s.memoizedState=qs(1|t,r,i,n)}function od(e,t){return Zi(8390656,8,e,t)}function Uc(e,t){return Va(2048,8,e,t)}function sm(e,t){return Va(4,2,e,t)}function im(e,t){return Va(4,4,e,t)}function am(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function om(e,t,r){return r=r!=null?r.concat([e]):null,Va(4,4,am.bind(null,t,e),r)}function Wc(){}function lm(e,t){var r=yt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function cm(e,t){var r=yt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function um(e,t,r){return tn&21?(Rt(r,t)||(r=pf(),xe.lanes|=r,rn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xe=!0),e.memoizedState=r)}function px(e,t){var r=re;re=r!==0&&4>r?r:4,e(!0);var n=Co.transition;Co.transition={};try{e(!1),t()}finally{re=r,Co.transition=n}}function dm(){return yt().memoizedState}function gx(e,t,r){var n=Er(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},hm(e))fm(t,r);else if(r=Kf(e,t,r,n),r!==null){var s=Ge();Ot(r,e,n,s),mm(r,t,n)}}function xx(e,t,r){var n=Er(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(hm(e))fm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Rt(l,o)){var c=t.interleaved;c===null?(s.next=s,Oc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Kf(e,t,s,n),r!==null&&(s=Ge(),Ot(r,e,n,s),mm(r,t,n))}}function hm(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function fm(e,t){Ns=ka=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function mm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vc(e,r)}}var _a={readContext:vt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},vx={readContext:vt,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:vt,useEffect:od,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Zi(4194308,4,am.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zi(4,2,e,t)},useMemo:function(e,t){var r=qt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=qt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=gx.bind(null,xe,e),[n.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:ad,useDebugValue:Wc,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=ad(!1),t=e[0];return e=px.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=xe,s=qt();if(de){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),Re===null)throw Error(P(349));tn&30||Xf(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,od(em.bind(null,n,i,e),[e]),n.flags|=2048,qs(9,Zf.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=qt(),t=Re.identifierPrefix;if(de){var r=rr,n=tr;r=(n&~(1<<32-Lt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Hs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=mx++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yx={readContext:vt,useCallback:lm,useContext:vt,useEffect:Uc,useImperativeHandle:om,useInsertionEffect:sm,useLayoutEffect:im,useMemo:cm,useReducer:Eo,useRef:nm,useState:function(){return Eo(Vs)},useDebugValue:Wc,useDeferredValue:function(e){var t=yt();return um(t,Ee.memoizedState,e)},useTransition:function(){var e=Eo(Vs)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Yf,useSyncExternalStore:Qf,useId:dm,unstable_isNewReconciler:!1},wx={readContext:vt,useCallback:lm,useContext:vt,useEffect:Uc,useImperativeHandle:om,useInsertionEffect:sm,useLayoutEffect:im,useMemo:cm,useReducer:Po,useRef:nm,useState:function(){return Po(Vs)},useDebugValue:Wc,useDeferredValue:function(e){var t=yt();return Ee===null?t.memoizedState=e:um(t,Ee.memoizedState,e)},useTransition:function(){var e=Po(Vs)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Yf,useSyncExternalStore:Qf,useId:dm,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=ve({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function El(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ve({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var qa={isMounted:function(e){return(e=e._reactInternals)?an(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ge(),s=Er(e),i=nr(n,s);i.payload=t,r!=null&&(i.callback=r),t=Sr(e,i,s),t!==null&&(Ot(t,e,s,n),Qi(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ge(),s=Er(e),i=nr(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Sr(e,i,s),t!==null&&(Ot(t,e,s,n),Qi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ge(),n=Er(e),s=nr(r,n);s.tag=2,t!=null&&(s.callback=t),t=Sr(e,s,n),t!==null&&(Ot(t,e,n,r),Qi(t,e,n))}};function ld(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Bs(r,n)||!Bs(s,i):!0}function pm(e,t,r){var n=!1,s=Lr,i=t.contextType;return typeof i=="object"&&i!==null?i=vt(i):(s=et(t)?Zr:He.current,n=t.contextTypes,i=(n=n!=null)?Un(e,s):Lr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function cd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Pl(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Rc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=vt(i):(i=et(t)?Zr:He.current,s.context=Un(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(El(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&qa.enqueueReplaceState(s,s.state,null),ba(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Hn(e,t){try{var r="",n=t;do r+=Gg(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function To(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Tl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var bx=typeof WeakMap=="function"?WeakMap:Map;function gm(e,t,r){r=nr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Sa||(Sa=!0,Ul=n),Tl(e,t)},r}function xm(e,t,r){r=nr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Tl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Tl(e,t),typeof n!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function ud(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new bx;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Ax.bind(null,e,t,r),t.then(e,e))}function dd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hd(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=nr(-1,1),t.tag=2,Sr(r,t,1))),r.lanes|=1),e)}var jx=ur.ReactCurrentOwner,Xe=!1;function qe(e,t,r,n){t.child=e===null?qf(t,null,r,n):Fn(t,e.child,r,n)}function fd(e,t,r,n,s){r=r.render;var i=t.ref;return In(t,s),n=Bc(e,t,r,n,i,s),r=Mc(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):(de&&r&&Sc(t),t.flags|=1,qe(e,t,n,s),t.child)}function md(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Jc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,vm(e,t,i,n,s)):(e=na(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Bs,r(o,n)&&e.ref===t.ref)return lr(e,t,s)}return t.flags|=1,e=Pr(i,n),e.ref=t.ref,e.return=t,t.child=e}function vm(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Bs(i,n)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Xe=!0);else return t.lanes=e.lanes,lr(e,t,s)}return Ll(e,t,r,n,s)}function ym(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Tn,at),at|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(Tn,at),at|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ie(Tn,at),at|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ie(Tn,at),at|=n;return qe(e,t,s,r),t.child}function wm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ll(e,t,r,n,s){var i=et(r)?Zr:He.current;return i=Un(t,i),In(t,s),r=Bc(e,t,r,n,i,s),n=Mc(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):(de&&n&&Sc(t),t.flags|=1,qe(e,t,r,s),t.child)}function pd(e,t,r,n,s){if(et(r)){var i=!0;ga(t)}else i=!1;if(In(t,s),t.stateNode===null)ea(e,t),pm(t,r,n),Pl(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=vt(u):(u=et(r)?Zr:He.current,u=Un(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&cd(t,o,n,u),gr=!1;var f=t.memoizedState;o.state=f,ba(t,n,o,s),c=t.memoizedState,l!==n||f!==c||Ze.current||gr?(typeof d=="function"&&(El(t,r,d,n),c=t.memoizedState),(l=gr||ld(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Gf(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:St(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=vt(c):(c=et(r)?Zr:He.current,c=Un(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&cd(t,o,n,c),gr=!1,f=t.memoizedState,o.state=f,ba(t,n,o,s);var v=t.memoizedState;l!==h||f!==v||Ze.current||gr?(typeof m=="function"&&(El(t,r,m,n),v=t.memoizedState),(u=gr||ld(t,r,u,n,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Ol(e,t,r,n,i,s)}function Ol(e,t,r,n,s,i){wm(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&ed(t,r,!1),lr(e,t,i);n=t.stateNode,jx.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Fn(t,e.child,null,i),t.child=Fn(t,null,l,i)):qe(e,t,l,i),t.memoizedState=n.state,s&&ed(t,r,!0),t.child}function bm(e){var t=e.stateNode;t.pendingContext?Zu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zu(e,t.context,!1),$c(e,t.containerInfo)}function gd(e,t,r,n,s){return Wn(),Ec(s),t.flags|=256,qe(e,t,r,n),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0};function $l(e){return{baseLanes:e,cachePool:null,transitions:null}}function jm(e,t,r){var n=t.pendingProps,s=ge.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ie(ge,s&1),e===null)return Sl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ja(o,n,0,null),e=Xr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=$l(r),t.memoizedState=Rl,e):Fc(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kx(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Pr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Pr(l,i):(i=Xr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?$l(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Rl,n}return i=e.child,e=i.sibling,n=Pr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Fc(e,t){return t=Ja({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Si(e,t,r,n){return n!==null&&Ec(n),Fn(t,e.child,null,r),e=Fc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kx(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=To(Error(P(422))),Si(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Ja({mode:"visible",children:n.children},s,0,null),i=Xr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Fn(t,e.child,null,o),t.child.memoizedState=$l(o),t.memoizedState=Rl,i);if(!(t.mode&1))return Si(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(P(419)),n=To(i,n,void 0),Si(e,t,o,n)}if(l=(o&e.childLanes)!==0,Xe||l){if(n=Re,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,or(e,s),Ot(n,e,s,-1))}return Gc(),n=To(Error(P(421))),Si(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ix.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ct=Nr(s.nextSibling),ut=t,de=!0,Tt=null,e!==null&&(mt[pt++]=tr,mt[pt++]=rr,mt[pt++]=en,tr=e.id,rr=e.overflow,en=t),t=Fc(t,n.children),t.flags|=4096,t)}function xd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Cl(e.return,t,r)}function Lo(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function km(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(qe(e,t,n.children,r),n=ge.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xd(e,r,t);else if(e.tag===19)xd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ie(ge,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ja(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Lo(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ja(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Lo(t,!0,r,null,i);break;case"together":Lo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ea(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),rn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=Pr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Pr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function _x(e,t,r){switch(t.tag){case 3:bm(t),Wn();break;case 5:Jf(t);break;case 1:et(t.type)&&ga(t);break;case 4:$c(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ie(ya,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ie(ge,ge.current&1),t.flags|=128,null):r&t.child.childLanes?jm(e,t,r):(ie(ge,ge.current&1),e=lr(e,t,r),e!==null?e.sibling:null);ie(ge,ge.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return km(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(ge,ge.current),n)break;return null;case 22:case 23:return t.lanes=0,ym(e,t,r)}return lr(e,t,r)}var _m,Al,Nm,Sm;_m=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Al=function(){};Nm=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Gr(Jt.current);var i=null;switch(r){case"input":s=nl(e,s),n=nl(e,n),i=[];break;case"select":s=ve({},s,{value:void 0}),n=ve({},n,{value:void 0}),i=[];break;case"textarea":s=al(e,s),n=al(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ma)}ll(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ls.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ls.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&oe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Sm=function(e,t,r,n){r!==n&&(t.flags|=4)};function hs(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Nx(e,t,r){var n=t.pendingProps;switch(Cc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return et(t.type)&&pa(),Fe(t),null;case 3:return n=t.stateNode,zn(),le(Ze),le(He),Ic(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(_i(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(zl(Tt),Tt=null))),Al(e,t),Fe(t),null;case 5:Ac(t);var s=Gr(zs.current);if(r=t.type,e!==null&&t.stateNode!=null)Nm(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return Fe(t),null}if(e=Gr(Jt.current),_i(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Kt]=t,n[Ws]=i,e=(t.mode&1)!==0,r){case"dialog":oe("cancel",n),oe("close",n);break;case"iframe":case"object":case"embed":oe("load",n);break;case"video":case"audio":for(s=0;s<vs.length;s++)oe(vs[s],n);break;case"source":oe("error",n);break;case"img":case"image":case"link":oe("error",n),oe("load",n);break;case"details":oe("toggle",n);break;case"input":Su(n,i),oe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},oe("invalid",n);break;case"textarea":Eu(n,i),oe("invalid",n)}ll(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ki(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ki(n.textContent,l,e),s=["children",""+l]):Ls.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&oe("scroll",n)}switch(r){case"input":pi(n),Cu(n,i,!0);break;case"textarea":pi(n),Pu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ma)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Kt]=t,e[Ws]=n,_m(e,t,!1,!1),t.stateNode=e;e:{switch(o=cl(r,n),r){case"dialog":oe("cancel",e),oe("close",e),s=n;break;case"iframe":case"object":case"embed":oe("load",e),s=n;break;case"video":case"audio":for(s=0;s<vs.length;s++)oe(vs[s],e);s=n;break;case"source":oe("error",e),s=n;break;case"img":case"image":case"link":oe("error",e),oe("load",e),s=n;break;case"details":oe("toggle",e),s=n;break;case"input":Su(e,n),s=nl(e,n),oe("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ve({},n,{value:void 0}),oe("invalid",e);break;case"textarea":Eu(e,n),s=al(e,n),oe("invalid",e);break;default:s=n}ll(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?rf(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ef(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Os(e,c):typeof c=="number"&&Os(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ls.hasOwnProperty(i)?c!=null&&i==="onScroll"&&oe("scroll",e):c!=null&&hc(e,i,c,o))}switch(r){case"input":pi(e),Cu(e,n,!1);break;case"textarea":pi(e),Pu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Tr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?On(e,!!n.multiple,i,!1):n.defaultValue!=null&&On(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ma)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fe(t),null;case 6:if(e&&t.stateNode!=null)Sm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=Gr(zs.current),Gr(Jt.current),_i(t)){if(n=t.stateNode,r=t.memoizedProps,n[Kt]=t,(i=n.nodeValue!==r)&&(e=ut,e!==null))switch(e.tag){case 3:ki(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ki(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Kt]=t,t.stateNode=n}return Fe(t),null;case 13:if(le(ge),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&ct!==null&&t.mode&1&&!(t.flags&128))Hf(),Wn(),t.flags|=98560,i=!1;else if(i=_i(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[Kt]=t}else Wn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),i=!1}else Tt!==null&&(zl(Tt),Tt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ge.current&1?Pe===0&&(Pe=3):Gc())),t.updateQueue!==null&&(t.flags|=4),Fe(t),null);case 4:return zn(),Al(e,t),e===null&&Ms(t.stateNode.containerInfo),Fe(t),null;case 10:return Lc(t.type._context),Fe(t),null;case 17:return et(t.type)&&pa(),Fe(t),null;case 19:if(le(ge),i=t.memoizedState,i===null)return Fe(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)hs(i,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ja(e),o!==null){for(t.flags|=128,hs(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ie(ge,ge.current&1|2),t.child}e=e.sibling}i.tail!==null&&ke()>Vn&&(t.flags|=128,n=!0,hs(i,!1),t.lanes=4194304)}else{if(!n)if(e=ja(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!de)return Fe(t),null}else 2*ke()-i.renderingStartTime>Vn&&r!==1073741824&&(t.flags|=128,n=!0,hs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ke(),t.sibling=null,r=ge.current,ie(ge,n?r&1|2:r&1),t):(Fe(t),null);case 22:case 23:return Kc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?at&1073741824&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Sx(e,t){switch(Cc(t),t.tag){case 1:return et(t.type)&&pa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zn(),le(Ze),le(He),Ic(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ac(t),null;case 13:if(le(ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Wn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(ge),null;case 4:return zn(),null;case 10:return Lc(t.type._context),null;case 22:case 23:return Kc(),null;case 24:return null;default:return null}}var Ci=!1,ze=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,R=null;function Pn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ye(e,t,n)}else r.current=null}function Il(e,t,r){try{r()}catch(n){ye(e,t,n)}}var vd=!1;function Ex(e,t){if(yl=da,e=Lf(),Nc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(wl={focusedElem:e,selectionRange:r},da=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:St(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(j){ye(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return v=vd,vd=!1,v}function Ss(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Il(t,r,i)}s=s.next}while(s!==n)}}function Ka(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Dl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Cm(e){var t=e.alternate;t!==null&&(e.alternate=null,Cm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kt],delete t[Ws],delete t[kl],delete t[ux],delete t[dx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Em(e){return e.tag===5||e.tag===3||e.tag===4}function yd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Em(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ma));else if(n!==4&&(e=e.child,e!==null))for(Bl(e,t,r),e=e.sibling;e!==null;)Bl(e,t,r),e=e.sibling}function Ml(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ml(e,t,r),e=e.sibling;e!==null;)Ml(e,t,r),e=e.sibling}var Ie=null,Et=!1;function fr(e,t,r){for(r=r.child;r!==null;)Pm(e,t,r),r=r.sibling}function Pm(e,t,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Ma,r)}catch{}switch(r.tag){case 5:ze||Pn(r,t);case 6:var n=Ie,s=Et;Ie=null,fr(e,t,r),Ie=n,Et=s,Ie!==null&&(Et?(e=Ie,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ie.removeChild(r.stateNode));break;case 18:Ie!==null&&(Et?(e=Ie,r=r.stateNode,e.nodeType===8?_o(e.parentNode,r):e.nodeType===1&&_o(e,r),Is(e)):_o(Ie,r.stateNode));break;case 4:n=Ie,s=Et,Ie=r.stateNode.containerInfo,Et=!0,fr(e,t,r),Ie=n,Et=s;break;case 0:case 11:case 14:case 15:if(!ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Il(r,t,o),s=s.next}while(s!==n)}fr(e,t,r);break;case 1:if(!ze&&(Pn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ye(r,t,l)}fr(e,t,r);break;case 21:fr(e,t,r);break;case 22:r.mode&1?(ze=(n=ze)||r.memoizedState!==null,fr(e,t,r),ze=n):fr(e,t,r);break;default:fr(e,t,r)}}function wd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Cx),t.forEach(function(n){var s=Dx.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function _t(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ie=l.stateNode,Et=!1;break e;case 3:Ie=l.stateNode.containerInfo,Et=!0;break e;case 4:Ie=l.stateNode.containerInfo,Et=!0;break e}l=l.return}if(Ie===null)throw Error(P(160));Pm(i,o,s),Ie=null,Et=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ye(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Tm(t,e),t=t.sibling}function Tm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_t(t,e),Ht(e),n&4){try{Ss(3,e,e.return),Ka(3,e)}catch(y){ye(e,e.return,y)}try{Ss(5,e,e.return)}catch(y){ye(e,e.return,y)}}break;case 1:_t(t,e),Ht(e),n&512&&r!==null&&Pn(r,r.return);break;case 5:if(_t(t,e),Ht(e),n&512&&r!==null&&Pn(r,r.return),e.flags&32){var s=e.stateNode;try{Os(s,"")}catch(y){ye(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Qh(s,i),cl(l,o);var u=cl(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?rf(s,h):d==="dangerouslySetInnerHTML"?ef(s,h):d==="children"?Os(s,h):hc(s,d,h,u)}switch(l){case"input":sl(s,i);break;case"textarea":Xh(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?On(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?On(s,!!i.multiple,i.defaultValue,!0):On(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ws]=i}catch(y){ye(e,e.return,y)}}break;case 6:if(_t(t,e),Ht(e),n&4){if(e.stateNode===null)throw Error(P(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){ye(e,e.return,y)}}break;case 3:if(_t(t,e),Ht(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Is(t.containerInfo)}catch(y){ye(e,e.return,y)}break;case 4:_t(t,e),Ht(e);break;case 13:_t(t,e),Ht(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vc=ke())),n&4&&wd(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ze=(u=ze)||d,_t(t,e),ze=u):_t(t,e),Ht(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(R=e,d=e.child;d!==null;){for(h=R=d;R!==null;){switch(f=R,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ss(4,f,f.return);break;case 1:Pn(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){ye(n,r,y)}}break;case 5:Pn(f,f.return);break;case 22:if(f.memoizedState!==null){jd(h);continue}}m!==null?(m.return=f,R=m):jd(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=tf("display",o))}catch(y){ye(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){ye(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_t(t,e),Ht(e),n&4&&wd(e);break;case 21:break;default:_t(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Em(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Os(s,""),n.flags&=-33);var i=yd(e);Ml(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=yd(e);Bl(e,l,o);break;default:throw Error(P(161))}}catch(c){ye(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Px(e,t,r){R=e,Lm(e)}function Lm(e,t,r){for(var n=(e.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ci;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ze;l=Ci;var u=ze;if(Ci=o,(ze=c)&&!u)for(R=s;R!==null;)o=R,c=o.child,o.tag===22&&o.memoizedState!==null?kd(s):c!==null?(c.return=o,R=c):kd(s);for(;i!==null;)R=i,Lm(i),i=i.sibling;R=s,Ci=l,ze=u}bd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):bd(e)}}function bd(e){for(;R!==null;){var t=R;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ze||Ka(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ze)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:St(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&id(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}id(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Is(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ze||t.flags&512&&Dl(t)}catch(f){ye(t,t.return,f)}}if(t===e){R=null;break}if(r=t.sibling,r!==null){r.return=t.return,R=r;break}R=t.return}}function jd(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var r=t.sibling;if(r!==null){r.return=t.return,R=r;break}R=t.return}}function kd(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ka(4,t)}catch(c){ye(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ye(t,s,c)}}var i=t.return;try{Dl(t)}catch(c){ye(t,i,c)}break;case 5:var o=t.return;try{Dl(t)}catch(c){ye(t,o,c)}}}catch(c){ye(t,t.return,c)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var Tx=Math.ceil,Na=ur.ReactCurrentDispatcher,zc=ur.ReactCurrentOwner,xt=ur.ReactCurrentBatchConfig,Z=0,Re=null,Ne=null,Be=0,at=0,Tn=Rr(0),Pe=0,Ks=null,rn=0,Ga=0,Hc=0,Cs=null,Qe=null,Vc=0,Vn=1/0,Xt=null,Sa=!1,Ul=null,Cr=null,Ei=!1,br=null,Ca=0,Es=0,Wl=null,ta=-1,ra=0;function Ge(){return Z&6?ke():ta!==-1?ta:ta=ke()}function Er(e){return e.mode&1?Z&2&&Be!==0?Be&-Be:fx.transition!==null?(ra===0&&(ra=pf()),ra):(e=re,e!==0||(e=window.event,e=e===void 0?16:jf(e.type)),e):1}function Ot(e,t,r,n){if(50<Es)throw Es=0,Wl=null,Error(P(185));ri(e,r,n),(!(Z&2)||e!==Re)&&(e===Re&&(!(Z&2)&&(Ga|=r),Pe===4&&vr(e,Be)),tt(e,n),r===1&&Z===0&&!(t.mode&1)&&(Vn=ke()+500,Ha&&$r()))}function tt(e,t){var r=e.callbackNode;f0(e,t);var n=ua(e,e===Re?Be:0);if(n===0)r!==null&&Ou(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ou(r),t===1)e.tag===0?hx(_d.bind(null,e)):Wf(_d.bind(null,e)),lx(function(){!(Z&6)&&$r()}),r=null;else{switch(gf(n)){case 1:r=xc;break;case 4:r=ff;break;case 16:r=ca;break;case 536870912:r=mf;break;default:r=ca}r=Mm(r,Om.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Om(e,t){if(ta=-1,ra=0,Z&6)throw Error(P(327));var r=e.callbackNode;if(Dn()&&e.callbackNode!==r)return null;var n=ua(e,e===Re?Be:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ea(e,n);else{t=n;var s=Z;Z|=2;var i=$m();(Re!==e||Be!==t)&&(Xt=null,Vn=ke()+500,Qr(e,t));do try{Rx();break}catch(l){Rm(e,l)}while(!0);Tc(),Na.current=i,Z=s,Ne!==null?t=0:(Re=null,Be=0,t=Pe)}if(t!==0){if(t===2&&(s=ml(e),s!==0&&(n=s,t=Fl(e,s))),t===1)throw r=Ks,Qr(e,0),vr(e,n),tt(e,ke()),r;if(t===6)vr(e,n);else{if(s=e.current.alternate,!(n&30)&&!Lx(s)&&(t=Ea(e,n),t===2&&(i=ml(e),i!==0&&(n=i,t=Fl(e,i))),t===1))throw r=Ks,Qr(e,0),vr(e,n),tt(e,ke()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:Wr(e,Qe,Xt);break;case 3:if(vr(e,n),(n&130023424)===n&&(t=Vc+500-ke(),10<t)){if(ua(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ge(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=jl(Wr.bind(null,e,Qe,Xt),t);break}Wr(e,Qe,Xt);break;case 4:if(vr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Lt(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tx(n/1960))-n,10<n){e.timeoutHandle=jl(Wr.bind(null,e,Qe,Xt),n);break}Wr(e,Qe,Xt);break;case 5:Wr(e,Qe,Xt);break;default:throw Error(P(329))}}}return tt(e,ke()),e.callbackNode===r?Om.bind(null,e):null}function Fl(e,t){var r=Cs;return e.current.memoizedState.isDehydrated&&(Qr(e,t).flags|=256),e=Ea(e,t),e!==2&&(t=Qe,Qe=r,t!==null&&zl(t)),e}function zl(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function Lx(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Rt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vr(e,t){for(t&=~Hc,t&=~Ga,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Lt(t),n=1<<r;e[r]=-1,t&=~n}}function _d(e){if(Z&6)throw Error(P(327));Dn();var t=ua(e,0);if(!(t&1))return tt(e,ke()),null;var r=Ea(e,t);if(e.tag!==0&&r===2){var n=ml(e);n!==0&&(t=n,r=Fl(e,n))}if(r===1)throw r=Ks,Qr(e,0),vr(e,t),tt(e,ke()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wr(e,Qe,Xt),tt(e,ke()),null}function qc(e,t){var r=Z;Z|=1;try{return e(t)}finally{Z=r,Z===0&&(Vn=ke()+500,Ha&&$r())}}function nn(e){br!==null&&br.tag===0&&!(Z&6)&&Dn();var t=Z;Z|=1;var r=xt.transition,n=re;try{if(xt.transition=null,re=1,e)return e()}finally{re=n,xt.transition=r,Z=t,!(Z&6)&&$r()}}function Kc(){at=Tn.current,le(Tn)}function Qr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ox(r)),Ne!==null)for(r=Ne.return;r!==null;){var n=r;switch(Cc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&pa();break;case 3:zn(),le(Ze),le(He),Ic();break;case 5:Ac(n);break;case 4:zn();break;case 13:le(ge);break;case 19:le(ge);break;case 10:Lc(n.type._context);break;case 22:case 23:Kc()}r=r.return}if(Re=e,Ne=e=Pr(e.current,null),Be=at=t,Pe=0,Ks=null,Hc=Ga=rn=0,Qe=Cs=null,Kr!==null){for(t=0;t<Kr.length;t++)if(r=Kr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Kr=null}return e}function Rm(e,t){do{var r=Ne;try{if(Tc(),Xi.current=_a,ka){for(var n=xe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ka=!1}if(tn=0,Oe=Ee=xe=null,Ns=!1,Hs=0,zc.current=null,r===null||r.return===null){Pe=1,Ks=t,Ne=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Be,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=dd(o);if(m!==null){m.flags&=-257,hd(m,o,l,i,t),m.mode&1&&ud(i,u,t),t=m,c=u;var v=t.updateQueue;if(v===null){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}else{if(!(t&1)){ud(i,u,t),Gc();break e}c=Error(P(426))}}else if(de&&l.mode&1){var b=dd(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),hd(b,o,l,i,t),Ec(Hn(c,l));break e}}i=c=Hn(c,l),Pe!==4&&(Pe=2),Cs===null?Cs=[i]:Cs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=gm(i,c,t);sd(i,g);break e;case 1:l=c;var x=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Cr===null||!Cr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=xm(i,l,t);sd(i,j);break e}}i=i.return}while(i!==null)}Im(r)}catch(_){t=_,Ne===r&&r!==null&&(Ne=r=r.return);continue}break}while(!0)}function $m(){var e=Na.current;return Na.current=_a,e===null?_a:e}function Gc(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Re===null||!(rn&268435455)&&!(Ga&268435455)||vr(Re,Be)}function Ea(e,t){var r=Z;Z|=2;var n=$m();(Re!==e||Be!==t)&&(Xt=null,Qr(e,t));do try{Ox();break}catch(s){Rm(e,s)}while(!0);if(Tc(),Z=r,Na.current=n,Ne!==null)throw Error(P(261));return Re=null,Be=0,Pe}function Ox(){for(;Ne!==null;)Am(Ne)}function Rx(){for(;Ne!==null&&!s0();)Am(Ne)}function Am(e){var t=Bm(e.alternate,e,at);e.memoizedProps=e.pendingProps,t===null?Im(e):Ne=t,zc.current=null}function Im(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Sx(r,t),r!==null){r.flags&=32767,Ne=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pe=6,Ne=null;return}}else if(r=Nx(r,t,at),r!==null){Ne=r;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);Pe===0&&(Pe=5)}function Wr(e,t,r){var n=re,s=xt.transition;try{xt.transition=null,re=1,$x(e,t,r,n)}finally{xt.transition=s,re=n}return null}function $x(e,t,r,n){do Dn();while(br!==null);if(Z&6)throw Error(P(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(m0(e,i),e===Re&&(Ne=Re=null,Be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ei||(Ei=!0,Mm(ca,function(){return Dn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=xt.transition,xt.transition=null;var o=re;re=1;var l=Z;Z|=4,zc.current=null,Ex(e,r),Tm(r,e),ex(wl),da=!!yl,wl=yl=null,e.current=r,Px(r),i0(),Z=l,re=o,xt.transition=i}else e.current=r;if(Ei&&(Ei=!1,br=e,Ca=s),i=e.pendingLanes,i===0&&(Cr=null),l0(r.stateNode),tt(e,ke()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Sa)throw Sa=!1,e=Ul,Ul=null,e;return Ca&1&&e.tag!==0&&Dn(),i=e.pendingLanes,i&1?e===Wl?Es++:(Es=0,Wl=e):Es=0,$r(),null}function Dn(){if(br!==null){var e=gf(Ca),t=xt.transition,r=re;try{if(xt.transition=null,re=16>e?16:e,br===null)var n=!1;else{if(e=br,br=null,Ca=0,Z&6)throw Error(P(331));var s=Z;for(Z|=4,R=e.current;R!==null;){var i=R,o=i.child;if(R.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(R=u;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Ss(8,d,i)}var h=d.child;if(h!==null)h.return=d,R=h;else for(;R!==null;){d=R;var f=d.sibling,m=d.return;if(Cm(d),d===u){R=null;break}if(f!==null){f.return=m,R=f;break}R=m}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}R=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,R=o;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ss(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,R=g;break e}R=i.return}}var x=e.current;for(R=x;R!==null;){o=R;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,R=p;else e:for(o=x;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ka(9,l)}}catch(_){ye(l,l.return,_)}if(l===o){R=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,R=j;break e}R=l.return}}if(Z=s,$r(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Ma,e)}catch{}n=!0}return n}finally{re=r,xt.transition=t}}return!1}function Nd(e,t,r){t=Hn(r,t),t=gm(e,t,1),e=Sr(e,t,1),t=Ge(),e!==null&&(ri(e,1,t),tt(e,t))}function ye(e,t,r){if(e.tag===3)Nd(e,e,r);else for(;t!==null;){if(t.tag===3){Nd(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cr===null||!Cr.has(n))){e=Hn(r,e),e=xm(t,e,1),t=Sr(t,e,1),e=Ge(),t!==null&&(ri(t,1,e),tt(t,e));break}}t=t.return}}function Ax(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ge(),e.pingedLanes|=e.suspendedLanes&r,Re===e&&(Be&r)===r&&(Pe===4||Pe===3&&(Be&130023424)===Be&&500>ke()-Vc?Qr(e,0):Hc|=r),tt(e,t)}function Dm(e,t){t===0&&(e.mode&1?(t=vi,vi<<=1,!(vi&130023424)&&(vi=4194304)):t=1);var r=Ge();e=or(e,t),e!==null&&(ri(e,t,r),tt(e,r))}function Ix(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Dm(e,r)}function Dx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),Dm(e,r)}var Bm;Bm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ze.current)Xe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xe=!1,_x(e,t,r);Xe=!!(e.flags&131072)}else Xe=!1,de&&t.flags&1048576&&Ff(t,va,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ea(e,t),e=t.pendingProps;var s=Un(t,He.current);In(t,r),s=Bc(null,t,n,e,s,r);var i=Mc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(n)?(i=!0,ga(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rc(t),s.updater=qa,t.stateNode=s,s._reactInternals=t,Pl(t,n,e,r),t=Ol(null,t,n,!0,i,r)):(t.tag=0,de&&i&&Sc(t),qe(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ea(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Mx(n),e=St(n,e),s){case 0:t=Ll(null,t,n,e,r);break e;case 1:t=pd(null,t,n,e,r);break e;case 11:t=fd(null,t,n,e,r);break e;case 14:t=md(null,t,n,St(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:St(n,s),Ll(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:St(n,s),pd(e,t,n,s,r);case 3:e:{if(bm(t),e===null)throw Error(P(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Gf(e,t),ba(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Hn(Error(P(423)),t),t=gd(e,t,n,r,s);break e}else if(n!==s){s=Hn(Error(P(424)),t),t=gd(e,t,n,r,s);break e}else for(ct=Nr(t.stateNode.containerInfo.firstChild),ut=t,de=!0,Tt=null,r=qf(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wn(),n===s){t=lr(e,t,r);break e}qe(e,t,n,r)}t=t.child}return t;case 5:return Jf(t),e===null&&Sl(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,bl(n,s)?o=null:i!==null&&bl(n,i)&&(t.flags|=32),wm(e,t),qe(e,t,o,r),t.child;case 6:return e===null&&Sl(t),null;case 13:return jm(e,t,r);case 4:return $c(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fn(t,null,n,r):qe(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:St(n,s),fd(e,t,n,s,r);case 7:return qe(e,t,t.pendingProps,r),t.child;case 8:return qe(e,t,t.pendingProps.children,r),t.child;case 12:return qe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ie(ya,n._currentValue),n._currentValue=o,i!==null)if(Rt(i.value,o)){if(i.children===s.children&&!Ze.current){t=lr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=nr(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Cl(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Cl(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qe(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,In(t,r),s=vt(s),n=n(s),t.flags|=1,qe(e,t,n,r),t.child;case 14:return n=t.type,s=St(n,t.pendingProps),s=St(n.type,s),md(e,t,n,s,r);case 15:return vm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:St(n,s),ea(e,t),t.tag=1,et(n)?(e=!0,ga(t)):e=!1,In(t,r),pm(t,n,s),Pl(t,n,s,r),Ol(null,t,n,!0,e,r);case 19:return km(e,t,r);case 22:return ym(e,t,r)}throw Error(P(156,t.tag))};function Mm(e,t){return hf(e,t)}function Bx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,r,n){return new Bx(e,t,r,n)}function Jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mx(e){if(typeof e=="function")return Jc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mc)return 11;if(e===pc)return 14}return 2}function Pr(e,t){var r=e.alternate;return r===null?(r=gt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function na(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Jc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case wn:return Xr(r.children,s,i,t);case fc:o=8,s|=8;break;case Zo:return e=gt(12,r,t,s|2),e.elementType=Zo,e.lanes=i,e;case el:return e=gt(13,r,t,s),e.elementType=el,e.lanes=i,e;case tl:return e=gt(19,r,t,s),e.elementType=tl,e.lanes=i,e;case Gh:return Ja(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qh:o=10;break e;case Kh:o=9;break e;case mc:o=11;break e;case pc:o=14;break e;case pr:o=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=gt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Xr(e,t,r,n){return e=gt(7,e,n,t),e.lanes=r,e}function Ja(e,t,r,n){return e=gt(22,e,n,t),e.elementType=Gh,e.lanes=r,e.stateNode={isHidden:!1},e}function Oo(e,t,r){return e=gt(6,e,null,t),e.lanes=r,e}function Ro(e,t,r){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ux(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fo(0),this.expirationTimes=fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yc(e,t,r,n,s,i,o,l,c){return e=new Ux(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=gt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rc(i),e}function Wx(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Um(e){if(!e)return Lr;e=e._reactInternals;e:{if(an(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(et(r))return Uf(e,r,t)}return t}function Wm(e,t,r,n,s,i,o,l,c){return e=Yc(r,n,!0,e,s,i,o,l,c),e.context=Um(null),r=e.current,n=Ge(),s=Er(r),i=nr(n,s),i.callback=t??null,Sr(r,i,s),e.current.lanes=s,ri(e,s,n),tt(e,n),e}function Ya(e,t,r,n){var s=t.current,i=Ge(),o=Er(s);return r=Um(r),t.context===null?t.context=r:t.pendingContext=r,t=nr(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Sr(s,t,o),e!==null&&(Ot(e,s,o,i),Qi(e,s,o)),o}function Pa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Qc(e,t){Sd(e,t),(e=e.alternate)&&Sd(e,t)}function Fx(){return null}var Fm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}Qa.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Ya(e,t,null,null)};Qa.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nn(function(){Ya(null,e,null,null)}),t[ar]=null}};function Qa(e){this._internalRoot=e}Qa.prototype.unstable_scheduleHydration=function(e){if(e){var t=yf();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xr.length&&t!==0&&t<xr[r].priority;r++);xr.splice(r,0,e),r===0&&bf(e)}};function Zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cd(){}function zx(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Pa(o);i.call(u)}}var o=Wm(t,n,e,0,null,!1,!1,"",Cd);return e._reactRootContainer=o,e[ar]=o.current,Ms(e.nodeType===8?e.parentNode:e),nn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Pa(c);l.call(u)}}var c=Yc(e,0,!1,null,null,!1,!1,"",Cd);return e._reactRootContainer=c,e[ar]=c.current,Ms(e.nodeType===8?e.parentNode:e),nn(function(){Ya(t,c,r,n)}),c}function Za(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Pa(o);l.call(c)}}Ya(t,o,e,s)}else o=zx(r,t,e,s,n);return Pa(o)}xf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xs(t.pendingLanes);r!==0&&(vc(t,r|1),tt(t,ke()),!(Z&6)&&(Vn=ke()+500,$r()))}break;case 13:nn(function(){var n=or(e,1);if(n!==null){var s=Ge();Ot(n,e,1,s)}}),Qc(e,1)}};yc=function(e){if(e.tag===13){var t=or(e,134217728);if(t!==null){var r=Ge();Ot(t,e,134217728,r)}Qc(e,134217728)}};vf=function(e){if(e.tag===13){var t=Er(e),r=or(e,t);if(r!==null){var n=Ge();Ot(r,e,t,n)}Qc(e,t)}};yf=function(){return re};wf=function(e,t){var r=re;try{return re=e,t()}finally{re=r}};dl=function(e,t,r){switch(t){case"input":if(sl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=za(n);if(!s)throw Error(P(90));Yh(n),sl(n,s)}}}break;case"textarea":Xh(e,r);break;case"select":t=r.value,t!=null&&On(e,!!r.multiple,t,!1)}};af=qc;of=nn;var Hx={usingClientEntryPoint:!1,Events:[si,_n,za,nf,sf,qc]},fs={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vx={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uf(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||Fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pi.isDisabled&&Pi.supportsFiber)try{Ma=Pi.inject(Vx),Gt=Pi}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hx;ht.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(t))throw Error(P(200));return Wx(e,t,null,r)};ht.createRoot=function(e,t){if(!Zc(e))throw Error(P(299));var r=!1,n="",s=Fm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Yc(e,1,!1,null,null,r,!1,n,s),e[ar]=t.current,Ms(e.nodeType===8?e.parentNode:e),new Xc(t)};ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=uf(t),e=e===null?null:e.stateNode,e};ht.flushSync=function(e){return nn(e)};ht.hydrate=function(e,t,r){if(!Xa(t))throw Error(P(200));return Za(null,e,t,!0,r)};ht.hydrateRoot=function(e,t,r){if(!Zc(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Fm;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Wm(t,null,e,1,r??null,s,!1,i,o),e[ar]=t.current,Ms(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Qa(t)};ht.render=function(e,t,r){if(!Xa(t))throw Error(P(200));return Za(null,e,t,!1,r)};ht.unmountComponentAtNode=function(e){if(!Xa(e))throw Error(P(40));return e._reactRootContainer?(nn(function(){Za(null,null,e,!1,function(){e._reactRootContainer=null,e[ar]=null})}),!0):!1};ht.unstable_batchedUpdates=qc;ht.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xa(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return Za(e,t,r,!1,n)};ht.version="18.3.1-next-f1338f8080-20240426";function zm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zm)}catch(e){console.error(e)}}zm(),Fh.exports=ht;var qx=Fh.exports,Ed=qx;Qo.createRoot=Ed.createRoot,Qo.hydrateRoot=Ed.hydrateRoot;/**
 * react-router v7.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pd="popstate";function Kx(e={}){function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Hl("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Gs(s)}return Jx(t,r,null,e)}function he(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gx(){return Math.random().toString(36).substring(2,10)}function Td(e,t){return{usr:e.state,key:e.key,idx:t}}function Hl(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Yn(t):t,state:r,key:t&&t.key||n||Gx()}}function Gs({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Jx(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=d(),g=b==null?null:b-u;u=b,c&&c({action:l,location:y.location,delta:g})}function f(b,g){l="PUSH";let x=Hl(y.location,b,g);u=d()+1;let p=Td(x,u),j=y.createHref(x);try{o.pushState(p,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(j)}i&&c&&c({action:l,location:y.location,delta:1})}function m(b,g){l="REPLACE";let x=Hl(y.location,b,g);u=d();let p=Td(x,u),j=y.createHref(x);o.replaceState(p,"",j),i&&c&&c({action:l,location:y.location,delta:0})}function v(b){return Yx(b)}let y={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Pd,h),c=b,()=>{s.removeEventListener(Pd,h),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let g=v(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:m,go(b){return o.go(b)}};return y}function Yx(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),he(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Gs(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Hm(e,t,r="/"){return Qx(e,t,r,!1)}function Qx(e,t,r,n){let s=typeof t=="string"?Yn(t):t,i=cr(s.pathname||"/",r);if(i==null)return null;let o=Vm(e);Xx(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=cv(i);l=ov(o[c],u,n)}return l}function Vm(e,t=[],r=[],n="",s=!1){let i=(o,l,c=s,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;he(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let h=sr([n,d.relativePath]),f=r.concat(d);o.children&&o.children.length>0&&(he(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Vm(o.children,t,f,h,c)),!(o.path==null&&!o.index)&&t.push({path:h,score:iv(h,o.index),routesMeta:f})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let u of qm(o.path))i(o,l,!0,u)}),t}function qm(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=qm(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Xx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:av(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Zx=/^:[\w-]+$/,ev=3,tv=2,rv=1,nv=10,sv=-2,Ld=e=>e==="*";function iv(e,t){let r=e.split("/"),n=r.length;return r.some(Ld)&&(n+=sv),t&&(n+=tv),r.filter(s=>!Ld(s)).reduce((s,i)=>s+(Zx.test(i)?ev:i===""?rv:nv),n)}function av(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function ov(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Ta({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Ta({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:sr([i,h.pathname]),pathnameBase:mv(sr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=sr([i,h.pathnameBase]))}return o}function Ta(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=lv(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:h},f)=>{if(d==="*"){let v=l[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[f];return h&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function lv(e,t=!1,r=!0){wt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function cv(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function cr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var uv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dv=e=>uv.test(e);function hv(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Yn(e):e,i;if(r)if(dv(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),wt(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?i=Od(r.substring(1),"/"):i=Od(r,t)}else i=t;return{pathname:i,search:pv(n),hash:gv(s)}}function Od(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function $o(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fv(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function eu(e){let t=fv(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function tu(e,t,r,n=!1){let s;typeof e=="string"?s=Yn(e):(s={...e},he(!s.pathname||!s.pathname.includes("?"),$o("?","pathname","search",s)),he(!s.pathname||!s.pathname.includes("#"),$o("#","pathname","hash",s)),he(!s.search||!s.search.includes("#"),$o("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=hv(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var sr=e=>e.join("/").replace(/\/\/+/g,"/"),mv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gv=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function vv(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Km=["POST","PUT","PATCH","DELETE"];new Set(Km);var yv=["GET",...Km];new Set(yv);var Qn=w.createContext(null);Qn.displayName="DataRouter";var eo=w.createContext(null);eo.displayName="DataRouterState";w.createContext(!1);var Gm=w.createContext({isTransitioning:!1});Gm.displayName="ViewTransition";var wv=w.createContext(new Map);wv.displayName="Fetchers";var bv=w.createContext(null);bv.displayName="Await";var bt=w.createContext(null);bt.displayName="Navigation";var ai=w.createContext(null);ai.displayName="Location";var $t=w.createContext({outlet:null,matches:[],isDataRoute:!1});$t.displayName="Route";var ru=w.createContext(null);ru.displayName="RouteError";function jv(e,{relative:t}={}){he(Xn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(bt),{hash:s,pathname:i,search:o}=oi(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:sr([r,i])),n.createHref({pathname:l,search:o,hash:s})}function Xn(){return w.useContext(ai)!=null}function At(){return he(Xn(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(ai).location}var Jm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ym(e){w.useContext(bt).static||w.useLayoutEffect(e)}function Yt(){let{isDataRoute:e}=w.useContext($t);return e?Av():kv()}function kv(){he(Xn(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(Qn),{basename:t,navigator:r}=w.useContext(bt),{matches:n}=w.useContext($t),{pathname:s}=At(),i=JSON.stringify(eu(n)),o=w.useRef(!1);return Ym(()=>{o.current=!0}),w.useCallback((c,u={})=>{if(wt(o.current,Jm),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=tu(c,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:sr([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,s,e])}w.createContext(null);function Qm(){let{matches:e}=w.useContext($t),t=e[e.length-1];return t?t.params:{}}function oi(e,{relative:t}={}){let{matches:r}=w.useContext($t),{pathname:n}=At(),s=JSON.stringify(eu(r));return w.useMemo(()=>tu(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function _v(e,t){return Xm(e,t)}function Xm(e,t,r,n,s){var x;he(Xn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=w.useContext(bt),{matches:o}=w.useContext($t),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let p=h&&h.path||"";Zm(u,!h||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let f=At(),m;if(t){let p=typeof t=="string"?Yn(t):t;he(d==="/"||((x=p.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${p.pathname}" was given in the \`location\` prop.`),m=p}else m=f;let v=m.pathname||"/",y=v;if(d!=="/"){let p=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(p.length).join("/")}let b=Hm(e,{pathname:y});wt(h||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),wt(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=Pv(b&&b.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:sr([d,i.encodeLocation?i.encodeLocation(p.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?d:sr([d,i.encodeLocation?i.encodeLocation(p.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathnameBase])})),o,r,n,s);return t&&g?w.createElement(ai.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function Nv(){let e=$v(),t=xv(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,o)}var Sv=w.createElement(Nv,null),Cv=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?w.createElement($t.Provider,{value:this.props.routeContext},w.createElement(ru.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ev({routeContext:e,match:t,children:r}){let n=w.useContext(Qn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement($t.Provider,{value:e},r)}function Pv(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);he(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,v=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=r&&n?(d,h)=>{var f,m;n(d,{location:r.location,params:((m=(f=r.matches)==null?void 0:f[0])==null?void 0:m.params)??{},unstable_pattern:vv(r.matches),errorInfo:h})}:void 0;return i.reduceRight((d,h,f)=>{let m,v=!1,y=null,b=null;r&&(m=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||Sv,l&&(c<0&&f===0?(Zm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):c===f&&(v=!0,b=h.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,f+1)),x=()=>{let p;return m?p=y:v?p=b:h.route.Component?p=w.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=d,w.createElement(Ev,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:p})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(Cv,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:u}):x()},null)}function nu(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tv(e){let t=w.useContext(Qn);return he(t,nu(e)),t}function Lv(e){let t=w.useContext(eo);return he(t,nu(e)),t}function Ov(e){let t=w.useContext($t);return he(t,nu(e)),t}function su(e){let t=Ov(e),r=t.matches[t.matches.length-1];return he(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Rv(){return su("useRouteId")}function $v(){var n;let e=w.useContext(ru),t=Lv("useRouteError"),r=su("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Av(){let{router:e}=Tv("useNavigate"),t=su("useNavigate"),r=w.useRef(!1);return Ym(()=>{r.current=!0}),w.useCallback(async(s,i={})=>{wt(r.current,Jm),r.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Rd={};function Zm(e,t,r){!t&&!Rd[e]&&(Rd[e]=!0,wt(!1,r))}w.memo(Iv);function Iv({routes:e,future:t,state:r,unstable_onError:n}){return Xm(e,void 0,r,n,t)}function ep({to:e,replace:t,state:r,relative:n}){he(Xn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(bt);wt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext($t),{pathname:o}=At(),l=Yt(),c=tu(e,eu(i),o,n==="path"),u=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function je(e){he(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dv({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){he(!Xn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:l,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[l,s,i,o]);typeof r=="string"&&(r=Yn(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:m="default"}=r,v=w.useMemo(()=>{let y=cr(u,l);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:m},navigationType:n}},[l,u,d,h,f,m,n]);return wt(v!=null,`<Router basename="${l}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:w.createElement(bt.Provider,{value:c},w.createElement(ai.Provider,{children:t,value:v}))}function Bv({children:e,location:t}){return _v(Vl(e),t)}function Vl(e,t=[]){let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Vl(n.props.children,i));return}he(n.type===je,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),he(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Vl(n.props.children,i)),r.push(o)}),r}var sa="get",ia="application/x-www-form-urlencoded";function to(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Mv(e){return to(e)&&e.tagName.toLowerCase()==="button"}function Uv(e){return to(e)&&e.tagName.toLowerCase()==="form"}function Wv(e){return to(e)&&e.tagName.toLowerCase()==="input"}function Fv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zv(e,t){return e.button===0&&(!t||t==="_self")&&!Fv(e)}var Ti=null;function Hv(){if(Ti===null)try{new FormData(document.createElement("form"),0),Ti=!1}catch{Ti=!0}return Ti}var Vv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ao(e){return e!=null&&!Vv.has(e)?(wt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ia}"`),null):e}function qv(e,t){let r,n,s,i,o;if(Uv(e)){let l=e.getAttribute("action");n=l?cr(l,t):null,r=e.getAttribute("method")||sa,s=Ao(e.getAttribute("enctype"))||ia,i=new FormData(e)}else if(Mv(e)||Wv(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?cr(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||sa,s=Ao(e.getAttribute("formenctype"))||Ao(l.getAttribute("enctype"))||ia,i=new FormData(l,e),!Hv()){let{name:u,type:d,value:h}=e;if(d==="image"){let f=u?`${u}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else u&&i.append(u,h)}}else{if(to(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=sa,n=null,s=ia,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iu(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kv(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&cr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Gv(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jv(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Yv(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await Gv(i,r);return o.links?o.links():[]}return[]}));return ey(n.flat(1).filter(Jv).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function $d(e,t,r,n,s,i){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var h;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Qv(e,t,{includeHydrateFallback:r}={}){return Xv(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Xv(e){return[...new Set(e)]}function Zv(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function ey(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(Zv(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function tp(){let e=w.useContext(Qn);return iu(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ty(){let e=w.useContext(eo);return iu(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var au=w.createContext(void 0);au.displayName="FrameworkContext";function rp(){let e=w.useContext(au);return iu(e,"You must render this element inside a <HydratedRouter> element"),e}function ry(e,t){let r=w.useContext(au),[n,s]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=w.useRef(null);w.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let y=g=>{g.forEach(x=>{o(x.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[e]),w.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let m=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:ms(l,m),onBlur:ms(c,v),onMouseEnter:ms(u,m),onMouseLeave:ms(d,v),onTouchStart:ms(h,m)}]:[!1,f,{}]}function ms(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function ny({page:e,...t}){let{router:r}=tp(),n=w.useMemo(()=>Hm(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(iy,{page:e,matches:n,...t}):null}function sy(e){let{manifest:t,routeModules:r}=rp(),[n,s]=w.useState([]);return w.useEffect(()=>{let i=!1;return Yv(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function iy({page:e,matches:t,...r}){let n=At(),{manifest:s,routeModules:i}=rp(),{basename:o}=tp(),{loaderData:l,matches:c}=ty(),u=w.useMemo(()=>$d(e,t,c,s,n,"data"),[e,t,c,s,n]),d=w.useMemo(()=>$d(e,t,c,s,n,"assets"),[e,t,c,s,n]),h=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,y=!1;if(t.forEach(g=>{var p;let x=s.routes[g.route.id];!x||!x.hasLoader||(!u.some(j=>j.route.id===g.route.id)&&g.route.id in l&&((p=i[g.route.id])!=null&&p.shouldRevalidate)||x.hasClientLoader?y=!0:v.add(g.route.id))}),v.size===0)return[];let b=Kv(e,o,"data");return y&&v.size>0&&b.searchParams.set("_routes",t.filter(g=>v.has(g.route.id)).map(g=>g.route.id).join(",")),[b.pathname+b.search]},[o,l,n,s,u,t,e,i]),f=w.useMemo(()=>Qv(d,s),[d,s]),m=sy(d);return w.createElement(w.Fragment,null,h.map(v=>w.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),f.map(v=>w.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),m.map(({key:v,link:y})=>w.createElement("link",{key:v,nonce:r.nonce,...y})))}function ay(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var np=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{np&&(window.__reactRouterVersion="7.10.0")}catch{}function oy({basename:e,children:t,unstable_useTransitions:r,window:n}){let s=w.useRef();s.current==null&&(s.current=Kx({window:n,v5Compat:!0}));let i=s.current,[o,l]=w.useState({action:i.action,location:i.location}),c=w.useCallback(u=>{r===!1?l(u):w.startTransition(()=>l(u))},[r]);return w.useLayoutEffect(()=>i.listen(c),[i,c]),w.createElement(Dv,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:r===!0})}var sp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,...f},m){let{basename:v,unstable_useTransitions:y}=w.useContext(bt),b=typeof u=="string"&&sp.test(u),g,x=!1;if(typeof u=="string"&&b&&(g=u,np))try{let L=new URL(window.location.href),B=u.startsWith("//")?new URL(L.protocol+u):new URL(u),z=cr(B.pathname,v);B.origin===L.origin&&z!=null?u=z+B.search+B.hash:x=!0}catch{wt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let p=jv(u,{relative:s}),[j,_,N]=ry(n,f),S=dy(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h,unstable_useTransitions:y});function C(L){t&&t(L),L.defaultPrevented||S(L)}let A=w.createElement("a",{...f,...N,href:g||p,onClick:x||i?t:C,ref:ay(m,_),target:c,"data-discover":!b&&r==="render"?"true":void 0});return j&&!b?w.createElement(w.Fragment,null,A,w.createElement(ny,{page:p})):A});De.displayName="Link";var ly=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let h=oi(o,{relative:u.relative}),f=At(),m=w.useContext(eo),{navigator:v,basename:y}=w.useContext(bt),b=m!=null&&gy(h)&&l===!0,g=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,x=f.pathname,p=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(x=x.toLowerCase(),p=p?p.toLowerCase():null,g=g.toLowerCase()),p&&y&&(p=cr(p,y)||p);const j=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let _=x===g||!s&&x.startsWith(g)&&x.charAt(j)==="/",N=p!=null&&(p===g||!s&&p.startsWith(g)&&p.charAt(g.length)==="/"),S={isActive:_,isPending:N,isTransitioning:b},C=_?t:void 0,A;typeof n=="function"?A=n(S):A=[n,_?"active":null,N?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(S):i;return w.createElement(De,{...u,"aria-current":C,className:A,ref:d,style:L,to:o,viewTransition:l},typeof c=="function"?c(S):c)});ly.displayName="NavLink";var cy=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=sa,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...f},m)=>{let{unstable_useTransitions:v}=w.useContext(bt),y=my(),b=py(l,{relative:u}),g=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&sp.test(l),p=j=>{if(c&&c(j),j.defaultPrevented)return;j.preventDefault();let _=j.nativeEvent.submitter,N=(_==null?void 0:_.getAttribute("formmethod"))||o,S=()=>y(_||j.currentTarget,{fetcherKey:t,method:N,navigate:r,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:h});v&&r!==!1?w.startTransition(()=>S()):S()};return w.createElement("form",{ref:m,method:g,action:b,onSubmit:n?c:p,...f,"data-discover":!x&&e==="render"?"true":void 0})});cy.displayName="Form";function uy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ip(e){let t=w.useContext(Qn);return he(t,uy(e)),t}function dy(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:l}={}){let c=Yt(),u=At(),d=oi(e,{relative:i});return w.useCallback(h=>{if(zv(h,t)){h.preventDefault();let f=r!==void 0?r:Gs(u)===Gs(d),m=()=>c(e,{replace:f,state:n,preventScrollReset:s,relative:i,viewTransition:o});l?w.startTransition(()=>m()):m()}},[u,c,d,r,n,t,e,s,i,o,l])}var hy=0,fy=()=>`__${String(++hy)}__`;function my(){let{router:e}=ip("useSubmit"),{basename:t}=w.useContext(bt),r=Rv(),n=e.fetch,s=e.navigate;return w.useCallback(async(i,o={})=>{let{action:l,method:c,encType:u,formData:d,body:h}=qv(i,t);if(o.navigate===!1){let f=o.fetcherKey||fy();await n(f,r,o.action||l,{preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await s(o.action||l,{preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,s,t,r])}function py(e,{relative:t}={}){let{basename:r}=w.useContext(bt),n=w.useContext($t);he(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...oi(e||".",{relative:t})},o=At();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:sr([r,i.pathname])),Gs(i)}function gy(e,{relative:t}={}){let r=w.useContext(Gm);he(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ip("useViewTransitionState"),s=oi(e,{relative:t});if(!r.isTransitioning)return!1;let i=cr(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=cr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ta(s.pathname,o)!=null||Ta(s.pathname,i)!=null}var ql=function(e,t){return ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},ql(e,t)};function ap(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ql(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var La=function(){return La=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},La.apply(this,arguments)};function Zn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function op(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function lp(e,t){return function(r,n){t(r,n,e)}}function cp(e,t,r,n,s,i){function o(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,f=!1,m=r.length-1;m>=0;m--){var v={};for(var y in n)v[y]=y==="access"?{}:n[y];for(var y in n.access)v.access[y]=n.access[y];v.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(g||null))};var b=(0,r[m])(l==="accessor"?{get:d.get,set:d.set}:d[c],v);if(l==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=o(b.get))&&(d.get=h),(h=o(b.set))&&(d.set=h),(h=o(b.init))&&s.unshift(h)}else(h=o(b))&&(l==="field"?s.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),f=!0}function up(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function dp(e){return typeof e=="symbol"?e:"".concat(e)}function hp(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function fp(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function $(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function mp(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ro=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function pp(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ro(t,e,r)}function Oa(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ou(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function gp(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ou(arguments[t]));return e}function xp(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)n[s]=i[o];return n}function vp(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function qn(e){return this instanceof qn?(this.v=e,this):new qn(e)}function yp(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(m){return function(v){return Promise.resolve(v).then(m,h)}}function l(m,v){n[m]&&(s[m]=function(y){return new Promise(function(b,g){i.push([m,y,b,g])>1||c(m,y)})},v&&(s[m]=v(s[m])))}function c(m,v){try{u(n[m](v))}catch(y){f(i[0][3],y)}}function u(m){m.value instanceof qn?Promise.resolve(m.value.v).then(d,h):f(i[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function f(m,v){m(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function wp(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:qn(e[s](o)),done:!1}:i?i(o):o}:i}}function bp(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Oa=="function"?Oa(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),s(l,c,o.done,o.value)})}}function s(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}function jp(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var xy=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Kl=function(e){return Kl=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Kl(e)};function kp(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Kl(e),n=0;n<r.length;n++)r[n]!=="default"&&ro(t,e,r[n]);return xy(t,e),t}function _p(e){return e&&e.__esModule?e:{default:e}}function Np(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Sp(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function Cp(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Ep(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var vy=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Pp(e){function t(i){e.error=e.hasError?new vy(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function Tp(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?t?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):e}const yy={__extends:ap,__assign:La,__rest:Zn,__decorate:op,__param:lp,__esDecorate:cp,__runInitializers:up,__propKey:dp,__setFunctionName:hp,__metadata:fp,__awaiter:$,__generator:mp,__createBinding:ro,__exportStar:pp,__values:Oa,__read:ou,__spread:gp,__spreadArrays:xp,__spreadArray:vp,__await:qn,__asyncGenerator:yp,__asyncDelegator:wp,__asyncValues:bp,__makeTemplateObject:jp,__importStar:kp,__importDefault:_p,__classPrivateFieldGet:Np,__classPrivateFieldSet:Sp,__classPrivateFieldIn:Cp,__addDisposableResource:Ep,__disposeResources:Pp,__rewriteRelativeImportExtension:Tp},wy=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ep,get __assign(){return La},__asyncDelegator:wp,__asyncGenerator:yp,__asyncValues:bp,__await:qn,__awaiter:$,__classPrivateFieldGet:Np,__classPrivateFieldIn:Cp,__classPrivateFieldSet:Sp,__createBinding:ro,__decorate:op,__disposeResources:Pp,__esDecorate:cp,__exportStar:pp,__extends:ap,__generator:mp,__importDefault:_p,__importStar:kp,__makeTemplateObject:jp,__metadata:fp,__param:lp,__propKey:dp,__read:ou,__rest:Zn,__rewriteRelativeImportExtension:Tp,__runInitializers:up,__setFunctionName:hp,__spread:gp,__spreadArray:vp,__spreadArrays:xp,__values:Oa,default:yy},Symbol.toStringTag,{value:"Module"})),by=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class lu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class jy extends lu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ad extends lu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Id extends lu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Gl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Gl||(Gl={}));class ky{constructor(t,{headers:r={},customFetch:n,region:s=Gl.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=by(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const v=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,v.searchParams.set("forceFunctionRegion",m));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let b=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const g=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:y,signal:b}).catch(_=>{throw new jy(_)}),x=g.headers.get("x-relay-error");if(x&&x==="true")throw new Ad(g);if(!g.ok)throw new Id(g);let p=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return p==="application/json"?j=yield g.json():p==="application/octet-stream"||p==="application/pdf"?j=yield g.blob():p==="text/event-stream"?j=g:p==="multipart/form-data"?j=yield g.formData():j=yield g.text(),{data:j,error:null,response:g}}catch(l){return{data:null,error:l,response:l instanceof Id||l instanceof Ad?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Ke={};const es=yg(wy);var Li={},Oi={},Ri={},$i={},Ai={},Ii={},Dd;function Lp(){if(Dd)return Ii;Dd=1,Object.defineProperty(Ii,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ii.default=e,Ii}var Bd;function Op(){if(Bd)return Ai;Bd=1,Object.defineProperty(Ai,"__esModule",{value:!0});const t=es.__importDefault(Lp());class r{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h,f;let m=null,v=null,y=null,b=c.status,g=c.statusText;if(c.ok){if(this.method!=="HEAD"){const _=await c.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=_:v=JSON.parse(_))}const p=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),j=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");p&&j&&j.length>1&&(y=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(m={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,b=406,g="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const p=await c.text();try{m=JSON.parse(p),Array.isArray(m)&&c.status===404&&(v=[],m=null,b=200,g="OK")}catch{c.status===404&&p===""?(b=204,g="No Content"):m={message:p}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,b=200,g="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:v,count:y,status:b,statusText:g}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h,f,m,v;let y="";const b=c==null?void 0:c.cause;if(b){const g=(u=b==null?void 0:b.message)!==null&&u!==void 0?u:"",x=(d=b==null?void 0:b.code)!==null&&d!==void 0?d:"";y=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(f=b==null?void 0:b.name)!==null&&f!==void 0?f:"Error"}: ${g}`,x&&(y+=` (${x})`),b!=null&&b.stack&&(y+=`
${b.stack}`)}else y=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,i)}returns(){return this}overrideTypes(){return this}}return Ai.default=r,Ai}var Md;function Rp(){if(Md)return $i;Md=1,Object.defineProperty($i,"__esModule",{value:!0});const t=es.__importDefault(Op());class r extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return $i.default=r,$i}var Ud;function cu(){if(Ud)return Ri;Ud=1,Object.defineProperty(Ri,"__esModule",{value:!0});const t=es.__importDefault(Rp()),r=new RegExp("[,()]");class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return Ri.default=n,Ri}var Wd;function $p(){if(Wd)return Oi;Wd=1,Object.defineProperty(Oi,"__esModule",{value:!0});const t=es.__importDefault(cu());class r{constructor(s,{headers:i={},schema:o,fetch:l}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(s,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Oi.default=r,Oi}var Fd;function _y(){if(Fd)return Li;Fd=1,Object.defineProperty(Li,"__esModule",{value:!0});const e=es,t=e.__importDefault($p()),r=e.__importDefault(cu());class n{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let m;l||c?(h=l?"HEAD":"GET",Object.entries(o).filter(([y,b])=>b!==void 0).map(([y,b])=>[y,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([y,b])=>{f.searchParams.append(y,b)})):(h="POST",m=o);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:h,url:f,headers:v,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Li.default=n,Li}Object.defineProperty(Ke,"__esModule",{value:!0});var Ap=Ke.PostgrestError=Vp=Ke.PostgrestBuilder=zp=Ke.PostgrestTransformBuilder=Wp=Ke.PostgrestFilterBuilder=Mp=Ke.PostgrestQueryBuilder=Dp=Ke.PostgrestClient=void 0;const ts=es,Ip=ts.__importDefault(_y());var Dp=Ke.PostgrestClient=Ip.default;const Bp=ts.__importDefault($p());var Mp=Ke.PostgrestQueryBuilder=Bp.default;const Up=ts.__importDefault(cu());var Wp=Ke.PostgrestFilterBuilder=Up.default;const Fp=ts.__importDefault(Rp());var zp=Ke.PostgrestTransformBuilder=Fp.default;const Hp=ts.__importDefault(Op());var Vp=Ke.PostgrestBuilder=Hp.default;const qp=ts.__importDefault(Lp());Ap=Ke.PostgrestError=qp.default;var Kp=Ke.default={PostgrestClient:Ip.default,PostgrestQueryBuilder:Bp.default,PostgrestFilterBuilder:Up.default,PostgrestTransformBuilder:Fp.default,PostgrestBuilder:Hp.default,PostgrestError:qp.default};const Ny=xg({__proto__:null,get PostgrestBuilder(){return Vp},get PostgrestClient(){return Dp},get PostgrestError(){return Ap},get PostgrestFilterBuilder(){return Wp},get PostgrestQueryBuilder(){return Mp},get PostgrestTransformBuilder(){return zp},default:Kp},[Ke]),{PostgrestClient:Sy,PostgrestQueryBuilder:pk,PostgrestFilterBuilder:gk,PostgrestTransformBuilder:xk,PostgrestBuilder:vk,PostgrestError:yk}=Kp||Ny;class Cy{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ey="2.86.0",Py=`realtime-js/${Ey}`,Gp="1.0.0",Ty="2.0.0",zd=Gp,Jl=1e4,Ly=1e3,Oy=100;var zr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(zr||(zr={}));var Ce;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ce||(Ce={}));var Pt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Pt||(Pt={}));var Yl;(function(e){e.websocket="websocket"})(Yl||(Yl={}));var Hr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Hr||(Hr={}));class Ry{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(m),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,c.length),v.setUint8(y++,l.length),v.setUint8(y++,o.length),v.setUint8(y++,u.length),v.setUint8(y++,h.length),v.setUint8(y++,r),Array.from(c,g=>v.setUint8(y++,g.charCodeAt(0))),Array.from(l,g=>v.setUint8(y++,g.charCodeAt(0))),Array.from(o,g=>v.setUint8(y++,g.charCodeAt(0))),Array.from(u,g=>v.setUint8(y++,g.charCodeAt(0))),Array.from(h,g=>v.setUint8(y++,g.charCodeAt(0)));var b=new Uint8Array(m.byteLength+n.byteLength);return b.set(new Uint8Array(m),0),b.set(new Uint8Array(n),m.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,v={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Jp{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(se||(se={}));const Hd=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=$y(o,e,t,s),i),{}):{}},$y=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Yp(i,o):Ql(o)},Yp=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return By(t,r)}switch(e){case se.bool:return Ay(t);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return Iy(t);case se.json:case se.jsonb:return Dy(t);case se.timestamp:return My(t);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return Ql(t);default:return Ql(t)}},Ql=e=>e,Ay=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Iy=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Dy=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},By=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Yp(t,l))}return e},My=e=>typeof e=="string"?e.replace(" ","T"):e,Qp=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Io{constructor(t,r,n={},s=Jl){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Vd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Vd||(Vd={}));class Ps{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ps.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Ps.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ps.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),v=d.filter(b=>m.indexOf(b.presence_ref)<0),y=h.filter(b=>f.indexOf(b.presence_ref)<0);v.length>0&&(l[u]=v),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qd;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(qd||(qd={}));var Ts;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ts||(Ts={}));var Zt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zt||(Zt={}));class uu{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Io(this,Pt.join,this.params,this.timeout),this.rejoinTimer=new Jp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Ps(this),this.broadcastEndpointURL=Qp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ce.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ts.PRESENCE]&&this.bindings[Ts.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Zt.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Zt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){t==null||t(Zt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,g=[];for(let x=0;x<b;x++){const p=y[x],{filter:{event:j,schema:_,table:N,filter:S}}=p,C=m&&m[x];if(C&&C.event===j&&C.schema===_&&C.table===N&&C.filter===S)g.push(Object.assign(Object.assign({},p),{id:C.id}));else{this.unsubscribe(),this.state=Ce.errored,t==null||t(Zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Zt.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ce.errored,t==null||t(Zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ce.joined&&t===Ts.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ce.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Io(this,Pt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ce.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Io(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Oy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Pt;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,y,b;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(y=m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,y,b,g,x,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,_=(v=m.filter)===null||v===void 0?void 0:v.event;return j&&((y=r.ids)===null||y===void 0?void 0:y.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(x=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return j==="*"||j===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:b,commit_timestamp:g,type:x,errors:p}=v;f=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:g,eventType:x,new:{},old:{},errors:p}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&uu.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Pt.close,{},t)}_onError(t){this._on(Pt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Hd(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Hd(t.columns,t.old_record)),r}}const Do=()=>{},Di={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Uy=[1e3,2e3,5e3,1e4],Wy=1e4,Fy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zy{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jl,this.transport=null,this.heartbeatIntervalMs=Di.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Do,this.ref=0,this.reconnectTimer=null,this.vsn=zd,this.logger=Do,this.conn=null,this.sendBuffer=[],this.serializer=new Ry,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Yl.websocket}`,this.httpEndpoint=Qp(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Cy.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case zr.connecting:return Hr.Connecting;case zr.open:return Hr.Open;case zr.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new uu(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ly,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Di.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===zr.open||this.conn.readyState===zr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Pt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Fy],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Py};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Pt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Jp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Di.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d,h,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Jl,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Di.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Do,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:zd,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>Uy[v-1]||Wy,this.vsn){case Gp:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,y)=>y(JSON.stringify(v)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(v,y)=>y(JSON.parse(v));break;case Ty:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class no extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Hy extends no{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xl extends no{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const du=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Vy=()=>Response,Zl=e=>{if(Array.isArray(e))return e.map(r=>Zl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Zl(n)}),t},qy=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ky=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),Bo=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Gy=(e,t,r)=>$(void 0,void 0,void 0,function*(){const n=yield Vy();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new Hy(Bo(s),i,o))}).catch(s=>{t(new Xl(Bo(s),s))}):t(new Xl(Bo(e),e))}),Jy=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(qy(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function li(e,t,r,n,s,i){return $(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,Jy(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Gy(c,l,n))})})}function Js(e,t,r,n){return $(this,void 0,void 0,function*(){return li(e,"GET",t,r,n)})}function Ct(e,t,r,n,s){return $(this,void 0,void 0,function*(){return li(e,"POST",t,n,s,r)})}function ec(e,t,r,n,s){return $(this,void 0,void 0,function*(){return li(e,"PUT",t,n,s,r)})}function Yy(e,t,r,n){return $(this,void 0,void 0,function*(){return li(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function hu(e,t,r,n,s){return $(this,void 0,void 0,function*(){return li(e,"DELETE",t,n,s,r)})}class Qy{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return $(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}}var Xp;class Xy{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[Xp]="BlobDownloadBuilder",this.promise=null}asStream(){return new Qy(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return $(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}}Xp=Symbol.toStringTag;const Zy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ew{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=du(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return $(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Kd),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?ec:Ct)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pe(i))return{data:null,error:i};throw i}})}upload(t,r,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return $(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Kd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield ec(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(pe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return $(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Ct(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new no("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}update(t,r,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return $(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}copy(t,r,n){return $(this,void 0,void 0,function*(){try{return{data:{path:(yield Ct(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return $(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ct(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return $(this,void 0,void 0,function*(){try{const s=yield Ct(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Js(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new Xy(c,this.shouldThrowOnError)}info(t){return $(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Js(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Zl(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}exists(t){return $(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Yy(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n)&&n instanceof Xl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return $(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}list(t,r,n){return $(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Zy),r),{prefix:t||""});return{data:yield Ct(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}listV2(t,r){return $(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ct(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Zp="2.86.0",eg={"X-Client-Info":`storage-js/${Zp}`};class tw{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},eg),r),this.fetch=du(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return $(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Js(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}getBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}createBucket(t){return $(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ct(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return $(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Ys=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function rw(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function nw(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function sw(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=rw(e.baseUrl,n,s),c=await nw(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?f:void 0,v=m==null?void 0:m.error;throw new Ys((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function Bi(e){return e.join("")}var iw=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Bi(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bi(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bi(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bi(e.namespace)}`}),!0}catch(t){if(t instanceof Ys&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ys&&r.status===409)return;throw r}}};function dn(e){return e.join("")}var aw=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dn(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dn(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dn(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dn(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dn(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dn(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Ys&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ys&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},ow=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=sw({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new iw(this.client,t),this.tableOps=new aw(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class lw{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},eg),r),this.fetch=du(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}listBuckets(t){return $(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Js(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}from(t){if(!Ky(t))throw new no("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new ow({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>$(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const fu={"X-Client-Info":`storage-js/${Zp}`,"Content-Type":"application/json"};class tg extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ot(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Mo extends tg{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cw extends tg{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Gd;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Gd||(Gd={}));const mu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Jd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dw=(e,t,r)=>$(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new Mo(Jd(o),s,l))}).catch(()=>{const o=s+"",l=i.statusText||`HTTP ${s} error`;t(new Mo(l,s,o))});else{const o=s+"",l=i.statusText||`HTTP ${s} error`;t(new Mo(l,s,o))}}else t(new cw(Jd(e),e))}),hw=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(uw(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function fw(e,t,r,n,s,i){return $(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,hw(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>dw(c,l,n))})})}function lt(e,t,r,n,s){return $(this,void 0,void 0,function*(){return fw(e,"POST",t,n,s,r)})}class mw{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),r),this.fetch=mu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return $(this,void 0,void 0,function*(){try{return{data:(yield lt(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}getIndex(t,r){return $(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}listIndexes(t){return $(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return $(this,void 0,void 0,function*(){try{return{data:(yield lt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}}class pw{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),r),this.fetch=mu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return $(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield lt(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}getVectors(t){return $(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}listVectors(t){return $(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield lt(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}queryVectors(t){return $(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}deleteVectors(t){return $(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield lt(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}}class gw{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),r),this.fetch=mu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return $(this,void 0,void 0,function*(){try{return{data:(yield lt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}getBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}listBuckets(){return $(this,arguments,void 0,function*(t={}){try{return{data:yield lt(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $(this,void 0,void 0,function*(){try{return{data:(yield lt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}})}}class xw extends gw{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new vw(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return $(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return $(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return $(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return $(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class vw extends mw{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return $(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return $(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return $(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return $(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new yw(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class yw extends pw{constructor(t,r,n,s,i){super(t,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return $(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return $(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return $(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return $(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return $(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ww extends tw{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new ew(this.url,this.headers,t,this.fetch)}get vectors(){return new xw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lw(this.url+"/iceberg",this.headers,this.fetch)}}const bw="2.86.0";let ys="";typeof Deno<"u"?ys="deno":typeof document<"u"?ys="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ys="react-native":ys="node";const jw={"X-Client-Info":`supabase-js-${ys}/${bw}`},kw={headers:jw},_w={schema:"public"},Nw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Sw={},Cw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Ew=()=>Headers,Pw=(e,t,r)=>{const n=Cw(r),s=Ew();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))}};function Tw(e){return e.endsWith("/")?e:e+"/"}function Lw(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Ow(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Tw(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const rg="2.86.0",xn=30*1e3,tc=3,Uo=tc*xn,Rw="http://localhost:9999",$w="supabase.auth.token",Aw={"X-Client-Info":`gotrue-js/${rg}`},rc="X-Supabase-Api-Version",ng={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Iw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dw=10*60*1e3;class Qs extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function U(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Bw extends Qs{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Mw(e){return U(e)&&e.name==="AuthApiError"}class Vr extends Qs{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ar extends Qs{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class it extends Ar{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Uw(e){return U(e)&&e.name==="AuthSessionMissingError"}class hn extends Ar{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mi extends Ar{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ui extends Ar{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ww(e){return U(e)&&e.name==="AuthImplicitGrantRedirectError"}class Yd extends Ar{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nc extends Ar{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Wo(e){return U(e)&&e.name==="AuthRetryableFetchError"}class Qd extends Ar{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sc extends Ar{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xd=` 	
\r=`.split(""),Fw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xd.length;t+=1)e[Xd[t].charCodeAt(0)]=-2;for(let t=0;t<Ra.length;t+=1)e[Ra[t].charCodeAt(0)]=t;return e})();function Zd(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ra[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ra[n]),t.queuedBits-=6}}function sg(e,t,r){const n=Fw[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function eh(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Vw(o,n,r)};for(let o=0;o<e.length;o+=1)sg(e.charCodeAt(o),s,i);return t.join("")}function zw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Hw(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}zw(n,t)}}function Vw(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Bn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)sg(e.charCodeAt(s),r,n);return new Uint8Array(t)}function qw(e){const t=[];return Hw(e,r=>t.push(r)),new Uint8Array(t)}function Jr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Zd(s,r,n)),Zd(null,r,n),t.join("")}function Kw(e){return Math.round(Date.now()/1e3)+e}function Gw(){return Symbol("auth-callback")}const Ae=()=>typeof window<"u"&&typeof document<"u",Br={tested:!1,writable:!1},ig=()=>{if(!Ae())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Br.tested)return Br.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Br.tested=!0,Br.writable=!0}catch{Br.tested=!0,Br.writable=!1}return Br.writable};function Jw(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const ag=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",vn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Mr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},mr=async(e,t)=>{await e.removeItem(t)};class so{constructor(){this.promise=new so.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}so.promiseConstructor=Promise;function Fo(e){const t=e.split(".");if(t.length!==3)throw new sc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Iw.test(t[n]))throw new sc("JWT not in base64url format");return{header:JSON.parse(eh(t[0])),payload:JSON.parse(eh(t[1])),signature:Bn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Qw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Xw(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Zw(e){return("0"+e.toString(16)).substr(-2)}function eb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Zw).join("")}async function tb(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function rb(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await tb(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fn(e,t,r=!1){const n=eb();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await vn(e,`${t}-code-verifier`,s);const i=await rb(n);return[i,n===i?"plain":"s256"]}const nb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sb(e){const t=e.headers.get(rc);if(!t||!t.match(nb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ib(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function ab(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ob=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mn(e){if(!ob.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zo(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function lb(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function th(e){return JSON.parse(JSON.stringify(e))}const Fr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cb=[502,503,504];async function rh(e){var t;if(!Yw(e))throw new nc(Fr(e),0);if(cb.includes(e.status))throw new nc(Fr(e),e.status);let r;try{r=await e.json()}catch(i){throw new Vr(Fr(i),i)}let n;const s=sb(e);if(s&&s.getTime()>=ng["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Qd(Fr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new it}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Qd(Fr(r),e.status,r.weak_password.reasons);throw new Bw(Fr(r),e.status||500,n)}const ub=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function H(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[rc]||(i[rc]=ng["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await db(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function db(e,t,r,n,s,i){const o=ub(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new nc(Fr(c),0)}if(l.ok||await rh(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await rh(c)}}function Nt(e){var t;let r=null;mb(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Kw(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function nh(e){const t=Nt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function yr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function hb(e){return{data:e,error:null}}function fb(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Zn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function sh(e){return e}function mb(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ho=["global","local","others"];class pb{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=ag(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ho[0]){if(Ho.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ho.join(", ")}`);try{return await H(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await H(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:yr})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Zn(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await H(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:fb,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(U(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await H(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:yr})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await H(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:sh});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(U(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){mn(t);try{return await H(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:yr})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){mn(t);try{return await H(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:yr})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){mn(t);try{return await H(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:yr})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){mn(t.userId);try{const{data:r,error:n}=await H(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(U(r))return{data:null,error:r};throw r}}async _deleteFactor(t){mn(t.userId),mn(t.id);try{return{data:await H(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await H(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:sh});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(U(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await H(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(U(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await H(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(U(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await H(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await H(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await H(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(U(r))return{data:null,error:r};throw r}}}function ih(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const pn={debug:!!(globalThis&&ig()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class og extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class gb extends og{}async function xb(e,t,r){pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),pn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new gb(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(pn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function vb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function lg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function yb(e){return parseInt(e,16)}function wb(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function bb(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=lg(e.address),v=d?`${d}://${n}`:n,y=e.statement?`${e.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${m}

${y}`;let g=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),l&&(g+=`
Not Before: ${l.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);x+=`
- ${p}`}g+=x}return`${b}
${g}`}class _e extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class $a extends _e{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function jb({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _e({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new _e({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new _e({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _e({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new _e({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new _e({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new _e({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new _e({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(cg(o)){if(i.rp.id!==o)return new _e({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new _e({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function kb({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _e({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new _e({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(cg(n)){if(r.rpId!==n)return new _e({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class _b{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Nb=new _b;function Sb(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Zn(e,["challenge","user","excludeCredentials"]),i=Bn(t).buffer,o=Object.assign(Object.assign({},r),{id:Bn(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Bn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Cb(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Zn(e,["challenge","allowCredentials"]),s=Bn(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Bn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Eb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Jr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Jr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Pb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Jr(new Uint8Array(s.authenticatorData)),clientDataJSON:Jr(new Uint8Array(s.clientDataJSON)),signature:Jr(new Uint8Array(s.signature)),userHandle:s.userHandle?Jr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function cg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ah(){var e,t;return!!(Ae()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Tb(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $a("Browser returned unexpected credential type",t)}:{data:null,error:new $a("Empty credential response",t)}}catch(t){return{data:null,error:jb({error:t,options:e})}}}async function Lb(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $a("Browser returned unexpected credential type",t)}:{data:null,error:new $a("Empty credential response",t)}}catch(t){return{data:null,error:kb({error:t,options:e})}}}const Ob={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Rb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Aa(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Aa(l,o):n[i]=Aa(o)}else n[i]=o}return n}function $b(e,t){return Aa(Ob,e,t||{})}function Ab(e,t){return Aa(Rb,e,t||{})}class Ib{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??Nb.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=$b(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await Tb({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=Ab(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Lb(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return U(o)?{data:null,error:o}:{data:null,error:new Vr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Qs("rpId is required for WebAuthn authentication")};try{if(!ah())return{data:null,error:new Vr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return U(o)?{data:null,error:o}:{data:null,error:new Vr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Qs("rpId is required for WebAuthn registration")};try{if(!ah())return{data:null,error:new Vr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return U(o)?{data:null,error:o}:{data:null,error:new Vr("Unexpected error in register",o)}}}}vb();const Db={url:Rw,storageKey:$w,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Aw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function oh(e,t,r){return await r()}const gn={};class Xs{get jwks(){var t,r;return(r=(t=gn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=gn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gn[this.storageKey]=Object.assign(Object.assign({},gn[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Db),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Xs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Xs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ae()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new pb({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ag(i.fetch),this.lock=i.lock||oh,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Ae()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=xb:this.lock=oh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ib(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ig()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ih(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ih(this.memoryStorage)),Ae()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${rg}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Ae()&&(r=Jw(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ae()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ww(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return U(r)?this._returnResult({error:r}):this._returnResult({error:new Vr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Nt}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(U(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await fn(this.storage,this.storageKey)),i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:Nt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Nt})}else throw new Mi("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(U(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nh})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nh})}else throw new Mi("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new hn;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(U(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,f;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:y,wallet:b,statement:g,options:x}=t;let p;if(Ae())if(typeof b=="object")p=b;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")p=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=b}const j=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),_=await p.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=lg(_[0]);let S=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const A=await p.request({method:"eth_chainId"});S=yb(A)}const C={domain:j.host,address:N,statement:g,uri:j.href,version:"1",chainId:S,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=bb(C),v=await p.request({method:"personal_sign",params:[wb(m),N]})}try{const{data:y,error:b}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Nt});if(b)throw b;if(!y||!y.session||!y.user){const g=new hn;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:b})}catch(y){if(U(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,m;let v,y;if("message"in t)v=t.message,y=t.signature;else{const{chain:b,wallet:g,statement:x,options:p}=t;let j;if(Ae())if(typeof g=="object")j=g;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const _=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),x?{statement:x}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:b,error:g}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Jr(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Nt});if(g)throw g;if(!b||!b.session||!b.user){const x=new hn;return this._returnResult({data:{user:null,session:null},error:x})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:g})}catch(b){if(U(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await Mr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await H(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Nt});if(await mr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new hn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(U(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Nt}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new hn;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(U(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await fn(this.storage,this.storageKey));const{error:h}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Mi("You must provide either an email or phone number.")}catch(l){if(U(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await H(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Nt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(U(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await fn(this.storage,this.storageKey));const u=await H(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:hb});return!((i=u.data)===null||i===void 0)&&i.url&&Ae()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(U(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new it;const{error:s}=await H(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(U(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await H(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await H(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Mi("You must provide either an email or phone number and a type")}catch(r){if(U(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Uo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Mr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=zo()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=lb(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:yr}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new it}:await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:yr})})}catch(r){if(U(r))return Uw(r)&&(await this._removeSession(),await mr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new it;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await fn(this.storage,this.storageKey));const{data:u,error:d}=await H(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:yr});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(U(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new it;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Fo(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(U(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new it;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(U(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ae())throw new Ui("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ui(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Yd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ui("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Yd("No code detected.");const{data:x,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Ui("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=xn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:y,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(U(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Mr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Mw(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await mr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Gw(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await fn(this.storage,this.storageKey,!0));try{return await H(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(U(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ae()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(U(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Nt}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new hn}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(U(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await H(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Xw(async s=>(s>0&&await Qw(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await H(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Nt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Wo(i)&&Date.now()+o-n<xn})}catch(n){if(this._debug(r,"error",n),U(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ae()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Mr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Mr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await vn(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:zo()}else if(s&&!s.user&&!s.user){const o=await Mr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await mr(this.storage,this.storageKey+"-user"),await vn(this.storage,this.storageKey,s)):s.user=zo()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Uo;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Uo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Wo(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new it;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new so;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new it;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),U(i)){const o={data:null,error:i};return Wo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await vn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=th(s);await vn(this.storage,this.storageKey,i)}else{const s=th(r);await vn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await mr(this.storage,this.storageKey),await mr(this.storage,this.storageKey+"-code-verifier"),await mr(this.storage,this.storageKey+"-user"),this.userStorage&&await mr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ae()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),xn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/xn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${xn}ms, refresh threshold is ${tc} ticks`),s<=tc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof og)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ae()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await fn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await H(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await H(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Eb(t.webauthn.credential_response):Pb(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Sb(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Cb(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Fo(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await H(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new it})})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new it});const o=await H(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ae()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new it});const o=await H(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ae()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await H(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new it})})}catch(t){if(U(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await H(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new it})})}catch(r){if(U(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Dw>s)return n;const{data:i,error:o}=await H(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return this._returnResult({data:null,error:v});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Fo(n);r!=null&&r.allowExpired||ib(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=ab(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,qw(`${l}.${c}`)))throw new sc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(U(n))return this._returnResult({data:null,error:n});throw n}}}Xs.nextInstanceID={};const Bb=Xs;class Mb extends Bb{constructor(t){super(t)}}class Ub{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=Ow(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:_w,realtime:Sw,auth:Object.assign(Object.assign({},Nw),{storageKey:c}),global:kw},d=Lw(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Pw(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Sy(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ww(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new ky(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u,throwOnError:d},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mb({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new zy(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wb=(e,t,r)=>new Ub(e,t,r);function Fb(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Fb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zb="https://zbnkhlxlxgrmrpmpeuwz.supabase.co",Hb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpibmtobHhseGdybXJwbXBldXd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NzU2NjYsImV4cCI6MjA4MDI1MTY2Nn0.Ztt0DbZcAFeBgdq1DkqIoC5gawLjUXg_5aWEZZ7lfA0",G=Wb(zb,Hb),ug=w.createContext({}),It=()=>w.useContext(ug);function Vb({children:e}){const[t,r]=w.useState(null),[n,s]=w.useState(!0);w.useEffect(()=>{G.auth.getSession().then(({data:{session:d}})=>{r((d==null?void 0:d.user)??null),s(!1)});const{data:{subscription:u}}=G.auth.onAuthStateChange((d,h)=>{r((h==null?void 0:h.user)??null)});return()=>u.unsubscribe()},[]);const c={user:t,loading:n,signUp:async(u,d,h)=>{const f=`${window.location.origin}/Babu-Media/login`,{data:m,error:v}=await G.auth.signUp({email:u,password:d,options:{data:{full_name:h},emailRedirectTo:f}});return{data:m,error:v}},signIn:async(u,d)=>{const{data:h,error:f}=await G.auth.signInWithPassword({email:u,password:d});return{data:h,error:f}},signOut:async()=>{const{error:u}=await G.auth.signOut();return{error:u}}};return a.jsx(ug.Provider,{value:c,children:e})}const qb={home:"Home",dashboard:"Dashboard",fusionLab:"Fusion Lab",plotWorld:"Plot World",settings:"Settings",signOut:"Sign Out"},Kb={create:"Create",save:"Save",cancel:"Cancel",delete:"Delete",close:"Close",back:"Back",next:"Next",previous:"Previous",loading:"Loading...",saving:"Saving...",deleting:"Deleting..."},Gb={required:"Required",email:"Email",password:"Password",confirmPassword:"Confirm Password",name:"Name"},Jb={generic:"Something went wrong",required:"This field is required",invalidEmail:"Please enter a valid email",passwordMismatch:"Passwords do not match",passwordTooShort:"Password must be at least 6 characters"},Yb={saved:"Saved successfully",deleted:"Deleted successfully",created:"Created successfully"},Qb={fox:"Fox",wolf:"Wolf",raccoon:"Raccoon",unicorn:"Unicorn",lion:"Lion",owl:"Owl",dragon:"Dragon",bunny:"Bunny",cat:"Cat",dog:"Dog",bear:"Bear",panda:"Panda"},Xb={brave:"Brave",curious:"Curious",kind:"Kind",clever:"Clever",playful:"Playful",wise:"Wise",gentle:"Gentle",bold:"Bold",creative:"Creative",loyal:"Loyal",funny:"Funny",adventurous:"Adventurous",shy:"Shy",confident:"Confident",caring:"Caring",magical:"Magical"},Zb={pixar:"Pixar/Disney",dreamworks:"DreamWorks",ghibli:"Studio Ghibli",cartoonNetwork:"Cartoon Network",nickelodeon:"Nickelodeon",anime:"Anime Style",disneyClassic:"Disney Classic",illumination:"Illumination"},e1={superheroCape:"Superhero Cape",detective:"Detective",princessPrince:"Princess/Prince",pirate:"Pirate",astronaut:"Astronaut",wizardWitch:"Wizard/Witch",sportsStar:"Sports Star",artist:"Artist",scientist:"Scientist",ninja:"Ninja",fairy:"Fairy",casual:"Casual"},t1={navigation:qb,buttons:Kb,forms:Gb,errors:Jb,success:Yb,animals:Qb,traits:Xb,artStyles:Zb,outfits:e1},r1={title:"Babu Media - Build Your Own Disney World",description:"Transform passive screen time into active bonding with personalized bedtime stories"},n1={pillars:"The 5 Pillars",howItWorks:"How It Works",pricing:"Pricing",library:"Library",create:"Create",login:"Login"},s1={tagline:"Reimagining Bedtime Stories",titleLine1:"Build Your Own",titleLine2:"Disney World",subtitle:"Transform Passive Screen Time into Active Bonding",description:"Create AI-powered characters with your child, then watch them come to life in personalized bedtime adventures. No coding. No drawing skills. Just imagination.",cta:"Start Creating Free",secondaryCta:"See the Magic",socialProof:"from 1,000+ Fathers"},i1={bondingTime:"20m Avg. Bonding Time",imaginationYears:"3-10 Prime Imagination Years",storyPossibilities:"Story Possibilities"},a1={title:"The 5 Pillars of Imagination",subtitle:"Babu Media isn't just a story app. It's a complete digital ecosystem designed to spark creativity and build confidence.",fusionLab:{title:"The Fusion Lab",description:"Don't just choose a character. Build one. Pick an animal, dress it up, give it a personality. AI brings your creation to life in seconds.",cta:"Create Character"},plotWorld:{title:"The Plot World",description:'Bedtime reimagined. YOUR character. YOUR adventure. Type any idea"rescue a cloud stuck in a tree"and watch AI spin a 5-page illustrated story in minutes.',cta:"Start Story"},classroom:{title:"The Classroom",badge:"Coming Soon",description:"Learning is easier when it's fun. Math with your fox. Reading with your unicorn. Personalized educational games that make your child the teacher's pet."},playground:{title:"The Playground",badge:"Coming Soon",description:"Play casual games starring YOUR character. Jumping puzzles. Matching games. Every win feels personal because that's YOUR creation on screen."},commRooms:{title:"Comm Rooms",badge:"Coming Soon",description:"Build confidence through conversation. Your child's character becomes a safe space for practicing social scenarios, expressing feelings, and building emotional intelligence."}},o1={title:"Magic in 3 Steps",step:"STEP",step1:{title:"Create Character",description:"Pick animal, style, outfit. AI brings it to life.",time:"3 min"},step2:{title:"Choose Adventure",description:"Any idea becomes a 5-page illustrated story.",time:"2 min"},step3:{title:"Read Together",description:"Swipe through pages. Watch the animated climax.",time:"10 min"}},l1={testimonial1:{quote:"For the first time, bedtime isn't a battle. My daughter asks to create stories with me. The bonding is realwe're building something together.",author:"Sarah M.",role:"Mom of 2"},testimonial2:{quote:"The 'Ikea Effect' is real. My son is obsessed with HIS fox character. He cares about these stories because he helped create them.",author:"David R.",role:"Dad of 1"},testimonial3:{quote:"Finally, an app that makes ME the hero sidekick. We create together, read together, laugh together. Screen time I actually feel good about.",author:"Michael K.",role:"Dad of 3"}},c1={title:"Simple Pricing",subtitle:"Start free. Upgrade when you're ready.",explorer:{name:"Explorer",price:"$0",features:{children:"1 Child Profile",characters:"2 Characters",stories:"1 Story"},cta:"Start Free"},creator:{name:"Creator",price:"$9.99",period:"/mo",badge:"MOST POPULAR",features:{children:"Unlimited Children",characters:"5 Characters/month",stories:"10 Stories/week"},cta:"Start 7-Day Free Trial"},pro:{name:"Pro",price:"$19.99",period:"/mo",badge:"BEST VALUE",features:{characters:"Unlimited Characters",stories:"Unlimited Stories",storage:"Unlimited Storage",classroom:"Access to Classroom & Games",commRooms:"Comm Rooms"},comingSoon:"SOON",cta:"Start 7-Day Free Trial"}},u1={privacy:"Privacy",terms:"Terms",contact:"Contact",copyright:" 2025 Babu Media. Built for Dads & Kids."},d1={trait:"Trait",types:{foxDetective:"Fox Detective",cyberWolf:"Cyber Wolf",friendlyRaccoon:"Friendly Raccoon",magicalUnicorn:"Magical Unicorn",kingCharles:"King Charles Cavalier",shyDragon:"Shy Dragon"},traits:{cleverCurious:"Clever & Curious",braveStrong:"Brave & Strong",kindHelpful:"Kind & Helpful",wiseMagical:"Wise & Magical",braveCurious:"Brave & Curious",shyGentle:"Shy & Gentle"}},h1={bringToLife:"Bring to Life"},f1={header:"Make Your Best Friend Come to Life"},m1={meta:r1,nav:n1,hero:s1,stats:i1,pillars:a1,howItWorks:o1,testimonials:l1,pricing:c1,footer:u1,character:d1,cta:h1,tablet:f1},p1={pageTitle:"Log In",heading:"Welcome Back",subtitle:"Sign in to continue creating magic",emailLabel:"Email",emailPlaceholder:"you@example.com",passwordLabel:"Password",passwordPlaceholder:"Enter your password",submitButton:"Sign In",submitting:"Signing in...",forgotPassword:"Forgot your password?",noAccount:"Don't have an account?",signUpLink:"Sign up",errors:{invalidEmail:"Please enter a valid email address",invalidCredentials:"Invalid email or password",required:"This field is required"}},g1={pageTitle:"Create Account",heading:"Create Account",subtitle:"Start building magical stories together",nameLabel:"Your Name",namePlaceholder:"John Doe",emailLabel:"Email",emailPlaceholder:"you@example.com",passwordLabel:"Password",passwordPlaceholder:"Create a password",confirmPasswordLabel:"Confirm Password",confirmPasswordPlaceholder:"Confirm your password",submitButton:"Create Account",submitting:"Creating account...",hasAccount:"Already have an account?",signInLink:"Sign in",checkEmail:{title:"Check Your Email!",message:"We've sent a verification link to",goToLogin:"Go to Login"},errors:{passwordMismatch:"Passwords do not match",passwordTooShort:"Password must be at least 6 characters",emailInUse:"This email is already registered"}},x1={pageTitle:"Reset Password",heading:"Reset your password",subtitle:"Enter your email and we'll send you a reset link",emailLabel:"Email address",emailPlaceholder:"you@example.com",submitButton:"Send reset link",submitting:"Sending...",backToLogin:"Back to login",success:{title:"Check your email",message:"We've sent a password reset link to your email"}},v1={pageTitle:"Set New Password",heading:"Set new password",passwordLabel:"New Password",passwordPlaceholder:"Enter new password",confirmPasswordLabel:"Confirm New Password",confirmPasswordPlaceholder:"Confirm new password",submitButton:"Update Password",submitting:"Updating...",success:{title:"Password updated",message:"Your password has been successfully updated"}},y1={login:p1,signup:g1,forgotPassword:x1,resetPassword:v1},w1="Settings",b1="Back to Dashboard",j1={title:"Account",email:"Email",memberSince:"Member since"},k1={title:"Language",description:"Choose your preferred language for the app",english:"English",hebrew:""},_1={title:"Subscription",currentPlan:"Current Plan",free:"Free",active:"Active",yourUsage:"Your Usage",children:"Children",characters:"Characters",stories:"Stories",monthly:"monthly",weekly:"weekly",upgradeToCreator:"Upgrade to Creator - $9.99/mo",upgradeToPro:"Upgrade to Pro - $19.99/mo",manageSubscription:"Manage Subscription",manageNote:'Click "Manage Subscription" to update payment method, change plan, or cancel.'},N1={title:"Plan Comparison",feature:"Feature",explorer:"Explorer",creator:"Creator",pro:"Pro",childProfiles:"Child Profiles",characters:"Characters",stories:"Stories",storage:"Storage",unlimited:"Unlimited",total:"total",perMonth:"/month",perWeek:"/week",basic:"Basic",extended:"Extended"},S1={title:"Account Actions",signOut:"Sign Out"},C1={pageTitle:w1,backToDashboard:b1,account:j1,language:k1,subscription:_1,planComparison:N1,accountActions:S1},E1="Welcome to the Studio",P1="Select a child profile to start creating characters",T1="Add Child",L1="Add your first child",O1={yearsOld:"years old"},R1={title:"Add Child Profile",subtitle:"Create a profile for your little creator",nameLabel:"Child's Name",namePlaceholder:"Emma",ageLabel:"Age",agePlaceholder:"6",chooseAvatar:"Choose an Avatar",createButton:"Create Profile",creating:"Creating...",backToDashboard:"Back to Dashboard",errors:{nameRequired:"Please enter a name",invalidAge:"Please enter a valid age (1-18)"}},$1={childLimitTitle:"Child Profile Limit Reached",childLimitReason:"You've reached your free tier limit of 1 child profile."},A1={welcome:E1,selectChild:P1,addChild:T1,addFirstChild:L1,childCard:O1,addChildPage:R1,paymentWall:$1},I1="Fusion Lab",D1={title:"Create New Character",step1:{title:"Name Your Character",nameLabel:"Character Name",namePlaceholder:"Detective Dash, Captain Whiskers...",chooseAnimal:"Choose Animal Type",next:"Next: Choose Style"},step2:{title:"Choose Your Favorite Art Style",subtitle:"Pick the style that reminds you of your favorite shows!",next:"Next: Choose Personality"},step3:{title:"Choose Personality Traits",subtitle:"Select at least 1 trait",next:"Next: Choose Outfit"},step4:{title:"Choose an Outfit (Optional)",customOutfit:"Or describe a custom outfit",customPlaceholder:"Describe a custom outfit...",createButton:"Create Character",generating:"Generating..."},back:"Back"},B1={title:"Your Characters",empty:{title:"No characters yet",description:"Create your first character!"},createNew:"Create New Character"},M1={delete:"Delete",deleting:"Deleting...",confirmDelete:"Are you sure you want to delete this character?"},U1={title:"Character Preview"},W1="Create a Story with {name}",F1={nameRequired:"Please enter a character name",selectAnimal:"Please select an animal type",selectStyle:"Please select an art style",selectTrait:"Please select at least one personality trait",generationFailed:"Failed to generate character. Please try again."},z1={created:"Character created successfully!",deleted:"Character deleted"},H1={fusionLab:I1,create:D1,list:B1,card:M1,preview:U1,goToStory:W1,errors:F1,success:z1},V1="Plot World",q1={title:"Create New Story",selectCharacter:{title:"Select a Character",subtitle:"Choose which character will star in your story",noCharacters:"No characters yet. Create one first!",goToFusionLab:"Go to Fusion Lab"},selectAdventure:{title:"Choose an Adventure",subtitle:"What kind of adventure will your character have?",themes:{space:"Space Adventure",underwater:"Underwater Journey",forest:"Forest Exploration",castle:"Castle Quest",dinosaurs:"Dinosaur Discovery",pirates:"Pirate Treasure",superheroes:"Superhero Mission",magic:"Magical Kingdom",safari:"Safari Adventure",arctic:"Arctic Expedition"}},selectLesson:{title:"Choose a Lesson (Optional)",subtitle:"What should the story teach?",lessons:{sharing:"Sharing is caring",bravery:"Being brave",friendship:"Making friends",honesty:"Telling the truth",kindness:"Being kind to others",patience:"Learning patience",teamwork:"Working together",perseverance:"Never giving up"}},visualStyle:{title:"Choose Visual Style",subtitle:"How should your story look?"},createButton:"Create Story",creating:"Creating your magical story...",creatingIllustration:"Creating illustration {number}..."},K1={title:"Your Stories",empty:{title:"No stories yet",description:"Create your first story!"},createNew:"Create New Story"},G1={title:"Your Story",page:"Page",of:"of",theEnd:"The End",close:"Close",nextPage:"Next",prevPage:"Previous"},J1={readStory:"Read Story",delete:"Delete",createdWith:"with"},Y1={selectCharacter:"Please select a character",selectAdventure:"Please select an adventure theme",generationFailed:"Story creation failed. Please try again."},Q1={created:"Story created successfully!",deleted:"Story deleted"},X1={plotWorld:V1,create:q1,list:K1,read:G1,card:J1,delete:{title:"Delete Story",message:"Are you sure you want to delete this story? This cannot be undone.",confirm:"Delete",cancel:"Cancel"},errors:Y1,success:Q1},Z1={fusionLab:"Fusion Lab",plotWorld:"Plot World",parentAccount:"Parent Account",settingsAndSubscription:"Settings & Subscription",signOut:"Sign Out",expandSidebar:"Expand sidebar",collapseSidebar:"Collapse sidebar",addChild:"Add Child",yearsOld:"years old"},ej={title:"Welcome to Babu Media!",description:"To start creating magical characters and stories, first add a child profile.",addChildButton:"Add Child Profile"},tj={title:"Remove Child Profile?",confirmText:"Are you sure you want to remove",warning:"This will also delete all their characters and stories. This action cannot be undone.",cancel:"Cancel",remove:"Remove"},rj={title:"'s Fusion Lab",subtitle:"Create magical characters with AI",createNewCharacter:"Create New Character",upgradeTitle:"Upgrade to Creator Tier",deleteCharacter:{title:"Delete Character?",confirmText:"Are you sure you want to delete",warning:"This action cannot be undone.",cancel:"Cancel",delete:"Delete"},characterDetail:{createStory:"Create a story",animalType:"Animal Type",visualStyle:"Visual Style",personalityTraits:"Personality Traits",outfit:"Outfit",created:"Created",deleteCharacter:"Delete Character"},step1:{characterName:"Character Name",characterNamePlaceholder:"Detective Dash, Captain Whiskers...",chooseAnimalType:"Choose Animal Type",orTypeYourOwn:"or type your own",customAnimalPlaceholder:"Border Collie, Dinosaur, Phoenix, Penguin...",customAnimalHint:"Type any specific animal breed or creature - real or fantasy!",nextButton:"Next: Choose Style"},step2:{chooseArtStyle:"Choose Your Favorite Art Style",artStyleHint:"Pick the style that reminds you of your favorite shows!",back:"Back",nextButton:"Next: Personality"},step3:{chooseTraits:"Choose Personality Traits",traitsHint:"Select up to 4 traits that describe your character",selected:"Selected",back:"Back",nextButton:"Next: Outfit"},step4:{chooseOutfit:"Choose an Outfit",orDescribeOwn:"or describe your own",customOutfitPlaceholder:"Describe a custom outfit...",characterPreview:"Character Preview",style:"Style",outfit:"Outfit",back:"Back",bringToLife:"Bring to Life!"},generating:{creatingMagic:"Creating magic...",comingToLife:"is coming to life!",timeEstimate:"This usually takes 10-20 seconds"},success:{isReady:"is Ready!",createdWithMagic:"Your character has been created with AI magic!",savedWaiting:"Your character has been saved. Image generation may take a moment.",buildFirstStory:"Let's build your first story with"},characters:"Characters",noCharactersYet:"No characters yet. Create your first one!",loadingMessages:["Mixing the magic ingredients...","Adding a sprinkle of personality...","Painting with imagination...","Bringing your character to life...","Almost ready to meet you...","The magic is happening...","Creating something amazing...","Your character is waking up..."],animals:{fox:"Fox",wolf:"Wolf",raccoon:"Raccoon",unicorn:"Unicorn",lion:"Lion",owl:"Owl",dragon:"Dragon",bunny:"Bunny",cat:"Cat",dog:"Dog",bear:"Bear",panda:"Panda",custom:"Custom"},styles:{pixar:"Pixar/Disney",dreamworks:"DreamWorks",ghibli:"Studio Ghibli",cartoonNetwork:"Cartoon Network",nickelodeon:"Nickelodeon",anime:"Anime Style",disneyClassic:"Disney Classic",illumination:"Illumination"},traits:{brave:"Brave",curious:"Curious",kind:"Kind",clever:"Clever",playful:"Playful",wise:"Wise",gentle:"Gentle",bold:"Bold",creative:"Creative",loyal:"Loyal",funny:"Funny",adventurous:"Adventurous",shy:"Shy",confident:"Confident",caring:"Caring",magical:"Magical"},outfits:{superhero:"Superhero Cape",detective:"Detective",princess:"Princess/Prince",pirate:"Pirate",astronaut:"Astronaut",wizard:"Wizard/Witch",sports:"Sports Star",artist:"Artist",scientist:"Scientist",ninja:"Ninja",fairy:"Fairy",casual:"Casual"}},nj={title:"'s Plot World",subtitle:"Create magical stories with your characters",backToStories:" Back to Stories",upgradeTitle:"Upgrade to Creator Tier",noCharacters:{title:"No Characters Yet",description:"Before creating stories, you need to create some characters in the Fusion Lab. Your characters will be the stars of your stories!"},createNewStory:"Create New Story",noStories:{title:"No Stories Yet",description:"Click the button above to create your first magical adventure!"},storyCard:{untitled:"Untitled Story",starring:"Starring",unknown:"Unknown",deleteStory:"Delete story"},deleteStory:{title:"Delete Story?",confirmText:"Are you sure you want to delete this story? This action cannot be undone.",cancel:"Cancel",delete:"Delete"},step1:{title:"Choose Your Hero",subtitle:"Who will be the star of today's adventure?",nextButton:"Next: Choose Adventure"},step2:{title:"What's Today's Adventure?",subtitle:"Choose the type of adventure for",orDescribeOwn:"or describe your own",customAdventurePlaceholder:"Describe a custom adventure...",back:"Back",nextButton:"Next: Story Options"},step3:{title:"Add a Learning Moment?",subtitle:"Would you like the story to teach a valuable lesson?",yesAddLesson:"Yes, add a lesson",noJustFun:"No, just fun!",chooseLessonTitle:"Choose a Lesson",chooseLessonSubtitle:"What would you like the story to teach?",orDescribeOwn:"or describe your own",customLessonPlaceholder:"Describe a custom lesson...",back:"Back",nextButton:"Next: Review"},step4:{title:"Ready to Create!",subtitle:"Here's what we're making",hero:"Hero",adventure:"Adventure",lesson:"Lesson",noLesson:"No specific lesson",back:"Back",createButton:"Create My Story!"},generating:{adventureBegins:"'s adventure begins...",storyBeingWritten:"Once upon a time... the story is being written!",paintingOpening:"Painting the opening scene...",creatingAdventure:"Creating the adventure moment...",addingFinale:"Adding the magical finale...",creatingIllustration:"Creating illustration",showAboutToBegin:"The show is about to begin!",somethingWentWrong:"Something went wrong. Please try again.",personalizedHeader:"'s Story is Being Created!"},adventures:{space:{label:"Space Adventure",desc:"Journey through the stars and planets"},underwater:{label:"Underwater Discovery",desc:"Explore the magical ocean depths"},forest:{label:"Enchanted Forest",desc:"Adventures in a magical woodland"},castle:{label:"Kingdom Quest",desc:"A royal adventure in a magical kingdom"},dinosaurs:{label:"Dinosaur Land",desc:"Travel back to prehistoric times"},superheroes:{label:"Superhero Mission",desc:"Save the day with special powers"},pirates:{label:"Pirate Treasure",desc:"Hunt for hidden treasure on the high seas"},candy:{label:"Candy World",desc:"A sweet adventure in a land of treats"}},morals:{kindness:{label:"Being Kind",desc:"Learning to be kind and help others"},bravery:{label:"Overcoming Fear",desc:"Being brave even when scared"},friendship:{label:"Making Friends",desc:"How to make and keep good friends"},honesty:{label:"Telling the Truth",desc:"The importance of being honest"},sharing:{label:"Learning to Share",desc:"The joy of sharing with others"},newplace:{label:"New Beginnings",desc:"Adjusting to a new place or school"},patience:{label:"Being Patient",desc:"Good things come to those who wait"},trying:{label:"Never Give Up",desc:"Keep trying even when things are hard"},different:{label:"Being Different",desc:"Celebrating what makes you unique"},goodbye:{label:"Saying Goodbye",desc:"Dealing with goodbyes and loss"}},reader:{backToStories:" Back to Stories",creatingIllustration:"Creating illustration...",theEnd:"The End",readAgain:"Read Again",createAnother:"Create Another Story",page:"Page"}},sj={sidebar:Z1,welcome:ej,deleteChild:tj,fusionLab:rj,plotWorld:nj},ij={home:" ",dashboard:" ",fusionLab:" ",plotWorld:" ",settings:"",signOut:""},aj={create:"",save:"",cancel:"",delete:"",close:"",back:"",next:"",previous:"",loading:"...",saving:"...",deleting:"..."},oj={required:" ",email:"",password:"",confirmPassword:" ",name:""},lj={generic:" ",required:"   ",invalidEmail:"    ",passwordMismatch:"  ",passwordTooShort:"    6 "},cj={saved:" ",deleted:" ",created:" "},uj={fox:"",wolf:"",raccoon:"",unicorn:" ",lion:"",owl:"",dragon:"",bunny:"",cat:"",dog:"",bear:"",panda:""},dj={brave:"",curious:"",kind:" ",clever:"",playful:"",wise:"",gentle:"",bold:"",creative:"",loyal:"",funny:"",adventurous:"",shy:"",confident:" ",caring:"",magical:""},hj={pixar:"/",dreamworks:"",ghibli:" '",cartoonNetwork:" ",nickelodeon:"",anime:" ",disneyClassic:" ",illumination:""},fj={superheroCape:"  ",detective:"",princessPrince:"/",pirate:"",astronaut:"",wizardWitch:"/",sportsStar:" ",artist:"",scientist:"",ninja:"'",fairy:"",casual:""},mj={navigation:ij,buttons:aj,forms:oj,errors:lj,success:cj,animals:uj,traits:dj,artStyles:hj,outfits:fj},pj={title:"  -     ",description:"           "},gj={pillars:"5  ",howItWorks:"  ",pricing:"",library:"",create:" ",login:""},xj={tagline:"    ",titleLine1:" ",titleLine2:"  ",subtitle:"      ",description:"        ,        .  .   .  .",cta:" ",secondaryCta:" ",socialProof:"-1,000+ "},vj={bondingTime:"20 '  ",imaginationYears:"  ",storyPossibilities:" "},yj={title:"5    ",subtitle:"      .          .",fusionLab:{title:" ",description:"   .  .  ,  ,   .         .",cta:" "},plotWorld:{title:" ",description:"   .  .  .              5   .",cta:" "},classroom:{title:"",badge:"",description:"    .    .     .          ."},playground:{title:" ",badge:"",description:"       . .  .          ."},commRooms:{title:" ",badge:"",description:"    .          ,     ."}},wj={title:" -3 ",step:"",step1:{title:" ",description:" , , .      .",time:"3 '"},step2:{title:" ",description:"    ,     .",time:"2 '"},step3:{title:" ",description:"  ,       ",time:"10 '"}},bj={testimonial1:{quote:" ,     .     .         .",author:" .",role:"  "},testimonial2:{quote:"   .      .          .",author:" .",role:"  "},testimonial3:{quote:" ,       .   ,  ,  .       .",author:" .",role:"  "}},jj={title:" ",subtitle:" .   .",explorer:{name:"",price:"$0",features:{children:"  ",characters:"2 ",stories:" "},cta:" "},creator:{name:"",price:"$9.99",period:"/",badge:" ",features:{children:"  ",characters:"5 /",stories:"10 /"},cta:"   -7 "},pro:{name:" ",price:"$19.99",period:"/",badge:" ",features:{characters:"  ",stories:"  ",storage:"  ",classroom:"  ",commRooms:" "},comingSoon:"",cta:"   -7 "}},kj={privacy:"",terms:"",contact:" ",copyright:" 2025  .   ."},_j={trait:"",types:{foxDetective:" ",cyberWolf:" ",friendlyRaccoon:" ",magicalUnicorn:"  ",kingCharles:" ' ",shyDragon:" "},traits:{cleverCurious:" ",braveStrong:" ",kindHelpful:"  ",wiseMagical:" ",braveCurious:" ",shyGentle:" "}},Nj={bringToLife:" "},Sj={header:"      "},Cj={meta:pj,nav:gj,hero:xj,stats:vj,pillars:yj,howItWorks:wj,testimonials:bj,pricing:jj,footer:kj,character:_j,cta:Nj,tablet:Sj},Ej={pageTitle:"",heading:" ",subtitle:"    ",emailLabel:"",emailPlaceholder:"you@example.com",passwordLabel:"",passwordPlaceholder:"   ",submitButton:"",submitting:"...",forgotPassword:"  ?",noAccount:"  ?",signUpLink:"",errors:{invalidEmail:"    ",invalidCredentials:"   ",required:"   "}},Pj={pageTitle:" ",heading:" ",subtitle:"    ",nameLabel:" ",namePlaceholder:" ",emailLabel:"",emailPlaceholder:"you@example.com",passwordLabel:"",passwordPlaceholder:" ",confirmPasswordLabel:" ",confirmPasswordPlaceholder:"   ",submitButton:" ",submitting:" ...",hasAccount:"   ?",signInLink:"",checkEmail:{title:"   !",message:"   ",goToLogin:" "},errors:{passwordMismatch:"  ",passwordTooShort:"    6 ",emailInUse:"    "}},Tj={pageTitle:" ",heading:"  ",subtitle:"       ",emailLabel:" ",emailPlaceholder:"you@example.com",submitButton:"  ",submitting:"...",backToLogin:" ",success:{title:"  ",message:"     "}},Lj={pageTitle:"  ",heading:"  ",passwordLabel:" ",passwordPlaceholder:"  ",confirmPasswordLabel:"  ",confirmPasswordPlaceholder:"    ",submitButton:" ",submitting:"...",success:{title:" ",message:"   "}},Oj={login:Ej,signup:Pj,forgotPassword:Tj,resetPassword:Lj},Rj="",$j="  ",Aj={title:"",email:"",memberSince:" "},Ij={title:"",description:"     ",english:"English",hebrew:""},Dj={title:"",currentPlan:" ",free:"",active:"",yourUsage:" ",children:"",characters:"",stories:"",monthly:"",weekly:"",upgradeToCreator:"  - $9.99/",upgradeToPro:"  - $19.99/",manageSubscription:" ",manageNote:"       ,    ."},Bj={title:" ",feature:"",explorer:"",creator:"",pro:"",childProfiles:" ",characters:"",stories:"",storage:"",unlimited:" ",total:"",perMonth:"/",perWeek:"/",basic:"",extended:""},Mj={title:" ",signOut:""},Uj={pageTitle:Rj,backToDashboard:$j,account:Aj,language:Ij,subscription:Dj,planComparison:Bj,accountActions:Mj},Wj="  ",Fj="      ",zj=" ",Hj="    ",Vj={yearsOld:""},qj={title:"  ",subtitle:"    ",nameLabel:" ",namePlaceholder:"",ageLabel:"",agePlaceholder:"6",chooseAvatar:" ",createButton:" ",creating:"...",backToDashboard:"  ",errors:{nameRequired:"  ",invalidAge:"    (1-18)"}},Kj={childLimitTitle:"   ",childLimitReason:"       ."},Gj={welcome:Wj,selectChild:Fj,addChild:zj,addFirstChild:Hj,childCard:Vj,addChildPage:qj,paymentWall:Kj},Jj=" ",Yj={title:"  ",step1:{title:"  ",nameLabel:" ",namePlaceholder:" ,  ...",chooseAnimal:"  ",next:":  "},step2:{title:"     ",subtitle:"       !",next:":  "},step3:{title:"  ",subtitle:"   ",next:":  "},step4:{title:"  ()",customOutfit:"   ",customPlaceholder:"  ...",createButton:" ",generating:"..."},back:""},Qj={title:" ",empty:{title:"  ",description:"    !"},createNew:"  "},Xj={delete:"",deleting:"...",confirmDelete:"       ?"},Zj={title:" "},e2="   {name}",t2={nameRequired:"   ",selectAnimal:"   ",selectStyle:"   ",selectTrait:"     ",generationFailed:"  .   ."},r2={created:"  !",deleted:" "},n2={fusionLab:Jj,create:Yj,list:Qj,card:Xj,preview:Zj,goToStory:e2,errors:t2,success:r2},s2=" ",i2={title:"  ",selectCharacter:{title:" ",subtitle:"     ",noCharacters:"  .   !",goToFusionLab:"  "},selectAdventure:{title:" ",subtitle:"    ?",themes:{space:" ",underwater:"  ",forest:" ",castle:" ",dinosaurs:" ",pirates:" ",superheroes:"  ",magic:" ",safari:" ",arctic:" "}},selectLesson:{title:"  ()",subtitle:"   ?",lessons:{sharing:"  ",bravery:" ",friendship:" ",honesty:"  ",kindness:"  ",patience:" ",teamwork:" ",perseverance:"  "}},visualStyle:{title:"  ",subtitle:"    ?"},createButton:" ",creating:"    ...",creatingIllustration:"  {number}..."},a2={title:" ",empty:{title:"  ",description:"    !"},createNew:"  "},o2={title:" ",page:"",of:"",theEnd:"",close:"",nextPage:"",prevPage:""},l2={readStory:" ",delete:"",createdWith:""},c2={selectCharacter:"  ",selectAdventure:"   ",generationFailed:"  .   ."},u2={created:"  !",deleted:" "},d2={plotWorld:s2,create:i2,list:a2,read:o2,card:l2,delete:{title:" ",message:"       ?     .",confirm:"",cancel:""},errors:c2,success:u2},h2={fusionLab:" ",plotWorld:" ",parentAccount:" ",settingsAndSubscription:" ",signOut:"",expandSidebar:"  ",collapseSidebar:"  ",addChild:" ",yearsOld:""},f2={title:"   !",description:"     ,    .",addChildButton:"  "},m2={title:"  ?",confirmText:"     ",warning:"        .     .",cancel:"",remove:""},p2={title:" -  ",subtitle:"     ",createNewCharacter:"  ",upgradeTitle:"  ",deleteCharacter:{title:" ?",confirmText:"     ",warning:"    .",cancel:"",delete:""},characterDetail:{createStory:" ",animalType:" ",visualStyle:" ",personalityTraits:" ",outfit:"",created:"",deleteCharacter:" "},step1:{characterName:" ",characterNamePlaceholder:" ,  ...",chooseAnimalType:"  ",orTypeYourOwn:"  ",customAnimalPlaceholder:" , , , ...",customAnimalHint:"      -   !",nextButton:":  "},step2:{chooseArtStyle:"     ",artStyleHint:"       !",back:"",nextButton:": "},step3:{chooseTraits:"  ",traitsHint:"  4     ",selected:"",back:"",nextButton:": "},step4:{chooseOutfit:" ",orDescribeOwn:"  ",customOutfitPlaceholder:"   ...",characterPreview:"   ",style:"",outfit:"",back:"",bringToLife:" !"},generating:{creatingMagic:" ...",comingToLife:" !",timeEstimate:"    10-20 "},success:{isReady:"!",createdWithMagic:"      !",savedWaiting:"  .     .",buildFirstStory:"      "},characters:"",noCharactersYet:"  .   !",loadingMessages:["   ...","  ...","  ...","   ...","   ..."," ...","  ...","  ..."],animals:{fox:"",wolf:"",raccoon:"",unicorn:" ",lion:"",owl:"",dragon:"",bunny:"",cat:"",dog:"",bear:"",panda:"",custom:" "},styles:{pixar:"/",dreamworks:"",ghibli:" '",cartoonNetwork:" ",nickelodeon:"",anime:" ",disneyClassic:" ",illumination:""},traits:{brave:"",curious:"",kind:" ",clever:"",playful:"",wise:"",gentle:"",bold:"",creative:"",loyal:"",funny:"",adventurous:"",shy:"",confident:" ",caring:"",magical:""},outfits:{superhero:"  ",detective:"",princess:"/",pirate:"",astronaut:"",wizard:"/",sports:" ",artist:"",scientist:"",ninja:"'",fairy:"",casual:""}},g2={title:" -  ",subtitle:"     ",backToStories:"  ",upgradeTitle:"  ",noCharacters:{title:"  ",description:"  ,      .      !"},createNewStory:"  ",noStories:{title:"  ",description:"          !"},storyCard:{untitled:"  ",starring:"",unknown:" ",deleteStory:" "},deleteStory:{title:" ?",confirmText:"       ?     .",cancel:"",delete:""},step1:{title:"   ",subtitle:"     ?",nextButton:":  "},step2:{title:"   ?",subtitle:"    ",orDescribeOwn:"  ",customAdventurePlaceholder:"   ...",back:"",nextButton:":  "},step3:{title:"  ?",subtitle:"     ?",yesAddLesson:",  ",noJustFun:",  !",chooseLessonTitle:" ",chooseLessonSubtitle:"   ?",orDescribeOwn:"  ",customLessonPlaceholder:"   ...",back:"",nextButton:": "},step4:{title:" !",subtitle:"   ",hero:"",adventure:"",lesson:"",noLesson:"  ",back:"",createButton:"   !"},generating:{adventureBegins:" -  ...",storyBeingWritten:"  ...  !",paintingOpening:"   ...",creatingAdventure:"   ...",addingFinale:"   ...",creatingIllustration:" ",showAboutToBegin:"  !",somethingWentWrong:" .   .",personalizedHeader:" -  !"},adventures:{space:{label:" ",desc:"    "},underwater:{label:" -",desc:"    "},forest:{label:" ",desc:"  "},castle:{label:" ",desc:"   "},dinosaurs:{label:" ",desc:"   "},superheroes:{label:"  ",desc:"     "},pirates:{label:" ",desc:"    "},candy:{label:" ",desc:"   "}},morals:{kindness:{label:"  ",desc:"     "},bravery:{label:"  ",desc:"   "},friendship:{label:" ",desc:"     "},honesty:{label:" ",desc:"   "},sharing:{label:" ",desc:"   "},newplace:{label:" ",desc:"     "},patience:{label:" ",desc:"    "},trying:{label:"  ",desc:"   "},different:{label:" ",desc:"     "},goodbye:{label:" ",desc:"   "}},reader:{backToStories:"  ",creatingIllustration:" ...",theEnd:"",readAgain:" ",createAnother:"  ",page:""}},x2={sidebar:h2,welcome:f2,deleteChild:m2,fusionLab:p2,plotWorld:g2},dg=w.createContext({}),Dt=()=>w.useContext(dg),Wi={en:{common:t1,homepage:m1,auth:y1,settings:C1,dashboard:A1,characters:H1,stories:X1,studio:sj},he:{common:mj,homepage:Cj,auth:Oj,settings:Uj,dashboard:Gj,characters:n2,stories:d2,studio:x2}},Zs=["en","he"],Yr="en",lh=(e,t)=>t.split(".").reduce((r,n)=>r&&r[n]!==void 0?r[n]:void 0,e),Ia=e=>{const t=e.split("/").filter(Boolean);for(const r of t)if(Zs.includes(r)&&r!==Yr)return r;return Yr},Ln=(e,t)=>{let r=e;for(const n of Zs)if(e.startsWith(`/${n}/`)||e===`/${n}`){r=e.slice(n.length+1)||"/";break}return t===Yr?r||"/":`/${t}${r==="/"?"":r}`},v2=e=>{for(const t of Zs){if(e.startsWith(`/${t}/`))return e.slice(t.length+1);if(e===`/${t}`)return"/"}return e};function y2({children:e}){const t=At(),r=Yt(),[n,s]=w.useState(()=>{const f=Ia(window.location.pathname);if(f!==Yr)return f;if(typeof window<"u"){const m=localStorage.getItem("babu-language");if(m&&Zs.includes(m))return m}return Yr}),i=n==="he";w.useEffect(()=>{document.documentElement.dir=i?"rtl":"ltr",document.documentElement.lang=n,localStorage.setItem("babu-language",n)},[n,i]),w.useEffect(()=>{const f=Ia(window.location.pathname);f!==n&&s(f)},[t.pathname]);const o=w.useCallback(f=>{if(!Zs.includes(f)||f===n)return;localStorage.setItem("babu-language",f);const m=v2(t.pathname),v=Ln(m,f);s(f),r(v,{replace:!0})},[n,t.pathname,r]),l=w.useCallback((f,m={})=>{var x,p;const[v,...y]=f.split("."),b=y.join(".");let g=lh((x=Wi[n])==null?void 0:x[v],b);return g===void 0&&(g=lh((p=Wi[Yr])==null?void 0:p[v],b)),g===void 0?(console.warn(`Translation missing for key: ${f}`),f):typeof g=="string"&&Object.keys(m).length>0?g.replace(/\{(\w+)\}/g,(j,_)=>m[_]!==void 0?m[_]:j):g},[n]),c=w.useCallback(f=>{var m,v;return((m=Wi[n])==null?void 0:m[f])||((v=Wi[Yr])==null?void 0:v[f])||{}},[n]),u=w.useCallback((f,m)=>{const v=Ln(f,n);r(v,m)},[n,r]),d=w.useCallback(f=>Ln(f,n),[n]),h={language:n,setLanguage:o,isRTL:i,t:l,getTranslations:c,localizedNavigate:u,localizedHref:d,buildLocalizedPath:f=>Ln(f,n)};return a.jsx(dg.Provider,{value:h,children:e})}function pu({active:e=!1,duration:t=4e3}){const[r,n]=w.useState(!1),s=w.useMemo(()=>{if(!e)return[];const i=["#FF6B6B","#4ECDC4","#FFE66D","#95E1D3","#F38181","#AA96DA","#FCBAD3","#A8D8EA","#FFD93D","#6BCB77"];return Array.from({length:150},(o,l)=>({id:l,x:Math.random()*100,color:i[Math.floor(Math.random()*i.length)],size:Math.random()*12+6,delay:Math.random()*.8,fallDuration:Math.random()*2+2.5,rotation:Math.random()*360,drift:(Math.random()-.5)*150,wobble:Math.random()*30}))},[e]);return w.useEffect(()=>{if(e){n(!0);const i=setTimeout(()=>{n(!1)},t);return()=>clearTimeout(i)}else n(!1)},[e,t]),!r||s.length===0?null:a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        @keyframes confetti-fall {
          0% {
            transform: translateY(-20px) rotate(0deg) translateX(0);
            opacity: 1;
          }
          25% {
            opacity: 1;
          }
          100% {
            transform: translateY(100vh) rotate(var(--rotation)) translateX(var(--drift));
            opacity: 0;
          }
        }
        @keyframes confetti-wobble {
          0%, 100% { transform: translateX(0); }
          50% { transform: translateX(var(--wobble)); }
        }
      `}),a.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",style:{zIndex:9999},children:s.map(i=>a.jsx("div",{style:{position:"absolute",left:`${i.x}%`,top:0,width:`${i.size}px`,height:`${i.size}px`,backgroundColor:i.color,borderRadius:Math.random()>.5?"50%":"2px",animation:`confetti-fall ${i.fallDuration}s ease-out ${i.delay}s forwards`,"--drift":`${i.drift}px`,"--rotation":`${i.rotation+720}deg`,"--wobble":`${i.wobble}px`,boxShadow:`0 0 3px ${i.color}`}},i.id))})]})}const w2="/Babu-Media/assets/Fusion%20lab-nMJfXudE.jpg",b2="/Babu-Media/assets/Racoon%20having%20fun-BVmDT_PC.png",j2="/Babu-Media/assets/Fox%20Driving%20a%20Car%20-B8D6oSWz.png",k2="/Babu-Media/assets/Hunter%20the%20fox-7oy-lJAS.png",_2="/Babu-Media/assets/Unicorn-dcVJJPzC.png",N2="/Babu-Media/assets/Story%20time%20-DrRlCZaC.png",S2="/Babu-Media/assets/Charlie%20Brave_%20Curious-D38YrXeJ.png",C2="/Babu-Media/assets/Jack%20Shy-0TiqaiTP.png",ch="https://babumedia.lemonsqueezy.com/buy/870ca6c4-80e6-440f-8bb4-a795be72ce39",uh="https://babumedia.lemonsqueezy.com/buy/a1a0c205-5ab5-49d4-b628-c2f3d43101b3",Vo=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),E2=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),dh=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),P2=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),T2=({className:e})=>a.jsxs("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),L2=({className:e})=>a.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),Fi=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),zi=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),O2=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Le=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),R2=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),$2=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),A2=({className:e})=>a.jsxs("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),a.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"})]});function hh(){const e=Yt(),{user:t}=It(),{t:r,isRTL:n,localizedHref:s}=Dt(),[i,o]=w.useState(0),[l,c]=w.useState(0),[u,d]=w.useState(1),[h,f]=w.useState(!1),[m,v]=w.useState(!1),y=[{name:"Detective Dash",type:r("homepage.character.types.foxDetective"),trait:r("homepage.character.traits.cleverCurious"),emoji:"",image:j2,color:"from-amber-500 to-orange-500",bg:"bg-orange-950"},{name:"Shadow Hunter",type:r("homepage.character.types.cyberWolf"),trait:r("homepage.character.traits.braveStrong"),emoji:"",image:k2,color:"from-blue-500 to-cyan-500",bg:"bg-blue-950"},{name:"Eco Rocky",type:r("homepage.character.types.friendlyRaccoon"),trait:r("homepage.character.traits.kindHelpful"),emoji:"",image:b2,color:"from-emerald-500 to-teal-500",bg:"bg-emerald-950"},{name:"Uni the Unicorn",type:r("homepage.character.types.magicalUnicorn"),trait:r("homepage.character.traits.wiseMagical"),emoji:"",image:_2,color:"from-purple-500 to-pink-500",bg:"bg-purple-950"},{name:"Charlie",type:r("homepage.character.types.kingCharles"),trait:r("homepage.character.traits.braveCurious"),emoji:"",image:S2,color:"from-sky-500 to-indigo-500",bg:"bg-indigo-950"},{name:"Jacky",type:r("homepage.character.types.shyDragon"),trait:r("homepage.character.traits.shyGentle"),emoji:"",image:C2,color:"from-violet-500 to-purple-500",bg:"bg-violet-950"}],b=[{icon:a.jsx(P2,{className:"w-6 h-6"}),title:r("homepage.pillars.fusionLab.title"),desc:r("homepage.pillars.fusionLab.description"),color:"from-purple-500 to-pink-500"},{icon:a.jsx(dh,{className:"w-6 h-6"}),title:r("homepage.pillars.plotWorld.title"),desc:r("homepage.pillars.plotWorld.description"),color:"from-blue-500 to-cyan-500"},{icon:a.jsx(A2,{className:"w-6 h-6"}),title:r("homepage.pillars.classroom.title"),desc:r("homepage.pillars.classroom.description"),badge:r("homepage.pillars.classroom.badge"),color:"from-emerald-500 to-teal-500"},{icon:a.jsx(R2,{className:"w-6 h-6"}),title:r("homepage.pillars.playground.title"),desc:r("homepage.pillars.playground.description"),badge:r("homepage.pillars.playground.badge"),color:"from-amber-500 to-orange-500"},{icon:a.jsx($2,{className:"w-6 h-6"}),title:r("homepage.pillars.commRooms.title"),desc:r("homepage.pillars.commRooms.description"),badge:r("homepage.pillars.commRooms.badge"),color:"from-rose-500 to-red-500"}],g=[{quote:r("homepage.testimonials.testimonial1.quote"),author:r("homepage.testimonials.testimonial1.author"),role:r("homepage.testimonials.testimonial1.role"),rating:5},{quote:r("homepage.testimonials.testimonial2.quote"),author:r("homepage.testimonials.testimonial2.author"),role:r("homepage.testimonials.testimonial2.role"),rating:5},{quote:r("homepage.testimonials.testimonial3.quote"),author:r("homepage.testimonials.testimonial3.author"),role:r("homepage.testimonials.testimonial3.role"),rating:5}];return w.useEffect(()=>{const x=setInterval(()=>o(p=>(p+1)%y.length),3e3);return()=>clearInterval(x)},[]),w.useEffect(()=>{if(h)return;const x=setInterval(()=>c(p=>(p+1)%g.length),5e3);return()=>clearInterval(x)},[h,g.length]),a.jsxs("div",{className:"min-h-screen bg-[#0B0A16] text-white selection:bg-purple-500 selection:text-white font-sans overflow-x-hidden",children:[a.jsx(pu,{active:m,duration:4e3}),a.jsx("button",{onClick:()=>{v(!0),setTimeout(()=>v(!1),4e3)},className:"fixed bottom-4 right-4 z-[9998] px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full text-white font-bold text-sm shadow-lg hover:scale-105 transition-transform",children:" Party"}),a.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute top-[20%] right-[-10%] w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-[-10%] left-[20%] w-[400px] h-[400px] bg-pink-600/10 rounded-full blur-[100px]"})]}),a.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-[#0B0A16]/80 backdrop-blur-md border-b border-white/5",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:a.jsx(Vo,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-xl font-bold tracking-tight",children:"Babu Media"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[a.jsx("a",{href:"#pillars",className:"text-gray-400 hover:text-white transition-colors text-sm font-medium",children:r("homepage.nav.pillars")}),a.jsx("a",{href:"#how-it-works",className:"text-gray-400 hover:text-white transition-colors text-sm font-medium",children:r("homepage.nav.howItWorks")}),a.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors text-sm font-medium",children:r("homepage.nav.pricing")}),a.jsxs("button",{onClick:()=>e(s("/library")),className:"text-gray-400 hover:text-white transition-colors text-sm font-medium flex items-center gap-1",children:[a.jsx(dh,{className:"w-4 h-4"}),r("homepage.nav.library")||"Library"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>e(s(t?"/dashboard":"/signup")),className:"group relative bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-2.5 rounded-full text-sm font-semibold transition-all overflow-hidden hover:shadow-xl hover:shadow-purple-500/30 hover:scale-105",children:[a.jsx("span",{className:"absolute inset-0 rounded-full bg-white/20 animate-pulse"}),a.jsx("span",{className:"relative",children:r("homepage.nav.create")})]}),a.jsx("button",{onClick:()=>e(s("/login")),className:"bg-white/10 hover:bg-white/20 border border-white/10 px-5 py-2 rounded-full text-sm font-semibold transition-all",children:r("homepage.nav.login")})]})]})}),a.jsx("section",{className:"relative pt-32 pb-20 px-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:`text-center lg:text-${n?"right":"left"} z-10`,children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-500/10 border border-purple-500/20 rounded-full px-4 py-2 mb-6 animate-fade-in-up",children:[a.jsx(E2,{className:"w-4 h-4 text-purple-400"}),a.jsx("span",{className:"text-purple-200 text-sm font-medium",children:r("homepage.hero.tagline")})]}),a.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight tracking-tight",children:[r("homepage.hero.titleLine1"),a.jsx("br",{}),a.jsx("span",{className:"bg-gradient-to-r from-purple-400 via-pink-400 to-amber-400 bg-clip-text text-transparent",children:r("homepage.hero.titleLine2")})]}),a.jsx("p",{className:"text-xl text-gray-400 mb-8 leading-relaxed max-w-2xl mx-auto lg:mx-0",children:r("homepage.hero.subtitle")}),a.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-center lg:justify-${n?"end":"start"} gap-4`,children:[a.jsxs("button",{onClick:()=>e(s("/signup")),className:"group relative bg-gradient-to-r from-purple-500 to-pink-500 px-8 py-4 rounded-full font-bold text-lg hover:shadow-xl hover:shadow-purple-500/30 transition-all hover:scale-105 flex items-center gap-2",children:[a.jsx("span",{className:"absolute inset-0 rounded-full bg-white/20 animate-pulse"}),a.jsxs("span",{className:"relative flex items-center gap-2",children:[r("homepage.hero.cta"),a.jsx(zi,{className:`w-5 h-5 group-hover:translate-x-1 transition-transform ${n?"rotate-180":""}`})]})]}),a.jsxs("button",{onClick:()=>e(s("/library")),className:"flex items-center gap-2 px-8 py-4 rounded-full font-semibold border border-white/10 hover:bg-white/5 transition-all",children:[a.jsx(T2,{className:"w-5 h-5"}),r("homepage.hero.secondaryCta")]})]}),a.jsxs("p",{className:"mt-6 text-sm text-gray-500",children:[a.jsx("span",{className:"text-emerald-400",children:" 4.9/5"})," ",r("homepage.hero.socialProof")]})]}),a.jsxs("div",{className:`relative z-10 flex justify-center lg:justify-${n?"start":"end"}`,children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${y[i].color} blur-[60px] opacity-30 transition-all duration-1000`}),a.jsxs("div",{className:"relative w-full max-w-md bg-slate-900 rounded-[2.5rem] border-[8px] border-slate-800 shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 bg-slate-800 z-20 flex justify-center items-center rounded-t-[2rem]",children:a.jsx("div",{className:"w-16 h-1 bg-slate-700 rounded-full"})}),a.jsxs("div",{className:`relative pt-6 transition-all duration-1000 ${y[i].bg} flex flex-col min-h-[600px] rounded-[2.5rem] overflow-hidden`,children:[a.jsxs("div",{className:"p-6 pt-10 flex justify-between items-center gap-2",children:[a.jsx("button",{onClick:()=>o(x=>(x-1+y.length)%y.length),className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center transition-all cursor-pointer flex-shrink-0","aria-label":"Previous character",children:a.jsx(Fi,{className:"w-6 h-6"})}),a.jsx("div",{className:"text-base sm:text-lg font-semibold tracking-wide uppercase opacity-70 text-center break-words flex-1 px-2",children:r("homepage.tablet.header")}),a.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(Vo,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-1 sm:px-4 md:px-6 text-center relative overflow-hidden",children:[a.jsxs("div",{className:"relative mb-4 sm:mb-6 md:mb-8 group",children:[a.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full blur-xl animate-pulse"}),a.jsx("div",{className:"relative text-[5rem] sm:text-[8rem] md:text-[10rem] cursor-pointer flex items-center justify-center overflow-hidden",children:y[i].image?a.jsx("img",{src:y[i].image,alt:y[i].name,className:"w-full h-full object-contain rounded-2xl"}):y[i].emoji}),a.jsx("button",{onClick:()=>o(x=>(x-1+y.length)%y.length),className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 w-12 h-12 bg-black/60 hover:bg-black/80 rounded-full flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 backdrop-blur-sm z-10","aria-label":"Previous character",children:a.jsx(Fi,{className:"w-6 h-6 text-white"})}),a.jsx("button",{onClick:()=>o(x=>(x+1)%y.length),className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 w-12 h-12 bg-black/60 hover:bg-black/80 rounded-full flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 backdrop-blur-sm z-10","aria-label":"Next character",children:a.jsx(zi,{className:"w-6 h-6 text-white"})})]}),a.jsx("div",{className:`inline-block px-4 py-1 rounded-full bg-gradient-to-r ${y[i].color} text-sm font-bold mb-4`,children:y[i].type}),a.jsx("div",{className:"w-full max-w-xs",children:a.jsxs("div",{className:"bg-black/20 rounded-xl p-3 backdrop-blur-sm",children:[a.jsx("div",{className:"text-xs opacity-60 uppercase mb-1",children:r("homepage.character.trait")}),a.jsx("div",{className:"font-semibold",children:y[i].trait})]})})]}),a.jsx("div",{className:"p-6 pb-8 bg-gradient-to-t from-black/50 to-transparent rounded-b-[2.5rem]",children:a.jsx("button",{onClick:()=>e(s(t?"/dashboard":"/login")),className:"w-full py-4 bg-white text-black font-bold rounded-xl text-center shadow-lg transform active:scale-95 transition-transform cursor-pointer hover:bg-gray-100",children:r("homepage.cta.bringToLife")})})]})]})]})]})}),a.jsx("section",{className:"border-y border-white/5 bg-white/[0.02]",children:a.jsx("div",{className:"max-w-6xl mx-auto px-6 py-10",children:a.jsxs("div",{className:"grid grid-cols-3 gap-8 text-center divide-x divide-white/10",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"20m"}),a.jsx("div",{className:"text-gray-400 text-sm mt-1",children:r("homepage.stats.bondingTime")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:"3-10"}),a.jsx("div",{className:"text-gray-400 text-sm mt-1",children:r("homepage.stats.imaginationYears")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-emerald-400 to-teal-400 bg-clip-text text-transparent",children:""}),a.jsx("div",{className:"text-gray-400 text-sm mt-1",children:r("homepage.stats.storyPossibilities")})]})]})})}),a.jsx("section",{id:"pillars",className:"py-24 px-6 relative",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-4",children:r("homepage.pillars.title")}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:r("homepage.pillars.subtitle")})]}),a.jsxs("div",{className:"grid md:grid-cols-6 gap-6",children:[a.jsxs("div",{className:"md:col-span-3 bg-gradient-to-br from-purple-900/40 to-slate-900/40 border border-purple-500/20 rounded-3xl p-8 hover:border-purple-500/50 transition-colors group flex flex-col",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${b[0].color} flex items-center justify-center mb-6 group-hover:scale-110 transition-transform`,children:b[0].icon}),a.jsx("h3",{className:"text-2xl font-bold mb-3",children:b[0].title}),a.jsx("p",{className:"text-gray-400 leading-relaxed mb-6",children:b[0].desc}),a.jsx("div",{className:"mt-auto aspect-square rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:a.jsx("img",{src:w2,alt:"Character Fusion Lab UI Preview",className:"w-full h-full object-cover rounded-xl"})})]}),a.jsxs("div",{className:"md:col-span-3 bg-gradient-to-br from-blue-900/40 to-slate-900/40 border border-blue-500/20 rounded-3xl p-8 hover:border-blue-500/50 transition-colors group flex flex-col",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${b[1].color} flex items-center justify-center mb-6 group-hover:scale-110 transition-transform`,children:b[1].icon}),a.jsx("h3",{className:"text-2xl font-bold mb-3",children:b[1].title}),a.jsx("p",{className:"text-gray-400 leading-relaxed mb-6",children:b[1].desc}),a.jsx("div",{className:"mt-auto aspect-square rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:a.jsx("img",{src:N2,alt:"Plot World Story Book Preview",className:"w-full h-full object-cover rounded-xl"})})]}),b.slice(2).map((x,p)=>a.jsxs("div",{className:"md:col-span-2 bg-slate-900/40 border border-white/10 rounded-3xl p-6 hover:bg-slate-800/40 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${x.color} flex items-center justify-center`,children:x.icon}),x.badge&&a.jsx("span",{className:"px-2 py-0.5 bg-gray-600 text-white text-xs font-bold rounded",children:x.badge})]}),a.jsx("h3",{className:"text-lg font-bold mb-2",children:x.title}),a.jsx("p",{className:"text-sm text-gray-400",children:x.desc})]},p))]})]})}),a.jsx("section",{id:"how-it-works",className:"py-24 px-6 bg-white/[0.02]",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsx("div",{className:"text-center mb-16",children:a.jsx("h2",{className:"text-3xl md:text-5xl font-bold",children:r("homepage.howItWorks.title")})}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8 relative",children:[a.jsxs("div",{className:"hidden md:block absolute top-12 left-0 right-0 h-1",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/0 via-purple-500/80 to-purple-500/0 blur-sm"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/0 via-purple-500/60 to-purple-500/0"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500/0 via-pink-500/40 to-pink-500/0 blur-md"})]}),[{step:"01",title:r("homepage.howItWorks.step1.title"),desc:r("homepage.howItWorks.step1.description"),time:r("homepage.howItWorks.step1.time")},{step:"02",title:r("homepage.howItWorks.step2.title"),desc:r("homepage.howItWorks.step2.description"),time:r("homepage.howItWorks.step2.time")},{step:"03",title:r("homepage.howItWorks.step3.title"),desc:r("homepage.howItWorks.step3.description"),time:r("homepage.howItWorks.step3.time")}].map((x,p)=>a.jsxs("div",{className:"relative bg-slate-950 border border-white/10 p-8 rounded-2xl text-center z-10",children:[a.jsxs("div",{className:"w-24 h-8 bg-slate-900 border border-purple-500/30 rounded-full flex items-center justify-center mx-auto mb-6 text-purple-400 font-mono text-sm shadow-lg shadow-purple-900/20",children:[r("homepage.howItWorks.step")," ",x.step]}),a.jsx("h3",{className:"text-xl font-bold mb-3",children:x.title}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:x.desc}),a.jsxs("div",{className:"inline-flex items-center gap-2 text-xs text-gray-500 bg-white/5 px-3 py-1 rounded-lg",children:[a.jsx(O2,{className:"w-3 h-3"})," ",x.time]})]},p))]})]})}),a.jsx("section",{className:"py-12 md:py-16 px-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center relative",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[a.jsx("button",{onClick:()=>c(x=>(x-1+g.length)%g.length),className:`absolute ${n?"right-0":"left-0"} top-1/2 -translate-y-1/2 w-10 h-10 md:w-12 md:h-12 bg-white/5 hover:bg-white/10 border border-white/10 rounded-full flex items-center justify-center transition-all hover:scale-110`,children:a.jsx(Fi,{className:`w-5 h-5 md:w-6 md:h-6 text-white ${n?"rotate-180":""}`})}),a.jsx("button",{onClick:()=>c(x=>(x+1)%g.length),className:`absolute ${n?"left-0":"right-0"} top-1/2 -translate-y-1/2 w-10 h-10 md:w-12 md:h-12 bg-white/5 hover:bg-white/10 border border-white/10 rounded-full flex items-center justify-center transition-all hover:scale-110`,children:a.jsx(zi,{className:`w-5 h-5 md:w-6 md:h-6 text-white ${n?"rotate-180":""}`})}),a.jsxs("div",{className:"px-14 md:px-20",children:[a.jsx("div",{className:"mb-8 flex justify-center gap-1",children:[...Array(5)].map((x,p)=>a.jsx(L2,{className:"w-6 h-6 text-amber-400"},p))}),a.jsxs("h2",{className:"text-2xl md:text-4xl font-medium leading-relaxed mb-8",children:['"',g[l].quote,'"']}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-lg text-white",children:g[l].author}),a.jsx("div",{className:"text-purple-400",children:g[l].role})]}),a.jsx("div",{className:"flex justify-center gap-2 mt-8",children:g.map((x,p)=>a.jsx("button",{onClick:()=>c(p),className:`h-1.5 rounded-full transition-all duration-500 ${l===p?"w-8 bg-purple-500":"w-2 bg-white/20"}`},p))})]})]})}),a.jsx("section",{id:"pricing",className:"py-24 px-6 bg-gradient-to-b from-[#0B0A16] to-[#1a1630]",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-4xl font-bold mb-4",children:r("homepage.pricing.title")}),a.jsx("p",{className:"text-gray-400",children:r("homepage.pricing.subtitle")})]}),a.jsxs("div",{className:"md:hidden relative",children:[a.jsx("div",{className:"overflow-hidden",children:a.jsxs("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(${n?"":"-"}${u*100}%)`},children:[a.jsx("div",{className:"min-w-full flex-shrink-0 px-6",children:a.jsxs("div",{className:`bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-all h-[420px] flex flex-col ${u===0?"scale-100":"scale-95 opacity-60"}`,children:[a.jsx("div",{className:"text-lg font-semibold mb-2",children:r("homepage.pricing.explorer.name")}),a.jsx("div",{className:"text-4xl font-bold mb-6",children:r("homepage.pricing.explorer.price")}),a.jsxs("ul",{className:"space-y-4 mb-8 text-gray-300 flex-grow",children:[a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-gray-500 flex-shrink-0"})," ",r("homepage.pricing.explorer.features.children")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-gray-500 flex-shrink-0"})," ",r("homepage.pricing.explorer.features.characters")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-gray-500 flex-shrink-0"})," ",r("homepage.pricing.explorer.features.stories")]})]}),a.jsx("button",{onClick:()=>e(s("/signup")),className:"w-full py-3 rounded-full border border-white/20 hover:bg-white/10 font-semibold transition-all mt-auto",children:r("homepage.pricing.explorer.cta")})]})}),a.jsx("div",{className:"min-w-full flex-shrink-0 px-6",children:a.jsxs("div",{className:`relative bg-gradient-to-br from-purple-900 to-indigo-900 border border-purple-500 rounded-3xl p-8 shadow-2xl shadow-purple-900/50 transition-all h-[420px] flex flex-col ${u===1?"scale-100":"scale-95 opacity-60"}`,children:[a.jsx("div",{className:`absolute top-0 ${n?"left-0 rounded-br-xl rounded-tl-2xl":"right-0 rounded-bl-xl rounded-tr-2xl"} bg-amber-400 text-black text-xs font-bold px-3 py-1`,children:r("homepage.pricing.creator.badge")}),a.jsx("div",{className:"text-lg font-semibold mb-2 text-purple-200",children:r("homepage.pricing.creator.name")}),a.jsxs("div",{className:"text-4xl font-bold mb-6",children:[r("homepage.pricing.creator.price"),a.jsx("span",{className:"text-lg font-normal text-purple-300",children:r("homepage.pricing.creator.period")})]}),a.jsxs("ul",{className:"space-y-4 mb-8 text-white flex-grow",children:[a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.creator.features.children")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.creator.features.characters")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.creator.features.stories")]})]}),a.jsx("button",{onClick:()=>window.open(ch,"_blank"),className:"w-full py-3 rounded-full bg-white text-purple-900 font-bold hover:shadow-lg hover:shadow-white/20 transition-all mt-auto",children:r("homepage.pricing.creator.cta")})]})}),a.jsx("div",{className:"min-w-full flex-shrink-0 px-6",children:a.jsxs("div",{className:`relative bg-gradient-to-br from-amber-900/40 to-orange-900/40 border border-amber-500/30 rounded-3xl p-8 hover:border-amber-500/50 transition-all shadow-xl shadow-amber-900/30 h-[420px] flex flex-col ${u===2?"scale-100":"scale-95 opacity-60"}`,children:[a.jsx("div",{className:`absolute top-0 ${n?"left-0 rounded-br-xl rounded-tl-2xl":"right-0 rounded-bl-xl rounded-tr-2xl"} bg-amber-500 text-black text-xs font-bold px-3 py-1`,children:r("homepage.pricing.pro.badge")}),a.jsx("div",{className:"text-lg font-semibold mb-2 text-amber-200",children:r("homepage.pricing.pro.name")}),a.jsxs("div",{className:"text-4xl font-bold mb-6",children:[r("homepage.pricing.pro.price"),a.jsx("span",{className:"text-lg font-normal text-amber-300",children:r("homepage.pricing.pro.period")})]}),a.jsxs("ul",{className:"space-y-4 mb-8 text-white flex-grow",children:[a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.pro.features.characters")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.pro.features.stories")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.pro.features.storage")]}),a.jsxs("li",{className:"flex flex-wrap items-center gap-2 text-gray-400",children:[a.jsx("span",{className:"px-2 py-0.5 bg-gray-600 text-white text-xs font-bold rounded flex-shrink-0 self-center",children:r("homepage.pricing.pro.comingSoon")}),a.jsx("span",{className:"flex-1",children:r("homepage.pricing.pro.features.classroom")})]}),a.jsxs("li",{className:"flex flex-wrap items-center gap-2 text-gray-400",children:[a.jsx("span",{className:"px-2 py-0.5 bg-gray-600 text-white text-xs font-bold rounded flex-shrink-0 self-center",children:r("homepage.pricing.pro.comingSoon")}),a.jsx("span",{className:"flex-1",children:r("homepage.pricing.pro.features.commRooms")})]})]}),a.jsx("button",{onClick:()=>window.open(uh,"_blank"),className:"w-full py-3 rounded-full bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold hover:shadow-lg hover:shadow-amber-500/30 transition-all mt-auto",children:r("homepage.pricing.pro.cta")})]})})]})}),a.jsx("button",{onClick:()=>d(x=>(x-1+3)%3),className:`absolute ${n?"right-0 translate-x-4":"left-0 -translate-x-4"} top-1/2 -translate-y-1/2 w-10 h-10 bg-black/60 hover:bg-black/80 rounded-full flex items-center justify-center backdrop-blur-sm z-10`,"aria-label":"Previous pricing",children:a.jsx(Fi,{className:`w-6 h-6 text-white ${n?"rotate-180":""}`})}),a.jsx("button",{onClick:()=>d(x=>(x+1)%3),className:`absolute ${n?"left-0 -translate-x-4":"right-0 translate-x-4"} top-1/2 -translate-y-1/2 w-10 h-10 bg-black/60 hover:bg-black/80 rounded-full flex items-center justify-center backdrop-blur-sm z-10`,"aria-label":"Next pricing",children:a.jsx(zi,{className:`w-6 h-6 text-white ${n?"rotate-180":""}`})}),a.jsx("div",{className:"flex justify-center gap-2 mt-6",children:[0,1,2].map(x=>a.jsx("button",{onClick:()=>d(x),className:`h-2 rounded-full transition-all ${u===x?"w-8 bg-purple-500":"w-2 bg-white/30 hover:bg-white/50"}`,"aria-label":`Go to pricing ${x+1}`},x))})]}),a.jsxs("div",{className:"hidden md:grid md:grid-cols-3 gap-8 items-stretch",children:[a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-colors flex flex-col",children:[a.jsx("div",{className:"text-lg font-semibold mb-2",children:r("homepage.pricing.explorer.name")}),a.jsx("div",{className:"text-4xl font-bold mb-6",children:r("homepage.pricing.explorer.price")}),a.jsxs("ul",{className:"space-y-4 mb-8 text-gray-300 flex-grow",children:[a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-gray-500 flex-shrink-0"})," ",r("homepage.pricing.explorer.features.children")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-gray-500 flex-shrink-0"})," ",r("homepage.pricing.explorer.features.characters")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-gray-500 flex-shrink-0"})," ",r("homepage.pricing.explorer.features.stories")]})]}),a.jsx("button",{onClick:()=>e(s("/signup")),className:"w-full py-3 rounded-full border border-white/20 hover:bg-white/10 font-semibold transition-all mt-auto",children:r("homepage.pricing.explorer.cta")})]}),a.jsxs("div",{className:"relative bg-gradient-to-br from-purple-900 to-indigo-900 border border-purple-500 rounded-3xl p-8 shadow-2xl shadow-purple-900/50 transform md:scale-105 flex flex-col",children:[a.jsx("div",{className:`absolute top-0 ${n?"left-0 rounded-br-xl rounded-tl-2xl":"right-0 rounded-bl-xl rounded-tr-2xl"} bg-amber-400 text-black text-xs font-bold px-3 py-1`,children:r("homepage.pricing.creator.badge")}),a.jsx("div",{className:"text-lg font-semibold mb-2 text-purple-200",children:r("homepage.pricing.creator.name")}),a.jsxs("div",{className:"text-4xl font-bold mb-6",children:[r("homepage.pricing.creator.price"),a.jsx("span",{className:"text-lg font-normal text-purple-300",children:r("homepage.pricing.creator.period")})]}),a.jsxs("ul",{className:"space-y-4 mb-8 text-white flex-grow",children:[a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.creator.features.children")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.creator.features.characters")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.creator.features.stories")]})]}),a.jsx("button",{onClick:()=>window.open(ch,"_blank"),className:"w-full py-3 rounded-full bg-white text-purple-900 font-bold hover:shadow-lg hover:shadow-white/20 transition-all mt-auto",children:r("homepage.pricing.creator.cta")})]}),a.jsxs("div",{className:"relative bg-gradient-to-br from-amber-900/40 to-orange-900/40 border border-amber-500/30 rounded-3xl p-8 hover:border-amber-500/50 transition-colors shadow-xl shadow-amber-900/30 flex flex-col",children:[a.jsx("div",{className:`absolute top-0 ${n?"left-0 rounded-br-xl rounded-tl-2xl":"right-0 rounded-bl-xl rounded-tr-2xl"} bg-amber-500 text-black text-xs font-bold px-3 py-1`,children:r("homepage.pricing.pro.badge")}),a.jsx("div",{className:"text-lg font-semibold mb-2 text-amber-200",children:r("homepage.pricing.pro.name")}),a.jsxs("div",{className:"text-4xl font-bold mb-6",children:[r("homepage.pricing.pro.price"),a.jsx("span",{className:"text-lg font-normal text-amber-300",children:r("homepage.pricing.pro.period")})]}),a.jsxs("ul",{className:"space-y-4 mb-8 text-white flex-grow",children:[a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.pro.features.characters")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.pro.features.stories")]}),a.jsxs("li",{className:"flex gap-3",children:[a.jsx(Le,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"})," ",r("homepage.pricing.pro.features.storage")]}),a.jsxs("li",{className:"flex flex-wrap items-center gap-2 text-gray-400",children:[a.jsx("span",{className:"px-2 py-0.5 bg-gray-600 text-white text-xs font-bold rounded flex-shrink-0 self-center",children:r("homepage.pricing.pro.comingSoon")}),a.jsx("span",{className:"flex-1",children:r("homepage.pricing.pro.features.classroom")})]}),a.jsxs("li",{className:"flex flex-wrap items-center gap-2 text-gray-400",children:[a.jsx("span",{className:"px-2 py-0.5 bg-gray-600 text-white text-xs font-bold rounded flex-shrink-0 self-center",children:r("homepage.pricing.pro.comingSoon")}),a.jsx("span",{className:"flex-1",children:r("homepage.pricing.pro.features.commRooms")})]})]}),a.jsx("button",{onClick:()=>window.open(uh,"_blank"),className:"w-full py-3 rounded-full bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold hover:shadow-lg hover:shadow-amber-500/30 transition-all mt-auto",children:r("homepage.pricing.pro.cta")})]})]})]})}),a.jsx("footer",{className:"border-t border-white/10 bg-black/20 py-12 px-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(Vo,{className:"w-5 h-5"})}),a.jsx("span",{className:"font-bold",children:"Babu Media"})]}),a.jsxs("div",{className:"flex gap-8 text-sm text-gray-400",children:[a.jsx("a",{href:"#",className:"hover:text-white",children:r("homepage.footer.privacy")}),a.jsx("a",{href:"#",className:"hover:text-white",children:r("homepage.footer.terms")}),a.jsx("a",{href:"#",className:"hover:text-white",children:r("homepage.footer.contact")})]}),a.jsx("div",{className:"text-xs text-gray-600",children:r("homepage.footer.copyright")})]})})]})}function fh(){const[e,t]=w.useState(""),[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState(!1),{signIn:c}=It(),u=Yt(),{t:d,isRTL:h,localizedHref:f}=Dt(),m=async v=>{v.preventDefault(),i(""),l(!0);const{error:y}=await c(e,r);y?(i(y.message),l(!1)):u(f("/dashboard"))};return a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center px-4",dir:h?"rtl":"ltr",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(De,{to:f("/"),className:"inline-block",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/30 hover:shadow-xl hover:shadow-purple-500/40 transition-all cursor-pointer",children:a.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})})}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:d("auth.login.heading")}),a.jsx("p",{className:"text-gray-400",children:d("auth.login.subtitle")})]}),a.jsxs("form",{onSubmit:m,className:"bg-white/5 border border-white/10 rounded-2xl p-8",children:[s&&a.jsx("div",{className:`bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-xl mb-6 ${h?"text-right":""}`,children:s}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-2 ${h?"text-right":""}`,children:d("auth.login.emailLabel")}),a.jsx("input",{type:"email",value:e,onChange:v=>t(v.target.value),className:`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors ${h?"text-right":""}`,placeholder:d("auth.login.emailPlaceholder"),dir:"ltr",required:!0})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-2 ${h?"text-right":""}`,children:d("auth.login.passwordLabel")}),a.jsx("input",{type:"password",value:r,onChange:v=>n(v.target.value),className:`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors ${h?"text-right":""}`,placeholder:"",dir:"ltr",required:!0})]}),a.jsx("button",{type:"submit",disabled:o,className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d(o?"auth.login.submitting":"auth.login.submitButton")}),a.jsxs("p",{className:"text-center text-gray-400 mt-6",children:[d("auth.login.noAccount")," ",a.jsx(De,{to:f("/signup"),className:"text-purple-400 hover:text-purple-300 font-medium",children:d("auth.login.signUpLink")})]})]})]})})}function mh(){const[e,t]=w.useState(""),[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState(""),[c,u]=w.useState(""),[d,h]=w.useState(!1),[f,m]=w.useState(!1),{signUp:v}=It(),{t:y,isRTL:b,localizedHref:g}=Dt(),x=async p=>{if(p.preventDefault(),u(""),s!==o){u(y("auth.signup.errors.passwordMismatch"));return}if(s.length<6){u(y("auth.signup.errors.passwordTooShort"));return}m(!0);const{error:j}=await v(r,s,e);j?(u(j.message),m(!1)):(h(!0),m(!1))};return d?a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center px-4 py-8",dir:b?"rtl":"ltr",children:a.jsxs("div",{className:"w-full max-w-md text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-emerald-500/30",children:a.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:y("auth.signup.checkEmail.title")}),a.jsxs("p",{className:"text-gray-400 mb-8 leading-relaxed",children:[y("auth.signup.checkEmail.message")," ",a.jsx("span",{className:"text-purple-400 font-medium",dir:"ltr",children:r})]}),a.jsx(De,{to:g("/login"),className:"inline-block px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:y("auth.signup.checkEmail.goToLogin")})]})}):a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center px-4 py-8",dir:b?"rtl":"ltr",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(De,{to:g("/"),className:"inline-block",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/30 hover:shadow-xl hover:shadow-purple-500/40 transition-all cursor-pointer",children:a.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})})}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:y("auth.signup.heading")}),a.jsx("p",{className:"text-gray-400",children:y("auth.signup.subtitle")})]}),a.jsxs("form",{onSubmit:x,className:"bg-white/5 border border-white/10 rounded-2xl p-8",children:[c&&a.jsx("div",{className:`bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-xl mb-6 ${b?"text-right":""}`,children:c}),a.jsxs("div",{className:"mb-5",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-2 ${b?"text-right":""}`,children:y("auth.signup.nameLabel")}),a.jsx("input",{type:"text",value:e,onChange:p=>t(p.target.value),className:`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors ${b?"text-right":""}`,placeholder:y("auth.signup.namePlaceholder"),required:!0})]}),a.jsxs("div",{className:"mb-5",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-2 ${b?"text-right":""}`,children:y("auth.signup.emailLabel")}),a.jsx("input",{type:"email",value:r,onChange:p=>n(p.target.value),className:`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors ${b?"text-right":""}`,placeholder:y("auth.signup.emailPlaceholder"),dir:"ltr",required:!0})]}),a.jsxs("div",{className:"mb-5",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-2 ${b?"text-right":""}`,children:y("auth.signup.passwordLabel")}),a.jsx("input",{type:"password",value:s,onChange:p=>i(p.target.value),className:`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors ${b?"text-right":""}`,placeholder:"",dir:"ltr",required:!0})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-2 ${b?"text-right":""}`,children:y("auth.signup.confirmPasswordLabel")}),a.jsx("input",{type:"password",value:o,onChange:p=>l(p.target.value),className:`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors ${b?"text-right":""}`,placeholder:"",dir:"ltr",required:!0})]}),a.jsx("button",{type:"submit",disabled:f,className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:y(f?"auth.signup.submitting":"auth.signup.submitButton")}),a.jsxs("p",{className:"text-center text-gray-400 mt-6",children:[y("auth.signup.hasAccount")," ",a.jsx(De,{to:g("/login"),className:"text-purple-400 hover:text-purple-300 font-medium",children:y("auth.signup.signInLink")})]})]})]})})}const hg={free:{children:1,characters:2,stories:1,period:"lifetime"},creator:{children:1/0,characters:5,stories:10,characterPeriod:"monthly",storyPeriod:"weekly"},pro:{children:1/0,characters:1/0,stories:1/0,characterPeriod:"lifetime",storyPeriod:"lifetime"}},fg=e=>{const t=new Date;if(e==="lifetime")return new Date(0);if(e==="monthly")return new Date(t.getFullYear(),t.getMonth(),1);if(e==="weekly"){const r=t.getDay(),n=t.getDate()-r+(r===0?-6:1);return new Date(t.getFullYear(),t.getMonth(),n)}return t},I2=(e,t)=>{if(e==="lifetime")return null;const r=new Date(t);if(e==="monthly")return new Date(r.getFullYear(),r.getMonth()+1,0,23,59,59);if(e==="weekly"){const n=new Date(r);return n.setDate(r.getDate()+6),n.setHours(23,59,59),n}return null},mg=async e=>{const{data:t,error:r}=await G.from("subscriptions").select("*").eq("user_id",e).single();if(r&&r.code!=="PGRST116")return console.error("Error fetching subscription:",r),{tier:"free",status:"active"};if(!t){const{data:n,error:s}=await G.from("subscriptions").insert({user_id:e,tier:"free",status:"active"}).select().single();return s?(console.error("Error creating subscription:",s),{tier:"free",status:"active"}):n}return t},D2=async e=>{const{data:t,error:r}=await G.from("dev_bypass").select("bypass_enabled").eq("user_id",e).single();return r||!t?!1:t.bypass_enabled===!0},ph=async(e,t,r)=>{const n=fg(r),{data:s,error:i}=await G.from("usage_tracking").select("count").eq("user_id",e).eq("resource_type",t).eq("period_type",r).eq("period_start",n.toISOString()).single();return i&&i.code!=="PGRST116"?(console.error("Error fetching usage:",i),0):(s==null?void 0:s.count)||0},B2=async(e,t,r)=>{const n=fg(r),s=I2(r,n),{data:i}=await G.from("usage_tracking").select("id, count").eq("user_id",e).eq("resource_type",t).eq("period_type",r).eq("period_start",n.toISOString()).single();if(i){const{error:o}=await G.from("usage_tracking").update({count:i.count+1}).eq("id",i.id);if(o)return console.error("Error updating usage:",o),!1}else{const{error:o}=await G.from("usage_tracking").insert({user_id:e,resource_type:t,period_type:r,period_start:n.toISOString(),period_end:(s==null?void 0:s.toISOString())||null,count:1});if(o)return console.error("Error inserting usage:",o),!1}return!0},Da=async(e,t,r=null)=>({allowed:!0,reason:"Payment wall disabled"}),pg=async(e,t)=>{const n=(await mg(e)).tier||"free",s=hg[n];let i="lifetime";return(n==="creator"||n==="pro")&&(t==="character"?i=s.characterPeriod:t==="story"&&(i=s.storyPeriod)),await B2(e,t,i)},ei=async e=>{const t=await mg(e),r=t.tier||"free",n=hg[r],s=await D2(e),{count:i}=await G.from("children").select("*",{count:"exact",head:!0}).eq("user_id",e),o=r==="free"?"lifetime":n.characterPeriod;let l=0;if(o==="lifetime"){const{data:d}=await G.from("children").select("id").eq("user_id",e);if(d&&d.length>0){const h=d.map(m=>m.id),{count:f}=await G.from("characters").select("*",{count:"exact",head:!0}).in("child_id",h);l=f||0}}else l=await ph(e,"character",o);const c=r==="free"?"lifetime":n.storyPeriod;let u=0;if(c==="lifetime"){const{data:d}=await G.from("children").select("id").eq("user_id",e);if(d&&d.length>0){const h=d.map(m=>m.id),{count:f}=await G.from("stories").select("*",{count:"exact",head:!0}).in("child_id",h);u=f||0}}else u=await ph(e,"story",c);return{tier:r,bypass:s,subscription:t,children:{current:i||0,limit:n.children,remaining:Math.max(0,n.children-(i||0))},characters:{current:l,limit:n.characters,remaining:Math.max(0,n.characters-l),period:o},stories:{current:u,limit:n.stories,remaining:Math.max(0,n.stories-u),period:c}}},M2=["Tom@ppltok.com","tom@ppltok.com"],gg=async(e,t)=>M2.includes(t)?(await gh(e,"Dev email list"),!0):typeof window<"u"&&localStorage.getItem("babu_dev_mode")==="enabled"?(await gh(e,"Local dev mode"),!0):!1,gh=async(e,t="Manual override")=>{const{error:r}=await G.from("dev_bypass").upsert({user_id:e,bypass_enabled:!0,bypass_reason:t,updated_at:new Date().toISOString()},{onConflict:"user_id"});return r?(console.error("Error enabling dev bypass:",r),!1):(console.log("Dev bypass enabled for user:",e),!0)};typeof window<"u"&&(window.toggleDevMode=()=>localStorage.getItem("babu_dev_mode")==="enabled"?(localStorage.removeItem("babu_dev_mode"),console.log("Dev mode DISABLED - refresh the page"),!1):(localStorage.setItem("babu_dev_mode","enabled"),console.log("Dev mode ENABLED - refresh the page"),!0),window.enableDevMode=()=>(localStorage.setItem("babu_dev_mode","enabled"),console.log("Dev mode ENABLED - refresh the page"),!0),window.disableDevMode=()=>(localStorage.removeItem("babu_dev_mode"),console.log("Dev mode DISABLED - refresh the page"),!1),window.checkDevMode=()=>{const e=localStorage.getItem("babu_dev_mode")==="enabled";return console.log("Dev mode:",e?"ENABLED":"DISABLED"),e});const U2="https://babumedia.lemonsqueezy.com/buy/870ca6c4-80e6-440f-8bb4-a795be72ce39",W2="https://babumedia.lemonsqueezy.com/buy/a1a0c205-5ab5-49d4-b628-c2f3d43101b3";function gu({isOpen:e,onClose:t,title:r="Upgrade Your Plan",reason:n="You've reached your free tier limit.",usage:s=null,userEmail:i=""}){const[o,l]=w.useState(null),[c,u]=w.useState("creator");if(!e)return null;const d=h=>{l(h);const f=h==="pro"?W2:U2,m=i?`${f}?checkout[email]=${encodeURIComponent(i)}`:f;window.open(m,"_blank"),l(null)};return a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-white/10 rounded-3xl p-6 sm:p-8 max-w-2xl w-full shadow-2xl my-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg shadow-purple-500/30",children:a.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:r}),a.jsx("p",{className:"text-gray-400",children:n})]}),s&&a.jsxs("div",{className:"bg-white/5 rounded-xl p-4 mb-6 border border-white/10",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3 uppercase tracking-wide",children:"Your Current Usage"}),a.jsxs("div",{className:"space-y-2",children:[s.children&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-300",children:"Children Profiles"}),a.jsxs("span",{className:`font-semibold ${s.children.current>=s.children.limit?"text-red-400":"text-green-400"}`,children:[s.children.current,"/",s.children.limit===1/0?"":s.children.limit]})]}),s.characters&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-gray-300",children:["Characters ",s.characters.period!=="lifetime"?`(this ${s.characters.period==="monthly"?"month":"week"})`:""]}),a.jsxs("span",{className:`font-semibold ${s.characters.current>=s.characters.limit?"text-red-400":"text-green-400"}`,children:[s.characters.current,"/",s.characters.limit]})]}),s.stories&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-gray-300",children:["Stories ",s.stories.period!=="lifetime"?`(this ${s.stories.period==="weekly"?"week":"month"})`:""]}),a.jsxs("span",{className:`font-semibold ${s.stories.current>=s.stories.limit?"text-red-400":"text-green-400"}`,children:[s.stories.current,"/",s.stories.limit]})]})]})]}),a.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 mb-6",children:[a.jsxs("button",{onClick:()=>u("creator"),className:`relative p-4 rounded-xl border-2 transition-all text-left ${c==="creator"?"border-purple-500 bg-purple-500/10":"border-white/10 hover:border-white/30 bg-white/5"}`,children:[c==="creator"&&a.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsx("div",{className:"text-purple-400 font-bold text-lg mb-1",children:"Creator"}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-400",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Unlimited children"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"5 characters/month"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"10 stories/week"]})]})]}),a.jsxs("button",{onClick:()=>u("pro"),className:`relative p-4 rounded-xl border-2 transition-all text-left ${c==="pro"?"border-amber-500 bg-amber-500/10":"border-white/10 hover:border-white/30 bg-white/5"}`,children:[c==="pro"&&a.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-amber-400 font-bold text-lg",children:"Pro"}),a.jsx("span",{className:"px-2 py-0.5 bg-amber-500/20 text-amber-400 text-xs font-semibold rounded-full",children:"BEST VALUE"})]}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-400",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Unlimited Characters"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Unlimited Stories"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Unlimited Storage"]})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("button",{onClick:()=>d(c),disabled:o,className:`w-full py-4 rounded-xl font-bold text-white transition-all flex items-center justify-center gap-2 ${c==="pro"?"bg-gradient-to-r from-amber-500 to-orange-500 hover:shadow-lg hover:shadow-amber-500/30":"bg-gradient-to-r from-purple-500 to-pink-500 hover:shadow-lg hover:shadow-purple-500/30"}`,children:o?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Upgrade to ",c==="pro"?"Pro":"Creator"]})}),a.jsx("button",{onClick:t,className:"w-full py-3 border border-white/20 rounded-xl font-semibold text-gray-400 hover:bg-white/5 hover:text-white transition-all",children:"Maybe Later"})]}),a.jsxs("p",{className:"text-center text-xs text-gray-500 mt-4 flex items-center justify-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Secure payment powered by Lemon Squeezy"]})]})})}const F2=["","","","","","","","","","","",""];function xh(){const{user:e}=It(),t=Yt(),{t:r,isRTL:n,localizedHref:s}=Dt(),[i,o]=w.useState(""),[l,c]=w.useState(""),[u,d]=w.useState(""),[h,f]=w.useState(""),[m,v]=w.useState(!1),[y,b]=w.useState(!1),[g,x]=w.useState(null),[p,j]=w.useState(!0);w.useEffect(()=>{(async()=>{if(!e)return;if(await gg(e.id,e.email),!(await Da(e.id)).allowed){const C=await ei(e.id);x(C),b(!0)}j(!1)})()},[e]);const _=async N=>{if(N.preventDefault(),f(""),!(await Da(e.id)).allowed){const L=await ei(e.id);x(L),b(!0);return}if(!i.trim()){f(r("dashboard.addChildPage.errors.nameRequired"));return}const C=parseInt(l);if(!l||C<1||C>18){f(r("dashboard.addChildPage.errors.invalidAge"));return}v(!0);const{error:A}=await G.from("children").insert({parent_id:e.id,name:i.trim(),age:C,avatar_emoji:u});A?(f(A.message),v(!1)):t(s("/dashboard"))};return p?a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[a.jsx(gu,{isOpen:y,onClose:()=>{b(!1),t(s("/dashboard"))},title:r("dashboard.paymentWall.childLimitTitle"),reason:r("dashboard.paymentWall.childLimitReason"),usage:g,userEmail:e==null?void 0:e.email}),a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center px-4",dir:n?"rtl":"ltr",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("button",{onClick:()=>t(s("/dashboard")),className:`flex items-center gap-2 text-gray-400 hover:text-white mb-8 transition-colors ${n?"flex-row-reverse":""}`,children:[a.jsx("svg",{className:`w-5 h-5 ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),r("dashboard.addChildPage.backToDashboard")]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:u}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:r("dashboard.addChildPage.title")}),a.jsx("p",{className:"text-gray-400",children:r("dashboard.addChildPage.subtitle")})]}),a.jsxs("form",{onSubmit:_,className:"bg-white/5 border border-white/10 rounded-2xl p-8",children:[h&&a.jsx("div",{className:`bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-xl mb-6 ${n?"text-right":""}`,children:h}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-2 ${n?"text-right":""}`,children:r("dashboard.addChildPage.nameLabel")}),a.jsx("input",{type:"text",value:i,onChange:N=>o(N.target.value),className:`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors ${n?"text-right":""}`,placeholder:r("dashboard.addChildPage.namePlaceholder"),required:!0})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-2 ${n?"text-right":""}`,children:r("dashboard.addChildPage.ageLabel")}),a.jsx("input",{type:"number",value:l,onChange:N=>c(N.target.value),min:"1",max:"18",className:`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors ${n?"text-right":""}`,placeholder:r("dashboard.addChildPage.agePlaceholder"),dir:"ltr",required:!0})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:`block text-sm font-medium text-gray-300 mb-3 ${n?"text-right":""}`,children:r("dashboard.addChildPage.chooseAvatar")}),a.jsx("div",{className:"grid grid-cols-6 gap-2",children:F2.map(N=>a.jsx("button",{type:"button",onClick:()=>d(N),className:`text-3xl p-2 rounded-xl transition-all ${u===N?"bg-purple-500/30 border-2 border-purple-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:N},N))})]}),a.jsx("button",{type:"submit",disabled:m,className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:r(m?"dashboard.addChildPage.creating":"dashboard.addChildPage.createButton")})]})]})})]})}const Ir="/Babu-Media/",z2=`${Ir}art-styles/pixar-style.jpg`,H2=`${Ir}art-styles/dreamworks-style.jpg`,V2=`${Ir}art-styles/ghibli-style.jpg`,q2=`${Ir}art-styles/Cartoon Network.jpg`,K2=`${Ir}art-styles/Nickelodeon.jpeg`,G2=`${Ir}art-styles/Anime Style.jpeg`,J2=`${Ir}art-styles/Disney Classic.jpg`,Y2=`${Ir}art-styles/Illumination.jpeg`,qo=[{id:"fox",emoji:"",name:"Fox"},{id:"wolf",emoji:"",name:"Wolf"},{id:"raccoon",emoji:"",name:"Raccoon"},{id:"unicorn",emoji:"",name:"Unicorn"},{id:"lion",emoji:"",name:"Lion"},{id:"owl",emoji:"",name:"Owl"},{id:"dragon",emoji:"",name:"Dragon"},{id:"bunny",emoji:"",name:"Bunny"},{id:"cat",emoji:"",name:"Cat"},{id:"dog",emoji:"",name:"Dog"},{id:"bear",emoji:"",name:"Bear"},{id:"panda",emoji:"",name:"Panda"},{id:"custom",emoji:"",name:"Custom",isCustom:!0}],Ko=[{id:"pixar",name:"Pixar/Disney",shows:"Toy Story, Finding Nemo, Coco",color:"from-blue-500 to-cyan-500",emoji:"",image:z2},{id:"dreamworks",name:"DreamWorks",shows:"Shrek, Kung Fu Panda, How to Train Your Dragon",color:"from-green-500 to-emerald-500",emoji:"",image:H2},{id:"ghibli",name:"Studio Ghibli",shows:"Totoro, Spirited Away, Ponyo",color:"from-sky-400 to-blue-500",emoji:"",image:V2},{id:"cartoon-network",name:"Cartoon Network",shows:"Adventure Time, Powerpuff Girls, Steven Universe",color:"from-pink-500 to-rose-500",emoji:"",image:q2},{id:"nickelodeon",name:"Nickelodeon",shows:"SpongeBob, Paw Patrol, Dora",color:"from-orange-500 to-amber-500",emoji:"",image:K2},{id:"anime",name:"Anime Style",shows:"Pokemon, Naruto, Dragon Ball",color:"from-purple-500 to-violet-500",emoji:"",image:G2},{id:"disney-classic",name:"Disney Classic",shows:"Lion King, Aladdin, Little Mermaid",color:"from-yellow-500 to-orange-500",emoji:"",image:J2},{id:"illumination",name:"Illumination",shows:"Minions, Sing, Secret Life of Pets",color:"from-yellow-400 to-yellow-600",emoji:"",image:Y2}],Go=[{id:"brave",label:"Brave",emoji:""},{id:"curious",label:"Curious",emoji:""},{id:"kind",label:"Kind",emoji:""},{id:"clever",label:"Clever",emoji:""},{id:"playful",label:"Playful",emoji:""},{id:"wise",label:"Wise",emoji:""},{id:"gentle",label:"Gentle",emoji:""},{id:"bold",label:"Bold",emoji:""},{id:"creative",label:"Creative",emoji:""},{id:"loyal",label:"Loyal",emoji:""},{id:"funny",label:"Funny",emoji:""},{id:"adventurous",label:"Adventurous",emoji:""},{id:"shy",label:"Shy",emoji:""},{id:"confident",label:"Confident",emoji:""},{id:"caring",label:"Caring",emoji:""},{id:"magical",label:"Magical",emoji:""}],vh=[{id:"superhero",label:"Superhero Cape",emoji:"",desc:"A flowing superhero cape with a bold emblem"},{id:"detective",label:"Detective",emoji:"",desc:"Trench coat with a magnifying glass"},{id:"princess",label:"Princess/Prince",emoji:"",desc:"Royal gown or suit with a crown"},{id:"pirate",label:"Pirate",emoji:"",desc:"Pirate hat, eye patch, and adventure gear"},{id:"astronaut",label:"Astronaut",emoji:"",desc:"Space suit ready for cosmic adventures"},{id:"wizard",label:"Wizard/Witch",emoji:"",desc:"Magical robes with a pointed hat"},{id:"sports",label:"Sports Star",emoji:"",desc:"Athletic jersey and sneakers"},{id:"artist",label:"Artist",emoji:"",desc:"Colorful smock with a beret"},{id:"scientist",label:"Scientist",emoji:"",desc:"Lab coat with goggles"},{id:"ninja",label:"Ninja",emoji:"",desc:"Stealthy ninja outfit"},{id:"fairy",label:"Fairy",emoji:"",desc:"Sparkly wings and magical outfit"},{id:"casual",label:"Casual",emoji:"",desc:"Comfortable everyday clothes"}];function yh(){var fe;const{childId:e}=Qm(),t=Yt(),{localizedHref:r}=Dt(),[n,s]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(1),[h,f]=w.useState(""),[m,v]=w.useState(null),[y,b]=w.useState(""),[g,x]=w.useState(null),[p,j]=w.useState([]),[_,N]=w.useState(null),[S,C]=w.useState(""),[A,L]=w.useState(!1),[B,z]=w.useState(null),[Y,ae]=w.useState(null),[ce,K]=w.useState(!1);w.useEffect(()=>{F()},[e]);const F=async()=>{const{data:T}=await G.from("children").select("*").eq("id",e).single();T&&s(T);const{data:O}=await G.from("characters").select("*").eq("child_id",e).order("created_at",{ascending:!1});O&&o(O),c(!1)},E=T=>{j(O=>O.includes(T)?O.filter(me=>me!==T):O.length<4?[...O,T]:O)},I=()=>{if(S.trim())return S.trim();if(_){const T=vh.find(O=>O.id===_);return(T==null?void 0:T.desc)||""}return""},M=()=>m!=null&&m.isCustom&&y.trim()?y.trim():(m==null?void 0:m.name)||"",J=()=>m?m.isCustom?y.trim().length>0:!0:!1,W=async()=>{var jt;if(!h||!J()||!g||p.length===0)return;L(!0);const T=M(),O=p.map(Ue=>{var Bt;return(Bt=Go.find(nt=>nt.id===Ue))==null?void 0:Bt.label}).join(", "),me=((jt=Ko.find(Ue=>Ue.id===g))==null?void 0:jt.name)||g,rt=I(),X=`A ${me} style illustration of a cute anthropomorphic ${T.toLowerCase()} character named ${h}. The character has these personality traits: ${O}. ${rt?`Wearing ${rt}.`:""} Child-friendly, colorful, expressive face, full body shot, white background, high quality character design.`,Ve=m.isCustom?`custom:${T}`:m.id;try{const{data:Ue,error:Bt}=await G.from("characters").insert({child_id:e,name:h,animal_type:Ve,personality_trait:O,visual_style:g,outfit_description:rt,custom_prompt:X,image_url:null}).select().single();if(Bt){console.error("Error saving character:",Bt),L(!1);return}z(Ue),o([Ue,...i]);const nt=await G.functions.invoke("generate-character",{body:{characterId:Ue.id,prompt:X,animalType:T,styleName:me}});if(nt.error){console.error("Edge function error:",nt.error),d(5),L(!1);return}const Mt=nt.data;if(Mt.success&&Mt.imageUrl){const dr={...Ue,image_url:Mt.imageUrl};z(dr),o(rs=>rs.map(hr=>hr.id===Ue.id?dr:hr))}d(5)}catch(Ue){console.error("Generation error:",Ue)}L(!1)},V=async T=>{K(!0);const{error:O}=await G.from("characters").delete().eq("id",T);O||o(i.filter(me=>me.id!==T)),ae(null),K(!1)},ee=()=>{d(1),f(""),v(null),b(""),x(null),j([]),N(null),C(""),z(null)};return l?a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-[#0B0A16] text-white",children:[Y&&a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-sm w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Delete Character?"}),a.jsxs("p",{className:"text-gray-400 mb-6",children:["Are you sure you want to delete ",a.jsx("span",{className:"text-white font-medium",children:Y.name}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>ae(null),disabled:ce,className:"flex-1 py-3 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:"Cancel"}),a.jsx("button",{onClick:()=>V(Y.id),disabled:ce,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:ce?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Delete"})]})]})}),a.jsx("header",{className:"border-b border-white/10 bg-white/[0.02]",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>t(r("/dashboard")),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Back"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:n==null?void 0:n.avatar_emoji}),a.jsxs("span",{className:"font-semibold",children:[n==null?void 0:n.name,"'s Fusion Lab"]})]}),a.jsx("div",{className:"w-20"})]})}),a.jsx("div",{className:"max-w-6xl mx-auto px-6 py-8",children:a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:""}),"Create New Character"]}),a.jsx("div",{className:"flex items-center gap-2 mb-8",children:[1,2,3,4].map(T=>a.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${T<=u?"bg-purple-500":"bg-white/10"}`},T))}),u===1&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Name"}),a.jsx("input",{type:"text",value:h,onChange:T=>f(T.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors",placeholder:"Detective Dash, Captain Whiskers..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Choose Animal Type"}),a.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-3",children:qo.map(T=>a.jsxs("button",{onClick:()=>{v(T),T.isCustom||b("")},className:`p-3 rounded-xl text-center transition-all ${(m==null?void 0:m.id)===T.id?"bg-purple-500/30 border-2 border-purple-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:[a.jsx("div",{className:"text-3xl mb-1",children:T.emoji}),a.jsx("div",{className:"text-xs font-medium",children:T.name})]},T.id))}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-white/10"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-[#0B0A16] text-gray-500",children:"or type your own"})})]}),a.jsx("input",{type:"text",value:y,onChange:T=>{if(b(T.target.value),T.target.value.trim()){const O=qo.find(me=>me.isCustom);O&&v(O)}},className:"w-full mt-3 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors",placeholder:"Border Collie, Dinosaur, Phoenix, Penguin..."}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Type any specific animal breed or creature - real or fantasy!"})]})]}),a.jsx("button",{onClick:()=>d(2),disabled:!h||!J(),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:"Next: Choose Style"})]}),u===2&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Choose Your Favorite Art Style"}),a.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Pick the style that reminds you of your favorite shows!"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Ko.map(T=>a.jsx("button",{onClick:()=>x(T.id),className:`rounded-xl text-left transition-all overflow-hidden ${g===T.id?"ring-2 ring-purple-500 ring-offset-2 ring-offset-[#0B0A16]":"hover:bg-white/10"}`,children:a.jsxs("div",{className:"flex",children:[a.jsxs("div",{className:`w-20 h-20 sm:w-24 sm:h-24 flex-shrink-0 bg-gradient-to-br ${T.color} overflow-hidden flex items-center justify-center relative`,children:[a.jsx("span",{className:"text-4xl sm:text-5xl absolute",children:T.emoji}),a.jsx("img",{src:T.image,alt:T.name,className:"w-full h-full object-cover relative z-10",loading:"lazy",onError:O=>{O.target.style.display="none"}})]}),a.jsxs("div",{className:`flex-1 p-3 bg-white/5 ${g===T.id?"bg-purple-500/20":""}`,children:[a.jsx("div",{className:`text-sm font-bold mb-1 bg-gradient-to-r ${T.color} bg-clip-text text-transparent`,children:T.name}),a.jsx("div",{className:"text-xs text-gray-400 line-clamp-2",children:T.shows})]})]})},T.id))})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>d(1),className:"flex-1 py-4 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:"Back"}),a.jsx("button",{onClick:()=>d(3),disabled:!g,className:"flex-1 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:"Next: Personality"})]})]}),u===3&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Choose Personality Traits"}),a.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Select up to 4 traits that describe your character"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Go.map(T=>a.jsxs("button",{onClick:()=>E(T.id),className:`py-3 px-3 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 ${p.includes(T.id)?"bg-purple-500 text-white":"bg-white/5 hover:bg-white/10"}`,children:[a.jsx("span",{children:T.emoji}),a.jsx("span",{children:T.label})]},T.id))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",p.length,"/4"]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>d(2),className:"flex-1 py-4 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:"Back"}),a.jsx("button",{onClick:()=>d(4),disabled:p.length===0,className:"flex-1 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:"Next: Outfit"})]})]}),u===4&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Choose an Outfit"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mb-4",children:vh.map(T=>a.jsx("button",{onClick:()=>{N(T.id),C("")},className:`p-3 rounded-xl text-left transition-all ${_===T.id&&!S?"bg-purple-500/30 border-2 border-purple-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-xl",children:T.emoji}),a.jsx("span",{className:"text-sm font-medium",children:T.label})]})},T.id))}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-white/10"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-[#0B0A16] text-gray-500",children:"or describe your own"})})]}),a.jsx("input",{type:"text",value:S,onChange:T=>{C(T.target.value),T.target.value&&N(null)},className:"w-full mt-4 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors",placeholder:"Describe a custom outfit..."})]}),a.jsxs("div",{className:"bg-black/20 rounded-xl p-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"Character Preview"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl",children:m==null?void 0:m.emoji}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:M()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold",children:h}),a.jsx("div",{className:"text-gray-400 text-sm",children:p.map(T=>{var O;return(O=Go.find(me=>me.id===T))==null?void 0:O.label}).join(", ")}),a.jsxs("div",{className:"text-purple-400 text-sm mt-1",children:[(fe=Ko.find(T=>T.id===g))==null?void 0:fe.name," Style"]}),I()&&a.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:["Outfit: ",I()]})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>d(3),className:"flex-1 py-4 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:"Back"}),a.jsx("button",{onClick:W,disabled:A,className:"flex-1 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/30 transition-all flex items-center justify-center gap-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""})," Bring to Life!"]})})]})]}),u===5&&B&&a.jsxs("div",{className:"text-center py-8",children:[B.image_url?a.jsx("div",{className:"relative w-64 h-64 mx-auto mb-6 rounded-2xl overflow-hidden shadow-2xl shadow-purple-500/30",children:a.jsx("img",{src:B.image_url,alt:B.name,className:"w-full h-full object-cover"})}):a.jsx("div",{className:"text-8xl mb-6",children:m==null?void 0:m.emoji}),a.jsxs("h3",{className:"text-2xl font-bold mb-2",children:[B.name," is Ready!"]}),a.jsx("p",{className:"text-gray-400 mb-8",children:B.image_url?"Your character has been created with AI magic!":"Your character has been saved. Image generation may take a moment."}),a.jsx("button",{onClick:ee,className:"px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:"Create Another Character"})]})]})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," ",n==null?void 0:n.name,"'s Characters"]}),i.length===0?a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 text-center text-gray-400",children:"No characters yet. Create your first one!"}):a.jsx("div",{className:"space-y-3",children:i.map(T=>{const O=qo.find(me=>me.id===T.animal_type);return a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 hover:bg-white/10 transition-colors group",children:a.jsxs("div",{className:"flex items-center gap-3",children:[T.image_url?a.jsx("img",{src:T.image_url,alt:T.name,className:"w-14 h-14 rounded-lg object-cover"}):a.jsx("div",{className:"text-4xl",children:(O==null?void 0:O.emoji)||""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-semibold truncate",children:T.name}),a.jsx("div",{className:"text-sm text-gray-400 truncate",children:T.personality_trait})]}),a.jsx("button",{onClick:()=>ae(T),className:"opacity-0 group-hover:opacity-100 p-2 text-gray-400 hover:text-red-400 transition-all",title:"Delete character",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},T.id)})})]})]})})]})}const Q2={space:[{emoji:"",fact:"A day on Venus is longer than a year on Venus!"},{emoji:"",fact:"There are more stars in space than grains of sand on Earth!"},{emoji:"",fact:"The Moon is slowly drifting away from Earth - about 4cm per year!"},{emoji:"",fact:"Saturn would float if you could put it in a giant bathtub!"},{emoji:"",fact:"Astronauts grow taller in space because there's no gravity!"},{emoji:"",fact:"The Sun is so big that 1 million Earths could fit inside it!"}],underwater:[{emoji:"",fact:"Octopuses have three hearts and blue blood!"},{emoji:"",fact:"Dolphins sleep with one eye open!"},{emoji:"",fact:"The giant squid has eyes as big as dinner plates!"},{emoji:"",fact:"Clownfish can change from male to female!"},{emoji:"",fact:"Blue whales are the largest animals that ever lived - even bigger than dinosaurs!"},{emoji:"",fact:"Sharks have been around longer than trees!"}],forest:[{emoji:"",fact:"The oldest tree is over 5,000 years old!"},{emoji:"",fact:"Foxes use the Earth's magnetic field to hunt!"},{emoji:"",fact:"Owls can rotate their heads almost all the way around!"},{emoji:"",fact:"Squirrels plant thousands of trees every year by forgetting where they buried nuts!"},{emoji:"",fact:"The largest living thing on Earth is a honey fungus in Oregon!"},{emoji:"",fact:"Butterflies taste with their feet!"}],castle:[{emoji:"",fact:"Some castles had secret tunnels for escape!"},{emoji:"",fact:"Medieval knights started training at just 7 years old!"},{emoji:"",fact:"Dragon legends exist in almost every culture around the world!"},{emoji:"",fact:"A knight's armor could weigh as much as a 7-year-old child!"},{emoji:"",fact:"Castle builders made spiral staircases go clockwise to give defenders an advantage!"},{emoji:"",fact:"Lions became royal symbols because of their bravery and strength!"}],dinosaurs:[{emoji:"",fact:"Some dinosaurs were as small as chickens!"},{emoji:"",fact:"T-Rex couldn't run - it could only fast-walk!"},{emoji:"",fact:"The biggest dinosaur eggs were the size of a football!"},{emoji:"",fact:"Dinosaurs lived on Earth for over 160 million years!"},{emoji:"",fact:"We've only discovered about 1,000 dinosaur species - there were probably many more!"},{emoji:"",fact:"Birds are actually living dinosaurs!"}],pirates:[{emoji:"",fact:"Pirates had their own code of rules called the Pirate Code!"},{emoji:"",fact:"Pirates kept parrots as pets because they could sell them for lots of money!"},{emoji:"",fact:"Real treasure maps were super rare - pirates usually spent their gold quickly!"},{emoji:"",fact:"Pirates wore eye patches to see better in the dark below deck!"},{emoji:"",fact:`A "pirate flag" wasn't always a skull - each captain had their own design!`},{emoji:"",fact:"Some pirates were actually given permission by kings to attack enemy ships!"}],superheroes:[{emoji:"",fact:"The first superhero comic was published in 1938!"},{emoji:"",fact:"Real-life heroes like firefighters save thousands of lives every year!"},{emoji:"",fact:"Bats can eat up to 1,000 mosquitoes in an hour - tiny superheroes!"},{emoji:"",fact:"Spiders are super strong - their webs can be stronger than steel!"},{emoji:"",fact:"Lightning is super hot - 5 times hotter than the surface of the Sun!"},{emoji:"",fact:"You have a unique superpower - your fingerprints are one of a kind!"}],magic:[{emoji:"",fact:"In many cultures, people believed rainbows were magical bridges!"},{emoji:"",fact:"Unicorns appear in stories from many different countries around the world!"},{emoji:"",fact:'The word "magic" comes from ancient Persian wizards called "magi"!'},{emoji:"",fact:"Some scientists were once called alchemists and tried to create real magic!"},{emoji:"",fact:"Rainbows are actually full circles - we just can't see the bottom half!"},{emoji:"",fact:"The first magic show was performed over 4,000 years ago in Egypt!"}],safari:[{emoji:"",fact:"A lion's roar can be heard from 5 miles away!"},{emoji:"",fact:"Giraffes sleep only 30 minutes a day!"},{emoji:"",fact:"Elephants are the only animals that can't jump!"},{emoji:"",fact:"Every zebra has a unique stripe pattern - like a fingerprint!"},{emoji:"",fact:"Hippos are one of the most dangerous animals in Africa!"},{emoji:"",fact:"Cheetahs can go from 0 to 60 mph in just 3 seconds!"}],arctic:[{emoji:"",fact:"Penguins can drink salt water!"},{emoji:"",fact:"Every snowflake has a unique shape - no two are exactly alike!"},{emoji:"",fact:"Polar bear fur isn't actually white - it's transparent!"},{emoji:"",fact:"Seals can hold their breath for up to 2 hours!"},{emoji:"",fact:"The Arctic Ocean is the smallest and shallowest ocean!"},{emoji:"",fact:"Narwhals are real unicorns of the sea with a long spiral tusk!"}],default:[{emoji:"",fact:"Every story you create is completely unique in the world!"},{emoji:"",fact:"Reading stories together helps kids learn over 1,000 new words a year!"},{emoji:"",fact:"When you imagine a story, your brain lights up like you're really there!"},{emoji:"",fact:"The best ideas often come from daydreaming!"},{emoji:"",fact:"Creating stories is one of the oldest human traditions - over 40,000 years!"},{emoji:"",fact:"Kids who read with their parents feel closer to them!"}]},X2={space:[{emoji:"",fact:"       !"},{emoji:"",fact:"        !"},{emoji:"",fact:"    - -4  !"},{emoji:"",fact:"        !"},{emoji:"",fact:"      !"},{emoji:"",fact:"         !"}],underwater:[{emoji:"",fact:"     !"},{emoji:"",fact:"     !"},{emoji:"",fact:"       !"},{emoji:"",fact:"     !"},{emoji:"",fact:"        -   !"},{emoji:"",fact:"       !"}],forest:[{emoji:"",fact:"     -5,000 !"},{emoji:"",fact:"       !"},{emoji:"",fact:"       !"},{emoji:"",fact:"           !"},{emoji:"",fact:"           !"},{emoji:"",fact:"    !"}],default:[{emoji:"",fact:"       !"},{emoji:"",fact:"       1,000   !"},{emoji:"",fact:" ,      !"},{emoji:"",fact:"      !"},{emoji:"",fact:"         -  40,000 !"},{emoji:"",fact:"       !"}]};function Z2({theme:e="default",isRTL:t=!1,className:r=""}){const[n,s]=w.useState(0),[i,o]=w.useState(!0),l=t?X2:Q2,c=l[e]||l.default;w.useEffect(()=>{const d=setInterval(()=>{o(!1),setTimeout(()=>{s(h=>(h+1)%c.length),o(!0)},300)},5e3);return()=>clearInterval(d)},[c.length]);const u=c[n];return a.jsxs("div",{className:`${r}`,dir:t?"rtl":"ltr",children:[a.jsx("div",{className:"text-center mb-3",children:a.jsx("span",{className:"text-sm font-medium text-purple-300 uppercase tracking-wider",children:t?" ?":" Did You Know?"})}),a.jsx("div",{className:`bg-gradient-to-br from-purple-900/40 to-blue-900/40 border border-purple-500/20 rounded-xl p-4 sm:p-6 transition-all duration-300 ${i?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-2"}`,children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("span",{className:"text-4xl flex-shrink-0 animate-bounce",children:u.emoji}),a.jsx("p",{className:"text-white text-sm sm:text-base leading-relaxed font-medium",children:u.fact})]})}),a.jsx("div",{className:"flex justify-center gap-1.5 mt-4",children:c.map((d,h)=>a.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${h===n?"w-6 bg-purple-400":"w-1.5 bg-purple-400/30"}`},h))})]})}function ek({characterImage:e,characterName:t,isRTL:r=!1}){const[n,s]=w.useState("idle"),[i,o]=w.useState(0),[l,c]=w.useState(0),u=w.useRef(0),d=w.useRef(0),h=w.useRef([]),f=w.useRef([]),m=w.useRef(null),v=w.useRef(0),y=w.useRef(0),[,b]=w.useState(0),g=0,x=12,p=.6,j=4,_=60,N=50,S=30,C=380,A=w.useCallback(()=>{u.current=g,d.current=0,h.current=[],f.current=[],y.current=0,o(0),v.current=0},[]),L=w.useCallback(()=>{u.current<=5&&(d.current=x)},[]),B=w.useCallback(()=>{A(),s("playing")},[A]),z=w.useCallback(()=>{n==="idle"||n==="gameover"?B():n==="playing"&&L()},[n,B,L]);w.useEffect(()=>{const F=E=>{(E.code==="Space"||E.code==="ArrowUp")&&(E.preventDefault(),z())};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[z]),w.useEffect(()=>{if(n!=="playing"){m.current&&cancelAnimationFrame(m.current);return}let F=0,E=0;const I=M=>{v.current||(v.current=M);const J=Math.min(M-v.current,50);if(v.current=M,d.current-=p,u.current+=d.current,u.current<g&&(u.current=g,d.current=0),F+=J,F>1800){F=0;const O=[35,45,55];h.current.push({id:Date.now(),x:C,height:O[Math.floor(Math.random()*O.length)],passed:!1})}E+=J,E>2500&&(E=0,f.current.push({id:Date.now()+1,x:C,y:50+Math.random()*60}));const W=_,V=_+N-10,ee=u.current,fe=u.current+N-10;let T=!1;if(h.current=h.current.map(O=>({...O,x:O.x-j})).filter(O=>{const me=O.x+5,rt=O.x+S-5,X=O.height;return V>me&&W<rt&&ee<X&&(T=!0),!O.passed&&O.x+S<W&&(O.passed=!0,y.current+=5),O.x>-S}),f.current=f.current.map(O=>({...O,x:O.x-j})).filter(O=>{const me=O.x,rt=O.x+25,X=O.y,Ve=O.y+25;return V>me&&W<rt&&fe>X&&ee<Ve?(y.current+=10,!1):O.x>-30}),o(y.current),T){s("gameover"),c(O=>Math.max(O,y.current));return}b(O=>O+1),m.current=requestAnimationFrame(I)};return m.current=requestAnimationFrame(I),()=>{m.current&&cancelAnimationFrame(m.current)}},[n]);const Y=u.current,ae=h.current,ce=f.current,K=Y>5;return a.jsxs("div",{className:"w-full max-w-md mx-auto",children:[a.jsxs("div",{className:"text-center mb-2",children:[a.jsx("h3",{className:"text-lg font-bold text-purple-300",children:r?"  !":" Jump & Dodge!"}),a.jsx("p",{className:"text-xs text-gray-400",children:r?"    ":"Tap or press Space to jump"})]}),a.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[a.jsxs("div",{className:"text-sm font-bold text-yellow-400",children:[" ",i]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[r?":":"Best:"," ",l]})]}),a.jsxs("div",{className:"relative bg-gradient-to-b from-indigo-900 via-purple-900 to-slate-900 rounded-xl overflow-hidden cursor-pointer select-none touch-none",style:{height:"200px",width:"100%",maxWidth:"400px",margin:"0 auto"},onClick:z,onTouchStart:F=>{F.preventDefault(),z()},children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(15)].map((F,E)=>a.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full opacity-60",style:{left:`${E*7%100}%`,top:`${E*11%50}%`}},E))}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-t from-green-800 to-green-600",children:a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-green-400/50"})}),a.jsxs("div",{className:"absolute",style:{left:`${_}px`,bottom:`${40+Y}px`,width:`${N}px`,height:`${N}px`,transform:K?"rotate(-15deg) scale(1.05)":"rotate(0deg) scale(1)",transition:"transform 0.1s ease-out"},children:[e?a.jsx("img",{src:e,alt:t||"Character",className:"w-full h-full object-cover rounded-full border-3 border-yellow-400 shadow-lg shadow-yellow-400/30",draggable:!1}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-2xl border-3 border-yellow-400 shadow-lg",children:""}),K&&a.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-8 h-2 bg-yellow-400/30 rounded-full blur-sm"})]}),ae.map(F=>a.jsx("div",{className:"absolute",style:{left:`${F.x}px`,bottom:"40px",width:`${S}px`,height:`${F.height}px`},children:a.jsxs("div",{className:"w-full h-full bg-gradient-to-t from-red-700 to-red-500 rounded-t-lg relative",children:[a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[12px] border-r-[12px] border-b-[10px] border-l-transparent border-r-transparent border-b-red-500"}),a.jsx("div",{className:"absolute top-1/3 -left-2 w-2 h-3 bg-red-600 rounded-l-full"}),a.jsx("div",{className:"absolute top-1/2 -right-2 w-2 h-3 bg-red-600 rounded-r-full"})]})},F.id)),ce.map(F=>a.jsx("div",{className:"absolute text-xl",style:{left:`${F.x}px`,bottom:`${40+F.y}px`,animation:"pulse 0.5s ease-in-out infinite"},children:""},F.id)),n==="idle"&&a.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center backdrop-blur-sm",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-5xl mb-3 animate-bounce",children:""}),a.jsx("p",{className:"text-white font-bold text-xl mb-1",children:r?" !":"Tap to Start!"}),a.jsx("p",{className:"text-gray-300 text-sm",children:r?"  ":"Jump over obstacles"})]})}),n==="gameover"&&a.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("p",{className:"text-yellow-400 font-bold text-xl mb-1",children:r?" !":"Great Job!"}),a.jsx("p",{className:"text-white text-lg mb-1",children:r?`: ${i}`:`Score: ${i}`}),i>=l&&i>0&&a.jsx("p",{className:"text-green-400 text-sm mb-2",children:r?"  !":" New High Score!"}),a.jsx("p",{className:"text-gray-300 text-sm animate-pulse mt-2",children:r?"  ":"Tap to play again"})]})})]}),a.jsx("p",{className:"text-center text-xs text-gray-500 mt-2",children:r?"     !":" Collect stars and jump over obstacles!"})]})}const Jo=({src:e,alt:t,className:r,fallback:n,priority:s=!1})=>{const[i,o]=w.useState(!1),[l,c]=w.useState(!1),u=w.useRef(null);return w.useEffect(()=>{if(o(!1),c(!1),e&&s){const d=new Image;d.src=e,d.onload=()=>o(!0),d.onerror=()=>c(!0)}},[e,s]),w.useEffect(()=>{var d,h;(d=u.current)!=null&&d.complete&&((h=u.current)==null?void 0:h.naturalHeight)>0&&o(!0)},[e]),!e||l?n||null:a.jsxs("div",{className:`relative ${r}`,children:[!i&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900/30 to-blue-900/30 animate-pulse flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-3 border-purple-500 border-t-transparent rounded-full animate-spin"})}),a.jsx("img",{ref:u,src:e,alt:t,loading:s?"eager":"lazy",fetchpriority:s?"high":"auto",decoding:"async",className:`w-full h-full object-cover transition-opacity duration-300 ${i?"opacity-100":"opacity-0"}`,onLoad:()=>o(!0),onError:()=>c(!0)})]})},wh=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),bh=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),jh=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Yo=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),kh=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),_h=({className:e})=>a.jsxs("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Nh=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),tk=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),rk=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),nk=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),sk=({className:e})=>a.jsx("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})});function Hi(){var I,M,J,W;const{user:e,signOut:t}=It(),{isRTL:r,t:n,language:s,localizedHref:i}=Dt(),o=Yt(),l=w.useRef(null),[c,u]=w.useState(!1),[d,h]=w.useState([]),[f,m]=w.useState(null),[v,y]=w.useState("fusion-lab"),[b,g]=w.useState(!0),[x,p]=w.useState(!1),[j,_]=w.useState(!1),[N,S]=w.useState(!1),[C,A]=w.useState(null),[L,B]=w.useState(!1),[z,Y]=w.useState(null),ae=V=>{Y(V),y("plot-world")};w.useEffect(()=>{ce()},[]),w.useEffect(()=>{e!=null&&e.id&&(e!=null&&e.email)&&gg(e.id,e.email)},[e==null?void 0:e.id,e==null?void 0:e.email]),w.useEffect(()=>{const V=ee=>{l.current&&!l.current.contains(ee.target)&&u(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const ce=async()=>{const{data:V,error:ee}=await G.from("children").select("*").order("created_at",{ascending:!1});!ee&&V&&(h(V),V.length>0&&m(V[0])),g(!1)},K=async()=>{await t(),o("/login")},F=()=>{o("/add-child")},E=async V=>{B(!0);const{error:ee}=await G.from("children").delete().eq("id",V);if(!ee){const fe=d.filter(T=>T.id!==V);h(fe),(f==null?void 0:f.id)===V&&m(fe.length>0?fe[0]:null)}A(null),B(!1)};return b?a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):d.length===0?a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center px-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:n("studio.welcome.title")}),a.jsx("p",{className:"text-gray-400 mb-8",children:n("studio.welcome.description")}),a.jsx("button",{onClick:F,className:"px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:n("studio.welcome.addChildButton")})]})}):a.jsxs("div",{className:"h-screen bg-[#0B0A16] text-white flex flex-col lg:flex-row overflow-hidden",children:[C&&a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-sm w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:n("studio.deleteChild.title")}),a.jsxs("p",{className:"text-gray-400 mb-4",children:[n("studio.deleteChild.confirmText")," ",a.jsx("span",{className:"text-white font-medium",children:C.name}),"?"]}),a.jsx("p",{className:"text-red-400 text-sm mb-6",children:n("studio.deleteChild.warning")}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>A(null),disabled:L,className:"flex-1 py-3 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:n("studio.deleteChild.cancel")}),a.jsx("button",{onClick:()=>E(C.id),disabled:L,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:L?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n("studio.deleteChild.remove")})]})]})}),a.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 bg-[#0d0c18] border-b border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:a.jsx(wh,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-lg font-bold",children:"Babu Media"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>p(!x),className:"flex items-center gap-2 px-3 py-2 bg-white/5 rounded-xl",children:[a.jsx("span",{className:"text-xl",children:(f==null?void 0:f.avatar_emoji)||""}),a.jsx("span",{className:"text-sm font-medium max-w-[80px] truncate",children:f==null?void 0:f.name}),a.jsx(Yo,{className:`w-4 h-4 text-gray-400 transition-transform ${x?"rotate-180":""}`})]}),a.jsx("button",{onClick:()=>S(!N),className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:N?a.jsx(sk,{className:"w-6 h-6"}):a.jsx(nk,{className:"w-6 h-6"})})]})]}),x&&a.jsxs("div",{className:"lg:hidden absolute top-16 right-4 left-4 sm:left-auto sm:w-72 bg-slate-900 border border-white/10 rounded-xl overflow-hidden z-50 shadow-xl",children:[d.map(V=>a.jsxs("div",{className:`flex items-center gap-3 p-3 hover:bg-white/10 transition-colors ${(f==null?void 0:f.id)===V.id?"bg-purple-500/20":""}`,children:[a.jsxs("button",{onClick:()=>{m(V),p(!1)},className:"flex items-center gap-3 flex-1",children:[a.jsx("span",{className:"text-xl",children:V.avatar_emoji||""}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:V.name}),a.jsxs("div",{className:"text-xs text-gray-400",children:[V.age," ",n("studio.sidebar.yearsOld")]})]})]}),a.jsx("button",{onClick:ee=>{ee.stopPropagation(),p(!1),A(V)},className:"p-1.5 text-gray-400 hover:text-red-400 transition-all",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},V.id)),a.jsxs("button",{onClick:()=>{p(!1),F()},className:"w-full flex items-center gap-3 p-3 hover:bg-white/10 transition-colors border-t border-white/10 text-purple-400",children:[a.jsx(Nh,{className:"w-5 h-5"}),a.jsx("span",{children:n("studio.sidebar.addChild")})]})]}),N&&a.jsxs("div",{className:"lg:hidden fixed inset-0 top-16 bg-[#0d0c18] z-40 flex flex-col",children:[a.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[a.jsxs("button",{onClick:()=>{y("fusion-lab"),S(!1)},className:`w-full flex items-center gap-3 p-4 rounded-xl transition-all ${v==="fusion-lab"?"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30 text-purple-300":"hover:bg-white/5 text-gray-400 hover:text-white"}`,children:[a.jsx(bh,{className:"w-6 h-6 flex-shrink-0"}),a.jsx("span",{className:"font-medium text-lg",children:n("studio.sidebar.fusionLab")})]}),a.jsxs("button",{onClick:()=>{y("plot-world"),S(!1)},className:`w-full flex items-center gap-3 p-4 rounded-xl transition-all ${v==="plot-world"?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/30 text-blue-300":"hover:bg-white/5 text-gray-400 hover:text-white"}`,children:[a.jsx(jh,{className:"w-6 h-6 flex-shrink-0"}),a.jsx("span",{className:"font-medium text-lg",children:n("studio.sidebar.plotWorld")})]})]}),a.jsxs("div",{className:"p-4 border-t border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-bold",children:(M=(I=e==null?void 0:e.email)==null?void 0:I[0])==null?void 0:M.toUpperCase()})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium truncate",children:e==null?void 0:e.email}),a.jsx("div",{className:"text-xs text-gray-500",children:n("studio.sidebar.parentAccount")})]})]}),a.jsxs("button",{onClick:()=>{o("/settings"),S(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl text-gray-400 hover:text-white hover:bg-white/5 transition-colors",children:[a.jsx(_h,{className:"w-5 h-5"}),a.jsx("span",{children:n("studio.sidebar.settingsAndSubscription")})]}),a.jsxs("button",{onClick:K,className:"w-full flex items-center gap-3 p-3 rounded-xl text-red-400 hover:text-red-300 hover:bg-white/5 transition-colors",children:[a.jsx(kh,{className:"w-5 h-5"}),a.jsx("span",{children:n("studio.sidebar.signOut")})]})]})]}),a.jsxs("aside",{className:`hidden lg:flex ${j?"w-20":"w-72"} bg-[#0d0c18] border-r border-white/10 flex-col transition-all duration-300 relative h-full flex-shrink-0`,children:[a.jsx("button",{onClick:()=>_(!j),className:`absolute ${r?"-left-3":"-right-3"} top-20 w-6 h-6 bg-purple-500 hover:bg-purple-600 rounded-full flex items-center justify-center shadow-lg z-10 transition-colors`,title:n(j?"studio.sidebar.expandSidebar":"studio.sidebar.collapseSidebar"),children:j?a.jsx(rk,{className:`w-3 h-3 text-white ${r?"rotate-180":""}`}):a.jsx(tk,{className:`w-3 h-3 text-white ${r?"rotate-180":""}`})}),a.jsx("div",{className:"p-4 border-b border-white/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/30 flex-shrink-0",children:a.jsx(wh,{className:"w-6 h-6 text-white"})}),!j&&a.jsx("span",{className:"text-xl font-bold",children:"Babu Media"})]})}),a.jsx("div",{className:"p-4 border-b border-white/10",children:a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>p(!x),className:"w-full flex items-center gap-3 p-3 bg-white/5 hover:bg-white/10 rounded-xl transition-colors",children:[a.jsx("span",{className:"text-2xl flex-shrink-0",children:(f==null?void 0:f.avatar_emoji)||""}),!j&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"font-semibold",children:f==null?void 0:f.name}),a.jsxs("div",{className:"text-xs text-gray-400",children:[f==null?void 0:f.age," ",n("studio.sidebar.yearsOld")]})]}),a.jsx(Yo,{className:`w-5 h-5 text-gray-400 transition-transform ${x?"rotate-180":""}`})]})]}),x&&!j&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-slate-900 border border-white/10 rounded-xl overflow-hidden z-50 shadow-xl",children:[d.map(V=>a.jsxs("div",{className:`flex items-center gap-3 p-3 hover:bg-white/10 transition-colors group ${(f==null?void 0:f.id)===V.id?"bg-purple-500/20":""}`,children:[a.jsxs("button",{onClick:()=>{m(V),p(!1)},className:"flex items-center gap-3 flex-1",children:[a.jsx("span",{className:"text-xl",children:V.avatar_emoji||""}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:V.name}),a.jsxs("div",{className:"text-xs text-gray-400",children:[V.age," ",n("studio.sidebar.yearsOld")]})]})]}),a.jsx("button",{onClick:ee=>{ee.stopPropagation(),p(!1),A(V)},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-400 hover:text-red-400 transition-all",title:n("studio.deleteChild.remove"),children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},V.id)),a.jsxs("button",{onClick:()=>{p(!1),F()},className:"w-full flex items-center gap-3 p-3 hover:bg-white/10 transition-colors border-t border-white/10 text-purple-400",children:[a.jsx(Nh,{className:"w-5 h-5"}),a.jsx("span",{children:n("studio.sidebar.addChild")})]})]})]})}),a.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[a.jsxs("button",{onClick:()=>y("fusion-lab"),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${v==="fusion-lab"?"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30 text-purple-300":"hover:bg-white/5 text-gray-400 hover:text-white"}`,children:[a.jsx(bh,{className:"w-5 h-5 flex-shrink-0"}),!j&&a.jsx("span",{className:"font-medium",children:n("studio.sidebar.fusionLab")})]}),a.jsxs("button",{onClick:()=>y("plot-world"),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${v==="plot-world"?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/30 text-blue-300":"hover:bg-white/5 text-gray-400 hover:text-white"}`,children:[a.jsx(jh,{className:"w-5 h-5 flex-shrink-0"}),!j&&a.jsx("span",{className:"font-medium",children:n("studio.sidebar.plotWorld")})]})]}),a.jsxs("div",{className:"p-4 border-t border-white/10 relative",ref:l,children:[a.jsxs("button",{onClick:()=>u(!c),className:"w-full flex items-center gap-3 p-2 rounded-xl hover:bg-white/10 transition-colors",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:(W=(J=e==null?void 0:e.email)==null?void 0:J[0])==null?void 0:W.toUpperCase()})}),!j&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[a.jsx("div",{className:"text-sm font-medium truncate",children:e==null?void 0:e.email}),a.jsx("div",{className:"text-xs text-gray-500",children:n("studio.sidebar.parentAccount")})]}),a.jsx(Yo,{className:`w-4 h-4 text-gray-400 transition-transform ${c?"rotate-180":""}`})]})]}),c&&a.jsxs("div",{className:`absolute bottom-full mb-2 left-4 ${j?"left-14":"right-4"} w-64 bg-[#1a1825] border border-white/10 rounded-xl shadow-xl overflow-hidden z-50`,children:[a.jsx("div",{className:"px-4 py-3 border-b border-white/10",children:a.jsx("p",{className:"text-sm text-gray-400 truncate",children:e==null?void 0:e.email})}),a.jsxs("button",{onClick:()=>o(i("/settings")),className:"w-full px-4 py-3 text-left text-sm text-gray-300 hover:bg-white/5 transition-colors flex items-center gap-2",children:[a.jsx(_h,{className:"w-4 h-4"}),n("studio.sidebar.settingsAndSubscription")]}),a.jsxs("button",{onClick:K,className:"w-full px-4 py-3 text-left text-sm text-red-400 hover:bg-white/5 transition-colors flex items-center gap-2 border-t border-white/10",children:[a.jsx(kh,{className:"w-4 h-4"}),n("studio.sidebar.signOut")]})]})]})]}),a.jsxs("main",{className:"flex-1 overflow-y-auto h-full",children:[v==="fusion-lab"&&f&&a.jsx(ik,{childId:f.id,child:f,onGoToStory:ae,user:e}),v==="plot-world"&&f&&a.jsx(ak,{childId:f.id,child:f,initialCharacter:z,onCharacterUsed:()=>Y(null),user:e})]})]})}function ik({childId:e,child:t,onGoToStory:r,user:n}){var ci,ui,ss,di,hi,is;const{t:s,language:i,isRTL:o}=Dt(),[l,c]=w.useState([]),[u,d]=w.useState(!0),[h,f]=w.useState(1),[m,v]=w.useState(""),[y,b]=w.useState(null),[g,x]=w.useState(""),[p,j]=w.useState(null),[_,N]=w.useState([]),[S,C]=w.useState(null),[A,L]=w.useState(""),[B,z]=w.useState(!1),[Y,ae]=w.useState(null),[ce,K]=w.useState(""),[F,E]=w.useState(!1),[I,M]=w.useState(!1),[J,W]=w.useState(null),[V,ee]=w.useState(""),fe=s("studio.fusionLab.loadingMessages");w.useEffect(()=>{if(!B){K("");return}let k=0;K(fe[0]);const D=setInterval(()=>{k=(k+1)%fe.length,K(fe[k])},2500);return()=>clearInterval(D)},[B]);const[T,O]=w.useState(null),[me,rt]=w.useState(!1),[X,Ve]=w.useState(null),jt=[{id:"fox",emoji:"",name:s("studio.fusionLab.animals.fox")},{id:"wolf",emoji:"",name:s("studio.fusionLab.animals.wolf")},{id:"raccoon",emoji:"",name:s("studio.fusionLab.animals.raccoon")},{id:"unicorn",emoji:"",name:s("studio.fusionLab.animals.unicorn")},{id:"lion",emoji:"",name:s("studio.fusionLab.animals.lion")},{id:"owl",emoji:"",name:s("studio.fusionLab.animals.owl")},{id:"dragon",emoji:"",name:s("studio.fusionLab.animals.dragon")},{id:"bunny",emoji:"",name:s("studio.fusionLab.animals.bunny")},{id:"cat",emoji:"",name:s("studio.fusionLab.animals.cat")},{id:"dog",emoji:"",name:s("studio.fusionLab.animals.dog")},{id:"bear",emoji:"",name:s("studio.fusionLab.animals.bear")},{id:"panda",emoji:"",name:s("studio.fusionLab.animals.panda")}],Ue=()=>g.trim()?g.trim():(y==null?void 0:y.name)||"",Bt=()=>g.trim().length>0?!0:!!y,nt=[{id:"pixar",name:s("studio.fusionLab.styles.pixar"),shows:"Toy Story, Finding Nemo, Coco",color:"from-blue-500 to-cyan-500"},{id:"dreamworks",name:s("studio.fusionLab.styles.dreamworks"),shows:"Shrek, Kung Fu Panda, How to Train Your Dragon",color:"from-green-500 to-emerald-500"},{id:"ghibli",name:s("studio.fusionLab.styles.ghibli"),shows:"Totoro, Spirited Away, Ponyo",color:"from-sky-400 to-blue-500"},{id:"cartoon-network",name:s("studio.fusionLab.styles.cartoonNetwork"),shows:"Adventure Time, Powerpuff Girls, Steven Universe",color:"from-pink-500 to-rose-500"},{id:"nickelodeon",name:s("studio.fusionLab.styles.nickelodeon"),shows:"SpongeBob, Paw Patrol, Dora",color:"from-orange-500 to-amber-500"},{id:"anime",name:s("studio.fusionLab.styles.anime"),shows:"Pokemon, Naruto, Dragon Ball",color:"from-purple-500 to-violet-500"},{id:"disney-classic",name:s("studio.fusionLab.styles.disneyClassic"),shows:"Lion King, Aladdin, Little Mermaid",color:"from-yellow-500 to-orange-500"},{id:"illumination",name:s("studio.fusionLab.styles.illumination"),shows:"Minions, Sing, Secret Life of Pets",color:"from-yellow-400 to-yellow-600"}],Mt=[{id:"brave",label:s("studio.fusionLab.traits.brave"),emoji:""},{id:"curious",label:s("studio.fusionLab.traits.curious"),emoji:""},{id:"kind",label:s("studio.fusionLab.traits.kind"),emoji:""},{id:"clever",label:s("studio.fusionLab.traits.clever"),emoji:""},{id:"playful",label:s("studio.fusionLab.traits.playful"),emoji:""},{id:"wise",label:s("studio.fusionLab.traits.wise"),emoji:""},{id:"gentle",label:s("studio.fusionLab.traits.gentle"),emoji:""},{id:"bold",label:s("studio.fusionLab.traits.bold"),emoji:""},{id:"creative",label:s("studio.fusionLab.traits.creative"),emoji:""},{id:"loyal",label:s("studio.fusionLab.traits.loyal"),emoji:""},{id:"funny",label:s("studio.fusionLab.traits.funny"),emoji:""},{id:"adventurous",label:s("studio.fusionLab.traits.adventurous"),emoji:""},{id:"shy",label:s("studio.fusionLab.traits.shy"),emoji:""},{id:"confident",label:s("studio.fusionLab.traits.confident"),emoji:""},{id:"caring",label:s("studio.fusionLab.traits.caring"),emoji:""},{id:"magical",label:s("studio.fusionLab.traits.magical"),emoji:""}],dr=[{id:"superhero",label:s("studio.fusionLab.outfits.superhero"),emoji:"",desc:"A flowing superhero cape with a bold emblem"},{id:"detective",label:s("studio.fusionLab.outfits.detective"),emoji:"",desc:"Trench coat with a magnifying glass"},{id:"princess",label:s("studio.fusionLab.outfits.princess"),emoji:"",desc:"Royal gown or suit with a crown"},{id:"pirate",label:s("studio.fusionLab.outfits.pirate"),emoji:"",desc:"Pirate hat, eye patch, and adventure gear"},{id:"astronaut",label:s("studio.fusionLab.outfits.astronaut"),emoji:"",desc:"Space suit ready for cosmic adventures"},{id:"wizard",label:s("studio.fusionLab.outfits.wizard"),emoji:"",desc:"Magical robes with a pointed hat"},{id:"sports",label:s("studio.fusionLab.outfits.sports"),emoji:"",desc:"Athletic jersey and sneakers"},{id:"artist",label:s("studio.fusionLab.outfits.artist"),emoji:"",desc:"Colorful smock with a beret"},{id:"scientist",label:s("studio.fusionLab.outfits.scientist"),emoji:"",desc:"Lab coat with goggles"},{id:"ninja",label:s("studio.fusionLab.outfits.ninja"),emoji:"",desc:"Stealthy ninja outfit"},{id:"fairy",label:s("studio.fusionLab.outfits.fairy"),emoji:"",desc:"Sparkly wings and magical outfit"},{id:"casual",label:s("studio.fusionLab.outfits.casual"),emoji:"",desc:"Comfortable everyday clothes"}];w.useEffect(()=>{rs()},[e]);const rs=async()=>{const{data:k}=await G.from("characters").select("*").eq("child_id",e).order("created_at",{ascending:!1});k&&c(k),d(!1)},hr=k=>{N(D=>D.includes(k)?D.filter(q=>q!==k):D.length<4?[...D,k]:D)},Dr=()=>{if(A.trim())return A.trim();if(S){const k=dr.find(D=>D.id===S);return(k==null?void 0:k.desc)||""}return""},io=async()=>{var kt;if(!m||!Bt()||!p||_.length===0)return;if(n!=null&&n.id){const ue=await Da(n.id,"character",e);if(!ue.allowed){const we=await ei(n.id);W(we),ee(ue.reason),M(!0);return}}z(!0);const k=Ue(),D=_.map(ue=>{var we;return(we=Mt.find(Te=>Te.id===ue))==null?void 0:we.label}).join(", "),q=((kt=nt.find(ue=>ue.id===p))==null?void 0:kt.name)||p,ne=Dr(),te=`A ${q} style illustration of a cute anthropomorphic ${k.toLowerCase()} character named ${m}. The character has these personality traits: ${D}. ${ne?`Wearing ${ne}.`:""} Child-friendly, colorful, expressive face, full body shot, high quality character design.`,st=g.trim()?`custom:${k}`:(y==null?void 0:y.id)||`custom:${k}`;try{const{data:ue,error:we}=await G.from("characters").insert({child_id:e,name:m,animal_type:st,personality_trait:D,visual_style:p,outfit_description:ne,custom_prompt:te,image_url:null}).select().single();if(we){console.error("Error saving character:",we),z(!1);return}n!=null&&n.id&&await pg(n.id,"character"),ae(ue),c([ue,...l]);const Te=await G.functions.invoke("generate-character",{body:{characterId:ue.id,prompt:te,animalType:k,styleName:q}});if(Te.error){console.error("Edge function error:",Te.error),f(5),z(!1);return}const Qt=Te.data;if(Qt.success&&Qt.imageUrl){const Ut={...ue,image_url:Qt.imageUrl};ae(Ut),c(on=>on.map(Se=>Se.id===ue.id?Ut:Se)),E(!0),setTimeout(()=>E(!1),4e3)}f(5)}catch(ue){console.error("Generation error:",ue)}z(!1)},ao=async k=>{rt(!0);const{error:D}=await G.from("characters").delete().eq("id",k);D||c(l.filter(q=>q.id!==k)),O(null),rt(!1)},ns=()=>{f(1),v(""),b(null),x(""),j(null),N([]),C(null),L(""),ae(null)};return u?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:`p-4 sm:p-6 lg:p-8 ${o?"text-right":"text-left"}`,children:[a.jsx(pu,{active:F,duration:4e3}),a.jsx(gu,{isOpen:I,onClose:()=>M(!1),title:s("studio.fusionLab.upgradeTitle"),reason:V,usage:J,userEmail:(n==null?void 0:n.email)||""}),T&&a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-sm w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:s("studio.fusionLab.deleteCharacter.title")}),a.jsxs("p",{className:"text-gray-400 mb-6",children:[s("studio.fusionLab.deleteCharacter.confirmText")," ",a.jsx("span",{className:"text-white font-medium",children:T.name}),"? ",s("studio.fusionLab.deleteCharacter.warning")]}),a.jsxs("div",{className:`flex gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("button",{onClick:()=>O(null),disabled:me,className:"flex-1 py-3 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:s("studio.fusionLab.deleteCharacter.cancel")}),a.jsx("button",{onClick:()=>ao(T.id),disabled:me,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:me?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):s("studio.fusionLab.deleteCharacter.delete")})]})]})}),X&&a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>Ve(null),children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto relative",onClick:k=>k.stopPropagation(),children:[a.jsx("button",{onClick:()=>Ve(null),className:"absolute top-4 left-4 p-2 bg-red-500/80 hover:bg-red-500 rounded-full text-white transition-colors z-10 shadow-lg",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("div",{className:"relative",children:X.image_url?a.jsx("img",{src:X.image_url,alt:X.name,className:"w-full aspect-square object-cover rounded-t-2xl"}):a.jsx("div",{className:"w-full aspect-square bg-gradient-to-br from-purple-900/50 to-pink-900/50 rounded-t-2xl flex items-center justify-center",children:a.jsx("span",{className:"text-9xl",children:((ci=jt.find(k=>k.id===X.animal_type))==null?void 0:ci.emoji)||""})})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:`flex items-start justify-between gap-4 mb-6 ${o?"flex-row-reverse":""}`,children:[a.jsx("h2",{className:"text-3xl font-bold",children:X.name}),a.jsx("button",{onClick:()=>{r&&r(X),Ve(null)},className:"shrink-0 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-sm hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:s("studio.fusionLab.characterDetail.createStory")})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:`flex items-center gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-2xl",children:((ui=jt.find(k=>k.id===X.animal_type))==null?void 0:ui.emoji)||""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:s("studio.fusionLab.characterDetail.animalType")}),a.jsx("div",{className:"font-medium",children:((ss=jt.find(k=>k.id===X.animal_type))==null?void 0:ss.name)||X.animal_type})]})]}),a.jsxs("div",{className:`flex items-center gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:s("studio.fusionLab.characterDetail.visualStyle")}),a.jsx("div",{className:"font-medium",children:((di=nt.find(k=>k.id===X.visual_style))==null?void 0:di.name)||X.visual_style})]})]}),a.jsxs("div",{className:`flex items-start gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:s("studio.fusionLab.characterDetail.personalityTraits")}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:(hi=X.personality_trait)==null?void 0:hi.split(", ").map((k,D)=>a.jsx("span",{className:"px-3 py-1 bg-purple-500/20 border border-purple-500/30 rounded-full text-sm text-purple-300",children:k},D))})]})]}),X.outfit_description&&a.jsxs("div",{className:`flex items-center gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:s("studio.fusionLab.characterDetail.outfit")}),a.jsx("div",{className:"font-medium",children:X.outfit_description})]})]}),a.jsxs("div",{className:`flex items-center gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400",children:s("studio.fusionLab.characterDetail.created")}),a.jsx("div",{className:"font-medium",children:new Date(X.created_at).toLocaleDateString(i==="he"?"he-IL":"en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),a.jsx("div",{className:"mt-8",children:a.jsx("button",{onClick:()=>{O(X),Ve(null)},className:"w-full py-3 bg-red-500/20 border border-red-500/30 text-red-400 hover:bg-red-500/30 rounded-xl font-semibold transition-all",children:s("studio.fusionLab.characterDetail.deleteCharacter")})})]})]})}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("h1",{className:`text-2xl sm:text-3xl font-bold flex items-center gap-2 sm:gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-3xl sm:text-4xl",children:""}),a.jsxs("span",{className:"truncate",children:[t==null?void 0:t.name,s("studio.fusionLab.title")]})]}),a.jsx("p",{className:"text-gray-400 mt-2 text-sm sm:text-base",children:s("studio.fusionLab.subtitle")})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[a.jsx("div",{className:"lg:col-span-2 order-1",children:a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 sm:p-6 lg:p-8",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-4 sm:mb-6",children:s("studio.fusionLab.createNewCharacter")}),a.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-6 sm:mb-8",children:[1,2,3,4].map(k=>a.jsx("div",{className:`h-1.5 sm:h-2 flex-1 rounded-full transition-colors ${k<=h?"bg-purple-500":"bg-white/10"}`},k))}),h===1&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("studio.fusionLab.step1.characterName")}),a.jsx("input",{type:"text",value:m,onChange:k=>v(k.target.value),className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors text-sm sm:text-base ${o?"text-right":""}`,placeholder:s("studio.fusionLab.step1.characterNamePlaceholder"),dir:o?"rtl":"ltr"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2 sm:mb-3",children:s("studio.fusionLab.step1.chooseAnimalType")}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2 sm:gap-3",children:jt.map(k=>a.jsxs("button",{onClick:()=>{b(k),x("")},className:`p-2 sm:p-3 rounded-xl text-center transition-all ${(y==null?void 0:y.id)===k.id&&!g.trim()?"bg-purple-500/30 border-2 border-purple-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:[a.jsx("div",{className:"text-2xl sm:text-3xl mb-0.5 sm:mb-1",children:k.emoji}),a.jsx("div",{className:"text-[10px] sm:text-xs font-medium",children:k.name})]},k.id))}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-white/10"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-[#0B0A16] text-gray-500",children:s("studio.fusionLab.step1.orTypeYourOwn")})})]}),a.jsx("input",{type:"text",value:g,onChange:k=>{x(k.target.value),k.target.value.trim()&&b(null)},className:`w-full mt-3 px-3 sm:px-4 py-2.5 sm:py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors text-sm sm:text-base ${o?"text-right":""}`,placeholder:s("studio.fusionLab.step1.customAnimalPlaceholder"),dir:o?"rtl":"ltr"}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:s("studio.fusionLab.step1.customAnimalHint")})]})]}),a.jsx("button",{onClick:()=>f(2),disabled:!m||!Bt(),className:"w-full py-3 sm:py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:s("studio.fusionLab.step1.nextButton")})]}),h===2&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2 sm:mb-3",children:s("studio.fusionLab.step2.chooseArtStyle")}),a.jsx("p",{className:"text-gray-500 text-xs sm:text-sm mb-3 sm:mb-4",children:s("studio.fusionLab.step2.artStyleHint")}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:nt.map(k=>a.jsxs("button",{onClick:()=>j(k.id),className:`p-3 sm:p-4 rounded-xl ${o?"text-right":"text-left"} transition-all ${p===k.id?"bg-purple-500/30 border-2 border-purple-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:[a.jsx("div",{className:`text-xs sm:text-sm font-bold mb-0.5 sm:mb-1 bg-gradient-to-r ${k.color} bg-clip-text text-transparent`,children:k.name}),a.jsx("div",{className:"text-[10px] sm:text-xs text-gray-400 line-clamp-1",children:k.shows})]},k.id))})]}),a.jsxs("div",{className:`flex gap-2 sm:gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("button",{onClick:()=>f(1),className:"flex-1 py-3 sm:py-4 border border-white/20 rounded-xl font-semibold text-sm sm:text-base hover:bg-white/5 transition-all",children:s("studio.fusionLab.step2.back")}),a.jsx("button",{onClick:()=>f(3),disabled:!p,className:"flex-1 py-3 sm:py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:s("studio.fusionLab.step2.nextButton")})]})]}),h===3&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("studio.fusionLab.step3.chooseTraits")}),a.jsx("p",{className:"text-gray-500 text-xs sm:text-sm mb-3 sm:mb-4",children:s("studio.fusionLab.step3.traitsHint")}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1.5 sm:gap-2",children:Mt.map(k=>a.jsxs("button",{onClick:()=>hr(k.id),className:`py-2 sm:py-3 px-2 sm:px-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex items-center justify-center gap-1 sm:gap-2 ${_.includes(k.id)?"bg-purple-500 text-white":"bg-white/5 hover:bg-white/10"}`,children:[a.jsx("span",{children:k.emoji}),a.jsx("span",{children:k.label})]},k.id))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[s("studio.fusionLab.step3.selected"),": ",_.length,"/4"]})]}),a.jsxs("div",{className:`flex gap-2 sm:gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("button",{onClick:()=>f(2),className:"flex-1 py-3 sm:py-4 border border-white/20 rounded-xl font-semibold text-sm sm:text-base hover:bg-white/5 transition-all",children:s("studio.fusionLab.step3.back")}),a.jsx("button",{onClick:()=>f(4),disabled:_.length===0,className:"flex-1 py-3 sm:py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:s("studio.fusionLab.step3.nextButton")})]})]}),h===4&&a.jsx("div",{className:"space-y-4 sm:space-y-6",children:B?a.jsxs("div",{className:"py-8 sm:py-12 text-center",children:[a.jsxs("div",{className:"relative w-24 h-24 sm:w-32 sm:h-32 mx-auto mb-6",children:[a.jsx("div",{className:"absolute inset-0 border-4 border-purple-500/30 rounded-full"}),a.jsx("div",{className:"absolute inset-0 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-4xl sm:text-5xl animate-bounce",children:(y==null?void 0:y.emoji)||""})]}),a.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-3 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:ce||s("studio.fusionLab.generating.creatingMagic")}),a.jsxs("p",{className:"text-gray-400 text-sm sm:text-base mb-2",children:[m," ",s("studio.fusionLab.generating.comingToLife")]}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:s("studio.fusionLab.generating.timeEstimate")})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2 sm:mb-3",children:s("studio.fusionLab.step4.chooseOutfit")}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-1.5 sm:gap-2 mb-3 sm:mb-4",children:dr.map(k=>a.jsx("button",{onClick:()=>{C(k.id),L("")},className:`p-2 sm:p-3 rounded-xl ${o?"text-right":"text-left"} transition-all ${S===k.id&&!A?"bg-purple-500/30 border-2 border-purple-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:a.jsxs("div",{className:`flex items-center gap-1.5 sm:gap-2 ${o?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-lg sm:text-xl",children:k.emoji}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:k.label})]})},k.id))}),a.jsxs("div",{className:"relative my-3 sm:my-4",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-white/10"})}),a.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:a.jsx("span",{className:"px-2 bg-[#0B0A16] text-gray-500",children:s("studio.fusionLab.step4.orDescribeOwn")})})]}),a.jsx("input",{type:"text",value:A,onChange:k=>{L(k.target.value),k.target.value&&C(null)},className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 transition-colors text-sm sm:text-base ${o?"text-right":""}`,placeholder:s("studio.fusionLab.step4.customOutfitPlaceholder"),dir:o?"rtl":"ltr"})]}),a.jsxs("div",{className:"bg-black/20 rounded-xl p-4 sm:p-6",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-400 mb-3 sm:mb-4",children:s("studio.fusionLab.step4.characterPreview")}),a.jsxs("div",{className:`flex items-center gap-3 sm:gap-4 ${o?"flex-row-reverse":""}`,children:[a.jsx("div",{className:"text-4xl sm:text-6xl",children:y==null?void 0:y.emoji}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:"text-lg sm:text-xl font-bold truncate",children:m}),a.jsx("div",{className:"text-gray-400 text-xs sm:text-sm truncate",children:_.map(k=>{var D;return(D=Mt.find(q=>q.id===k))==null?void 0:D.label}).join(", ")}),a.jsxs("div",{className:"text-purple-400 text-xs sm:text-sm mt-0.5 sm:mt-1",children:[s("studio.fusionLab.step4.style"),": ",(is=nt.find(k=>k.id===p))==null?void 0:is.name]}),Dr()&&a.jsxs("div",{className:"text-emerald-400 text-xs sm:text-sm mt-0.5 sm:mt-1 truncate",children:[s("studio.fusionLab.step4.outfit"),": ",Dr()]})]})]})]}),a.jsxs("div",{className:`flex gap-2 sm:gap-3 ${o?"flex-row-reverse":""}`,children:[a.jsx("button",{onClick:()=>f(3),className:"flex-1 py-3 sm:py-4 border border-white/20 rounded-xl font-semibold text-sm sm:text-base hover:bg-white/5 transition-all",children:s("studio.fusionLab.step4.back")}),a.jsxs("button",{onClick:io,className:"flex-1 py-3 sm:py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-sm sm:text-base hover:shadow-lg hover:shadow-purple-500/30 transition-all flex items-center justify-center gap-1.5 sm:gap-2",children:[a.jsx("span",{children:""})," ",a.jsx("span",{children:s("studio.fusionLab.step4.bringToLife")})]})]})]})}),h===5&&Y&&a.jsxs("div",{className:"text-center py-4 sm:py-8",children:[Y.image_url?a.jsx("div",{className:"relative w-48 h-48 sm:w-64 sm:h-64 mx-auto mb-4 sm:mb-6 rounded-2xl overflow-hidden shadow-2xl shadow-purple-500/30",children:a.jsx("img",{src:Y.image_url,alt:Y.name,className:"w-full h-full object-cover"})}):a.jsx("div",{className:"text-6xl sm:text-8xl mb-4 sm:mb-6",children:y==null?void 0:y.emoji}),a.jsxs("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:[Y.name," ",s("studio.fusionLab.success.isReady")]}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base mb-6 sm:mb-8 px-2",children:Y.image_url?s("studio.fusionLab.success.createdWithMagic"):s("studio.fusionLab.success.savedWaiting")}),a.jsxs("button",{onClick:()=>{r&&r(Y),ns()},className:"px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-sm sm:text-base hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:[s("studio.fusionLab.success.buildFirstStory")," ",Y.name]})]})]})}),a.jsxs("div",{className:"order-2 lg:order-2",children:[a.jsxs("h3",{className:`text-base sm:text-lg font-bold mb-3 sm:mb-4 flex items-center gap-2 ${o?"flex-row-reverse":""}`,children:[a.jsx("span",{children:""})," ",s("studio.fusionLab.characters")," (",l.length,")"]}),l.length===0?a.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 sm:p-6 text-center text-gray-400 text-sm sm:text-base",children:s("studio.fusionLab.noCharactersYet")}):a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-1 gap-2 sm:gap-3 lg:space-y-3 lg:max-h-[600px] lg:overflow-y-auto lg:pr-2",children:l.map(k=>{const D=jt.find(q=>q.id===k.animal_type);return a.jsx("div",{onClick:()=>Ve(k),className:"relative bg-white/5 border border-white/10 rounded-xl p-3 sm:p-4 hover:bg-white/10 transition-colors group cursor-pointer",children:a.jsxs("div",{className:`flex flex-col lg:flex-row items-center gap-2 lg:gap-3 ${o?"lg:flex-row-reverse":""}`,children:[k.image_url?a.jsx("img",{src:k.image_url,alt:k.name,className:"w-16 h-16 sm:w-14 sm:h-14 rounded-lg object-cover"}):a.jsx("div",{className:"text-3xl sm:text-4xl",children:(D==null?void 0:D.emoji)||""}),a.jsxs("div",{className:`flex-1 min-w-0 text-center ${o?"lg:text-right":"lg:text-left"}`,children:[a.jsx("div",{className:"font-semibold text-sm sm:text-base truncate hover:text-purple-400 transition-colors",children:k.name}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400 truncate hidden sm:block",children:k.personality_trait})]}),a.jsx("button",{onClick:q=>{q.stopPropagation(),O(k)},className:"lg:opacity-0 lg:group-hover:opacity-100 p-1.5 sm:p-2 text-gray-400 hover:text-red-400 transition-all absolute top-2 right-2 lg:static",title:"Delete character",children:a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},k.id)})})]})]})]})}function ak({childId:e,child:t,initialCharacter:r,onCharacterUsed:n,user:s}){var is;const{t:i,language:o,isRTL:l}=Dt(),[c,u]=w.useState([]),[d,h]=w.useState([]),[f,m]=w.useState(!0),[v,y]=w.useState(0),[b,g]=w.useState(null),[x,p]=w.useState(!1),[j,_]=w.useState(null),[N,S]=w.useState("");w.useEffect(()=>{if(r&&c.length>0){const k=c.find(D=>D.id===r.id);k&&(g(k),y(2),n&&n())}},[r,c]);const[C,A]=w.useState(""),[L,B]=w.useState(""),[z,Y]=w.useState(!1),[ae,ce]=w.useState(null),[K,F]=w.useState(""),[E,I]=w.useState(!1),[M,J]=w.useState(""),[W,V]=w.useState(null),[ee,fe]=w.useState(0),[T,O]=w.useState(null),[me,rt]=w.useState(!1),[X,Ve]=w.useState(null),[jt,Ue]=w.useState(!1),[Bt,nt]=w.useState(!1),Mt=[{id:"space",emoji:"",label:i("studio.plotWorld.adventures.space.label"),desc:i("studio.plotWorld.adventures.space.desc")},{id:"underwater",emoji:"",label:i("studio.plotWorld.adventures.underwater.label"),desc:i("studio.plotWorld.adventures.underwater.desc")},{id:"forest",emoji:"",label:i("studio.plotWorld.adventures.forest.label"),desc:i("studio.plotWorld.adventures.forest.desc")},{id:"castle",emoji:"",label:i("studio.plotWorld.adventures.castle.label"),desc:i("studio.plotWorld.adventures.castle.desc")},{id:"dinosaurs",emoji:"",label:i("studio.plotWorld.adventures.dinosaurs.label"),desc:i("studio.plotWorld.adventures.dinosaurs.desc")},{id:"superheroes",emoji:"",label:i("studio.plotWorld.adventures.superheroes.label"),desc:i("studio.plotWorld.adventures.superheroes.desc")},{id:"pirates",emoji:"",label:i("studio.plotWorld.adventures.pirates.label"),desc:i("studio.plotWorld.adventures.pirates.desc")},{id:"candy",emoji:"",label:i("studio.plotWorld.adventures.candy.label"),desc:i("studio.plotWorld.adventures.candy.desc")}],dr=[{id:"kindness",emoji:"",label:i("studio.plotWorld.morals.kindness.label"),desc:i("studio.plotWorld.morals.kindness.desc")},{id:"bravery",emoji:"",label:i("studio.plotWorld.morals.bravery.label"),desc:i("studio.plotWorld.morals.bravery.desc")},{id:"friendship",emoji:"",label:i("studio.plotWorld.morals.friendship.label"),desc:i("studio.plotWorld.morals.friendship.desc")},{id:"honesty",emoji:"",label:i("studio.plotWorld.morals.honesty.label"),desc:i("studio.plotWorld.morals.honesty.desc")},{id:"sharing",emoji:"",label:i("studio.plotWorld.morals.sharing.label"),desc:i("studio.plotWorld.morals.sharing.desc")},{id:"newplace",emoji:"",label:i("studio.plotWorld.morals.newplace.label"),desc:i("studio.plotWorld.morals.newplace.desc")},{id:"patience",emoji:"",label:i("studio.plotWorld.morals.patience.label"),desc:i("studio.plotWorld.morals.patience.desc")},{id:"trying",emoji:"",label:i("studio.plotWorld.morals.trying.label"),desc:i("studio.plotWorld.morals.trying.desc")},{id:"different",emoji:"",label:i("studio.plotWorld.morals.different.label"),desc:i("studio.plotWorld.morals.different.desc")},{id:"goodbye",emoji:"",label:i("studio.plotWorld.morals.goodbye.label"),desc:i("studio.plotWorld.morals.goodbye.desc")}];w.useEffect(()=>{rs()},[e]),w.useEffect(()=>{var q;if(v!==6||!(W!=null&&W.id))return;const k=3;if(((q=W.images)==null?void 0:q.length)>=k)return;const D=setInterval(async()=>{var te;const{data:ne}=await G.from("stories").select("images").eq("id",W.id).single();if(ne&&ne.images){const st=((te=W.images)==null?void 0:te.length)||0,kt=ne.images.length;kt>st&&V(ue=>({...ue,images:ne.images})),kt>=k&&clearInterval(D)}},3e3);return()=>clearInterval(D)},[v,W==null?void 0:W.id,(is=W==null?void 0:W.images)==null?void 0:is.length]),w.useEffect(()=>{v!==6||!(W!=null&&W.images)||W.images.forEach(k=>{if(k!=null&&k.url){const D=new Image;D.src=k.url}})},[v,W==null?void 0:W.images]);const rs=async()=>{const{data:k}=await G.from("characters").select("*").eq("child_id",e).order("created_at",{ascending:!1});k&&u(k);const{data:D}=await G.from("stories").select("*, characters(name, image_url)").eq("child_id",e).order("created_at",{ascending:!1});D&&h(D),m(!1)},hr=()=>{if(L)return L;const k=Mt.find(D=>D.id===C);return(k==null?void 0:k.label)||C},Dr=()=>{if(K)return K;const k=dr.find(D=>D.id===ae);return(k==null?void 0:k.desc)||ae},io=[{id:"pixar",name:"Pixar/Disney"},{id:"dreamworks",name:"DreamWorks"},{id:"ghibli",name:"Studio Ghibli"},{id:"cartoon-network",name:"Cartoon Network"},{id:"nickelodeon",name:"Nickelodeon"},{id:"anime",name:"Anime Style"},{id:"disney-classic",name:"Disney Classic"},{id:"illumination",name:"Illumination"}];`${(b==null?void 0:b.name)||"Your hero"}`;const ao=async()=>{var k,D;if(s!=null&&s.id){const q=await Da(s.id);if(!q.allowed){const ne=await ei(s.id);_(ne),S(q.reason),p(!0);return}}I(!0),y(5),J(` ${b==null?void 0:b.name}${i("studio.plotWorld.generating.adventureBegins")}`);try{const q=b.visual_style,ne=((k=io.find(Ut=>Ut.id===q))==null?void 0:k.name)||q,{data:te,error:st}=await G.from("stories").insert({child_id:e,character_id:b.id,adventure_theme:hr(),moral_lesson:z?Dr():null,status:"generating"}).select().single();if(st)throw console.error("Error creating story:",st),new Error("Failed to create story");s!=null&&s.id&&await pg(s.id,"story"),J(` ${i("studio.plotWorld.generating.storyBeingWritten")}`);const kt=await G.functions.invoke("generate-story",{body:{storyId:te.id,characterName:b.name,characterTraits:b.personality_trait,adventureTheme:hr(),moralLesson:z?Dr():null,visualStyle:ne,animalType:b.animal_type,language:o}});if(kt.error)throw console.error("Story generation error:",kt.error),new Error("Failed to generate story");const ue=kt.data;console.log("Story generated:",ue);const we=ue.story.imagePrompts||[],Te=we.length;for(let Ut=0;Ut<we.length;Ut++){const on=we[Ut],Se=Ut+1;J(Se===1?l?`    ... (${Se}/${Te})`:` Painting page ${Se} of ${Te}...`:Se===Te?l?`    ... (${Se}/${Te})`:` Finishing the last illustration... (${Se}/${Te})`:l?`   ${Se}  ${Te}...`:` Painting page ${Se} of ${Te}...`);try{console.log(`Starting image ${Se} generation...`);const Wt=await G.functions.invoke("generate-story-image",{body:{storyId:te.id,imageNumber:on.imageNumber,prompt:on.prompt,characterImageUrl:b.image_url,visualStyle:ne,animalType:b.animal_type}});if(Wt.error)console.error(`Image ${Se} generation error:`,Wt.error);else if(console.log(`Image ${Se} generated successfully`),(D=Wt.data)!=null&&D.imageUrl){const ln=new Image;ln.src=Wt.data.imageUrl}}catch(Wt){console.error(`Image ${Se} error:`,Wt)}}J(l?"  !":" Your story is ready!");const{data:Qt}=await G.from("stories").select("*, characters(name, image_url)").eq("id",te.id).single();V(Qt),fe(0),y(6),h([Qt,...d]),I(!1),nt(!0),setTimeout(()=>nt(!1),4e3),await G.from("stories").update({status:"completed"}).eq("id",te.id)}catch(q){console.error("Story creation error:",q),J(i("studio.plotWorld.generating.somethingWentWrong")),setTimeout(()=>{ns()},3e3)}I(!1)},ns=()=>{y(0),g(null),A(""),B(""),Y(!1),ce(null),F(""),V(null),fe(0),J("")},ci=async k=>{rt(!0);try{const{error:D}=await G.from("stories").delete().eq("id",k);D?console.error("Error deleting story:",D):h(d.filter(q=>q.id!==k))}catch(D){console.error("Delete error:",D)}rt(!1),O(null)},ui=()=>{const k="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let D="";for(let q=0;q<12;q++)D+=k.charAt(Math.floor(Math.random()*k.length));return D},ss=async k=>{Ue(!0);try{let D=k.share_token;if(!D){D=ui();try{const{error:te}=await G.from("stories").update({share_token:D}).eq("id",k.id);te?console.warn("Could not save share token to database:",te.message):h(d.map(st=>st.id===k.id?{...st,share_token:D}:st))}catch(te){console.warn("Database update failed:",te)}}const ne=`${window.location.origin+"/Babu-Media/"}story/${D}`;Ve({story:k,shareUrl:ne,copied:!1})}catch(D){console.error("Share error:",D)}finally{Ue(!1)}},di=async()=>{if(X!=null&&X.shareUrl)try{await navigator.clipboard.writeText(X.shareUrl),Ve({...X,copied:!0}),setTimeout(()=>{Ve(k=>k?{...k,copied:!1}:null)},2e3)}catch(k){console.error("Copy failed:",k)}},hi=k=>{V(k),fe(0),y(6)};return f?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:`p-4 sm:p-6 lg:p-8 ${l?"text-right":"text-left"}`,children:[a.jsx(pu,{active:Bt,duration:4e3}),a.jsx(gu,{isOpen:x,onClose:()=>p(!1),title:i("studio.plotWorld.upgradeTitle"),reason:N,usage:j,userEmail:(s==null?void 0:s.email)||""}),a.jsxs("div",{className:`mb-6 sm:mb-8 flex flex-col sm:flex-row sm:items-center justify-between gap-3 ${l?"sm:flex-row-reverse":""}`,children:[a.jsxs("div",{children:[a.jsxs("h1",{className:`text-2xl sm:text-3xl font-bold flex items-center gap-2 sm:gap-3 ${l?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-3xl sm:text-4xl",children:""}),a.jsxs("span",{className:"truncate",children:[t==null?void 0:t.name,i("studio.plotWorld.title")]})]}),a.jsx("p",{className:"text-gray-400 mt-1 sm:mt-2 text-sm sm:text-base",children:i("studio.plotWorld.subtitle")})]}),v>0&&v<5&&a.jsx("button",{onClick:ns,className:`px-3 sm:px-4 py-2 text-sm sm:text-base text-gray-400 hover:text-white transition-colors self-start sm:self-auto ${l?"flex-row-reverse":""}`,children:i("studio.plotWorld.backToStories")})]}),c.length===0?a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 sm:p-12 text-center",children:[a.jsx("div",{className:"text-5xl sm:text-6xl mb-4 sm:mb-6",children:""}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:i("studio.plotWorld.noCharacters.title")}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base mb-4 sm:mb-6 max-w-md mx-auto",children:i("studio.plotWorld.noCharacters.description")})]}):v===0?a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>y(1),className:`mb-6 sm:mb-8 px-5 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl font-bold text-sm sm:text-base text-white hover:shadow-lg hover:shadow-blue-500/30 transition-all flex items-center gap-2 sm:gap-3 ${l?"flex-row-reverse":""}`,children:[a.jsx("span",{className:"text-lg sm:text-xl",children:""}),i("studio.plotWorld.createNewStory")]}),d.length===0?a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 sm:p-12 text-center",children:[a.jsx("div",{className:"text-5xl sm:text-6xl mb-4 sm:mb-6",children:""}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:i("studio.plotWorld.noStories.title")}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base max-w-md mx-auto",children:i("studio.plotWorld.noStories.description")})]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:d.map(k=>{var D,q,ne;return a.jsxs("div",{className:"relative bg-white/5 border border-white/10 rounded-2xl overflow-hidden hover:bg-white/10 transition-colors group",children:[a.jsxs("div",{className:`absolute top-2 ${l?"left-2":"right-2"} z-10 flex gap-1 opacity-0 group-hover:opacity-100 transition-all`,children:[a.jsx("button",{onClick:te=>{te.stopPropagation(),ss(k)},className:"p-2 bg-black/50 hover:bg-purple-500 rounded-full text-gray-300 hover:text-white transition-all",title:l?" ":"Share Story",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),a.jsx("button",{onClick:te=>{te.stopPropagation(),O(k)},className:"p-2 bg-black/50 hover:bg-red-500 rounded-full text-gray-300 hover:text-white transition-all",title:i("studio.plotWorld.storyCard.deleteStory"),children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),a.jsxs("div",{onClick:()=>hi(k),className:"cursor-pointer",children:[(q=(D=k.images)==null?void 0:D[0])!=null&&q.url?a.jsx(Jo,{src:k.images[0].url,alt:k.title,className:"w-full h-36 sm:h-48",fallback:a.jsx("div",{className:"w-full h-36 sm:h-48 bg-gradient-to-br from-blue-900/50 to-cyan-900/50 flex items-center justify-center",children:a.jsx("span",{className:"text-5xl sm:text-6xl",children:""})})}):a.jsx("div",{className:"w-full h-36 sm:h-48 bg-gradient-to-br from-blue-900/50 to-cyan-900/50 flex items-center justify-center",children:a.jsx("span",{className:"text-5xl sm:text-6xl",children:""})}),a.jsxs("div",{className:"p-3 sm:p-4",children:[a.jsx("h3",{className:"font-bold text-base sm:text-lg mb-1 group-hover:text-blue-400 transition-colors truncate",children:k.title||i("studio.plotWorld.storyCard.untitled")}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-400 mb-1 sm:mb-2 truncate",children:[i("studio.plotWorld.storyCard.starring")," ",((ne=k.characters)==null?void 0:ne.name)||i("studio.plotWorld.storyCard.unknown")]}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(k.created_at).toLocaleDateString(o==="he"?"he-IL":"en-US")})]})]})]},k.id)})})]}):v===1?a.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-0",children:a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 sm:p-6 lg:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("span",{className:"text-4xl sm:text-5xl mb-3 sm:mb-4 block",children:""}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:i("studio.plotWorld.step1.title")}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:i("studio.plotWorld.step1.subtitle")})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4 mb-6 sm:mb-8",children:c.map(k=>a.jsxs("button",{onClick:()=>g(k),className:`p-2 sm:p-4 rounded-xl text-center transition-all ${(b==null?void 0:b.id)===k.id?"bg-blue-500/30 border-2 border-blue-500 shadow-lg shadow-blue-500/20":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:[k.image_url?a.jsx(Jo,{src:k.image_url,alt:k.name,className:"w-14 h-14 sm:w-20 sm:h-20 rounded-xl mx-auto mb-2 sm:mb-3",fallback:a.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 bg-white/10 rounded-xl flex items-center justify-center mx-auto mb-2 sm:mb-3 text-3xl sm:text-4xl",children:""})}):a.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 bg-white/10 rounded-xl flex items-center justify-center mx-auto mb-2 sm:mb-3 text-3xl sm:text-4xl",children:""}),a.jsx("div",{className:"font-semibold text-sm sm:text-base truncate",children:k.name}),a.jsx("div",{className:"text-xs text-gray-400 mt-0.5 sm:mt-1 truncate hidden sm:block",children:k.personality_trait})]},k.id))}),a.jsx("button",{onClick:()=>y(2),disabled:!b,className:"w-full py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl font-bold text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-blue-500/30 transition-all",children:i("studio.plotWorld.step1.nextButton")})]})}):v===2?a.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-0",children:a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 sm:p-6 lg:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("span",{className:"text-4xl sm:text-5xl mb-3 sm:mb-4 block",children:""}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:i("studio.plotWorld.step2.title")}),a.jsxs("p",{className:"text-gray-400 text-sm sm:text-base",children:[i("studio.plotWorld.step2.subtitle")," ",b==null?void 0:b.name]})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 mb-4 sm:mb-6",children:Mt.map(k=>a.jsxs("button",{onClick:()=>{A(k.id),B("")},className:`p-2 sm:p-4 rounded-xl text-center transition-all ${C===k.id&&!L?"bg-blue-500/30 border-2 border-blue-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:[a.jsx("span",{className:"text-2xl sm:text-3xl block mb-1 sm:mb-2",children:k.emoji}),a.jsx("div",{className:"font-medium text-xs sm:text-sm",children:k.label})]},k.id))}),a.jsxs("div",{className:"relative my-4 sm:my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-white/10"})}),a.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:a.jsx("span",{className:"px-2 bg-[#0B0A16] text-gray-500",children:i("studio.plotWorld.step2.orDescribeOwn")})})]}),a.jsx("input",{type:"text",value:L,onChange:k=>{B(k.target.value),k.target.value&&A("")},className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 transition-colors text-sm sm:text-base mb-6 sm:mb-8 ${l?"text-right":""}`,placeholder:i("studio.plotWorld.step2.customAdventurePlaceholder"),dir:l?"rtl":"ltr"}),a.jsxs("div",{className:`flex gap-2 sm:gap-3 ${l?"flex-row-reverse":""}`,children:[a.jsx("button",{onClick:()=>y(1),className:"flex-1 py-3 sm:py-4 border border-white/20 rounded-xl font-semibold text-sm sm:text-base hover:bg-white/5 transition-all",children:i("studio.plotWorld.step2.back")}),a.jsx("button",{onClick:()=>y(3),disabled:!C&&!L,className:"flex-1 py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl font-bold text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-blue-500/30 transition-all",children:i("studio.plotWorld.step2.nextButton")})]})]})}):v===3?a.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-0",children:a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 sm:p-6 lg:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("span",{className:"text-4xl sm:text-5xl mb-3 sm:mb-4 block",children:""}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:i("studio.plotWorld.step3.title")}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:i("studio.plotWorld.step3.subtitle")})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-center mb-6 sm:mb-8",children:[a.jsx("button",{onClick:()=>Y(!0),className:`px-5 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold text-sm sm:text-base transition-all ${z?"bg-emerald-500/30 border-2 border-emerald-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:i("studio.plotWorld.step3.yesAddLesson")}),a.jsx("button",{onClick:()=>{Y(!1),ce(null),F("")},className:`px-5 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold text-sm sm:text-base transition-all ${z?"bg-white/5 border-2 border-transparent hover:bg-white/10":"bg-blue-500/30 border-2 border-blue-500"}`,children:i("studio.plotWorld.step3.noJustFun")})]}),z&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-1",children:i("studio.plotWorld.step3.chooseLessonTitle")}),a.jsx("p",{className:"text-gray-400 text-sm",children:i("studio.plotWorld.step3.chooseLessonSubtitle")})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2 sm:gap-3 mb-4 sm:mb-6",children:dr.map(k=>a.jsxs("button",{onClick:()=>{ce(k.id),F("")},className:`p-2 sm:p-3 rounded-xl text-center transition-all ${ae===k.id&&!K?"bg-emerald-500/30 border-2 border-emerald-500":"bg-white/5 border-2 border-transparent hover:bg-white/10"}`,children:[a.jsx("span",{className:"text-xl sm:text-2xl block mb-0.5 sm:mb-1",children:k.emoji}),a.jsx("div",{className:"font-medium text-[10px] sm:text-xs",children:k.label})]},k.id))}),a.jsxs("div",{className:"relative my-4 sm:my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-white/10"})}),a.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:a.jsx("span",{className:"px-2 bg-[#0B0A16] text-gray-500",children:i("studio.plotWorld.step3.orDescribeOwn")})})]}),a.jsx("input",{type:"text",value:K,onChange:k=>{F(k.target.value),k.target.value&&ce(null)},className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500 transition-colors text-sm sm:text-base mb-6 sm:mb-8 ${l?"text-right":""}`,placeholder:i("studio.plotWorld.step3.customLessonPlaceholder"),dir:l?"rtl":"ltr"})]}),a.jsxs("div",{className:`flex gap-2 sm:gap-3 mt-6 sm:mt-8 ${l?"flex-row-reverse":""}`,children:[a.jsx("button",{onClick:()=>y(2),className:"flex-1 py-3 sm:py-4 border border-white/20 rounded-xl font-semibold text-sm sm:text-base hover:bg-white/5 transition-all",children:i("studio.plotWorld.step3.back")}),a.jsx("button",{onClick:()=>y(4),disabled:z&&!ae&&!K,className:"flex-1 py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl font-bold text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-blue-500/30 transition-all",children:i("studio.plotWorld.step3.nextButton")})]})]})}):v===4?a.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-0",children:a.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 sm:p-6 lg:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("span",{className:"text-4xl sm:text-5xl mb-3 sm:mb-4 block",children:""}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:i("studio.plotWorld.step4.title")}),a.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:i("studio.plotWorld.step4.subtitle")})]}),a.jsx("div",{className:"bg-black/20 rounded-xl p-4 sm:p-6 mb-6 sm:mb-8",children:a.jsxs("div",{className:`flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:gap-6 ${l?"sm:flex-row-reverse":""}`,children:[b!=null&&b.image_url?a.jsx("img",{src:b.image_url,alt:b.name,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-xl object-cover"}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-white/10 rounded-xl flex items-center justify-center text-4xl sm:text-5xl",children:""}),a.jsxs("div",{className:`flex-1 text-center ${l?"sm:text-right":"sm:text-left"}`,children:[a.jsxs("h3",{className:"text-lg sm:text-xl font-bold mb-1",children:[i("studio.plotWorld.step4.hero"),": ",b==null?void 0:b.name]}),a.jsxs("div",{className:"space-y-1 sm:space-y-2 text-xs sm:text-sm",children:[a.jsxs("p",{className:"text-gray-400",children:[a.jsxs("span",{className:"text-blue-400",children:[i("studio.plotWorld.step4.adventure"),":"]})," ",hr()]}),a.jsxs("p",{className:"text-gray-400",children:[a.jsxs("span",{className:"text-emerald-400",children:[i("studio.plotWorld.step4.lesson"),":"]})," ",z?Dr():i("studio.plotWorld.step4.noLesson")]})]})]})]})}),a.jsxs("div",{className:`flex gap-2 sm:gap-3 ${l?"flex-row-reverse":""}`,children:[a.jsx("button",{onClick:()=>y(3),className:"flex-1 py-3 sm:py-4 border border-white/20 rounded-xl font-semibold text-sm sm:text-base hover:bg-white/5 transition-all",children:i("studio.plotWorld.step4.back")}),a.jsxs("button",{onClick:ao,className:"flex-1 py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl font-bold text-sm sm:text-base hover:shadow-lg hover:shadow-blue-500/30 transition-all flex items-center justify-center gap-1.5 sm:gap-2",children:[a.jsx("span",{children:""})," ",a.jsx("span",{children:i("studio.plotWorld.step4.createButton")})]})]})]})}):v===5?a.jsxs("div",{className:"max-w-3xl mx-auto px-2 sm:px-0",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-purple-900/20 border border-blue-500/20 rounded-2xl p-4 sm:p-6 text-center mb-6",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[a.jsxs("div",{className:"w-12 h-12 sm:w-16 sm:h-16 relative",children:[a.jsx("div",{className:"absolute inset-0 border-3 border-blue-500/30 rounded-full"}),a.jsx("div",{className:"absolute inset-0 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:b!=null&&b.image_url?a.jsx("img",{src:b.image_url,alt:b.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover"}):a.jsx("span",{className:"text-xl sm:text-2xl",children:""})})]}),a.jsxs("div",{className:"text-left",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:l?"   ...":"Creating Your Story..."}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:M})]})]}),a.jsx("p",{className:"text-xs text-gray-500",children:l?"       !":" Play the game while we create the magic!"})]}),a.jsx("div",{className:"mb-6",children:a.jsx(ek,{characterImage:b==null?void 0:b.image_url,characterName:b==null?void 0:b.name,isRTL:l})}),a.jsx("div",{className:"mt-4",children:a.jsx(Z2,{theme:C||"default",isRTL:l})})]}):v===6&&W?(()=>{var xu;const k=l?140:200,D=W.pages||[],q=[];D.forEach((be,$e)=>{const Ft=(be==null?void 0:be.text)||"",cn=Ft.match(/[^.!?]+[.!?]+/g)||[Ft];let zt="";cn.forEach(vu=>{const yu=zt+vu;yu.length>k&&zt.length>0?(q.push({text:zt.trim(),originalPage:$e}),zt=vu):zt=yu}),zt.trim()&&q.push({text:zt.trim(),originalPage:$e})});const ne=[];let te=0;const st=((xu=W.images)==null?void 0:xu.length)||3,kt=Math.min(st-1,2);for(let be=0;be<kt;be++){te<q.length?(ne.push({type:"image-text",imageIndex:be,textChunk:q[te]}),te++):ne.push({type:"image-only",imageIndex:be});const $e=Math.min(4,q.length-te);for(let Ft=0;Ft<$e;Ft+=2){const cn=q[te]||null,zt=q[te+1]||null;(cn||zt)&&(ne.push({type:"text-only",leftText:cn,rightText:zt}),te+=2)}}for(;te<q.length;){const be=q[te]||null,$e=q[te+1]||null;(be||$e)&&ne.push({type:"text-only",leftText:be,rightText:$e}),te+=2}ne.push({type:"end",imageIndex:st-1});const ue=ne.length,we=ne[ee]||ne[0],Te="h-[320px] sm:h-[380px] md:h-[420px]",Qt=Math.max(...q.map(be=>be.text.length),0),on=Qt>120?l?"text-base sm:text-lg md:text-xl":"text-sm sm:text-base md:text-lg":Qt>80?l?"text-lg sm:text-xl md:text-2xl":"text-base sm:text-lg md:text-xl":l?"text-xl sm:text-2xl md:text-3xl":"text-lg sm:text-xl md:text-2xl",Se=({imgIndex:be})=>{var $e,Ft;return a.jsx("div",{className:"w-full md:w-1/2 bg-gradient-to-br from-amber-100 to-orange-100 p-4 sm:p-6 flex items-center justify-center",children:a.jsx("div",{className:"relative w-full max-w-[200px] sm:max-w-[240px] md:max-w-[280px] aspect-square rounded-xl overflow-hidden shadow-lg border-4 border-amber-200/50",children:(Ft=($e=W.images)==null?void 0:$e[be])!=null&&Ft.url?a.jsx(Jo,{src:W.images[be].url,alt:`Illustration ${be+1}`,className:"w-full h-full",priority:!0,fallback:a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 bg-gradient-to-br from-blue-100 to-purple-100",children:[a.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-purple-600 font-medium text-xs sm:text-sm",children:i("common.buttons.loading")})]})}):a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 bg-gradient-to-br from-blue-100 to-purple-100",children:[a.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-purple-600 font-medium text-xs sm:text-sm",children:i("studio.plotWorld.reader.creatingIllustration")})]})})})},Wt=({textChunk:be,isHalfWidth:$e=!0})=>be?a.jsx("div",{className:`${$e?"w-full md:w-1/2":"w-full"} bg-gradient-to-br from-amber-50 to-orange-50 p-5 sm:p-6 md:p-8 flex flex-col justify-center`,dir:l?"rtl":"ltr",children:a.jsx("div",{className:`text-center leading-relaxed space-y-2 sm:space-y-3 ${on}`,style:{fontFamily:l?'"David Libre", "Frank Ruhl Libre", Georgia, serif':'Georgia, "Times New Roman", serif',lineHeight:l?"1.8":"1.7"},children:be.text.split(`
`).map((Ft,cn)=>a.jsx("p",{className:"text-gray-900 font-medium",children:Ft},cn))})}):a.jsx("div",{className:`${$e?"w-full md:w-1/2":"w-full"} bg-gradient-to-br from-amber-50 to-orange-50 p-5 sm:p-6 md:p-8 flex items-center justify-center`,children:a.jsx("div",{className:"text-amber-300 text-4xl",children:"~"})}),ln=()=>a.jsx("div",{className:"flex justify-center gap-1 sm:gap-1.5 flex-wrap max-w-[200px] mx-auto",children:Array.from({length:ue}).map((be,$e)=>a.jsx("button",{onClick:()=>fe($e),className:`w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full transition-all ${$e===ee?"bg-purple-500 scale-125":"bg-purple-300 hover:bg-purple-400"}`},$e))});return a.jsx("div",{className:"w-full max-w-5xl mx-auto px-2 sm:px-4 md:min-h-[500px] md:flex md:items-center md:justify-center",children:a.jsxs("div",{className:"relative bg-gradient-to-br from-amber-800/20 to-amber-700/20 rounded-3xl p-2 sm:p-3 shadow-2xl border-4 border-amber-600/40 w-full",children:[a.jsx("button",{onClick:ns,className:"absolute -top-3 -left-3 sm:-top-4 sm:-left-4 z-20 w-10 h-10 sm:w-12 sm:h-12 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center shadow-lg transition-all hover:scale-110",children:a.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl overflow-hidden shadow-inner flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 py-2 sm:py-3 px-4 sm:px-6 flex-shrink-0",children:a.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-black text-white text-center drop-shadow-lg",style:{fontFamily:'"Comic Sans MS", "Chalkboard", "Comic Neue", cursive',textShadow:"2px 2px 0 rgba(0,0,0,0.2), -1px -1px 0 rgba(255,255,255,0.3)",letterSpacing:"0.05em"},children:W.title})}),we.type==="end"?a.jsxs("div",{className:`flex flex-col md:flex-row ${Te}`,children:[a.jsx(Se,{imgIndex:we.imageIndex}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsxs("div",{className:"w-full md:w-1/2 flex flex-col items-center justify-center bg-gradient-to-br from-amber-100 via-orange-50 to-pink-100 p-4 sm:p-6 relative overflow-hidden",children:[a.jsx("svg",{className:"absolute top-4 left-4 w-5 h-5 sm:w-6 sm:h-6 text-amber-400 animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute top-8 right-6 w-4 h-4 sm:w-5 sm:h-5 text-purple-400 animate-pulse",style:{animationDelay:"300ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute bottom-12 left-6 w-4 h-4 sm:w-5 sm:h-5 text-pink-400 animate-pulse",style:{animationDelay:"500ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute bottom-8 right-4 w-5 h-5 sm:w-6 sm:h-6 text-blue-400 animate-pulse",style:{animationDelay:"700ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-amber-500 via-orange-500 to-pink-500 bg-clip-text text-transparent mb-4",style:{fontFamily:'Georgia, "Times New Roman", serif',fontStyle:"italic",letterSpacing:"0.02em"},children:i("studio.plotWorld.reader.theEnd")}),a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[a.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),a.jsx("svg",{className:"w-5 h-5 sm:w-7 sm:h-7 text-pink-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),a.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("button",{onClick:()=>ss(W),disabled:jt,className:"mb-3 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full font-semibold text-white text-sm hover:shadow-lg hover:shadow-purple-500/30 transition-all flex items-center gap-2",children:jt?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),l?" ...":"Creating link..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),l?" ":"Share Story"]})}),a.jsx(ln,{})]})]}):we.type==="image-text"?a.jsxs("div",{className:`flex flex-col md:flex-row ${Te}`,children:[a.jsx(Se,{imgIndex:we.imageIndex}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsxs("div",{className:"w-full md:w-1/2 flex flex-col bg-gradient-to-br from-amber-50 to-orange-50",children:[a.jsx("div",{className:"flex-1 flex flex-col justify-center",children:a.jsx(Wt,{textChunk:we.textChunk,isHalfWidth:!1})}),a.jsx("div",{className:"py-2 sm:py-3 border-t border-amber-200/50",children:a.jsx(ln,{})})]})]}):we.type==="image-only"?a.jsxs("div",{className:`flex flex-col md:flex-row ${Te}`,children:[a.jsx(Se,{imgIndex:we.imageIndex}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsx("div",{className:"w-full md:w-1/2 flex flex-col items-center justify-center bg-gradient-to-br from-amber-50 to-orange-50 p-4",children:a.jsx(ln,{})})]}):a.jsxs("div",{className:`flex flex-col ${Te}`,children:[a.jsxs("div",{className:"flex-1 flex flex-col md:flex-row",dir:l?"rtl":"ltr",children:[a.jsx(Wt,{textChunk:we.leftText,isHalfWidth:!0}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsx(Wt,{textChunk:we.rightText,isHalfWidth:!0})]}),a.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 py-2 sm:py-3 border-t border-amber-200/50",children:a.jsx(ln,{})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-amber-100 via-orange-100 to-amber-100 px-4 sm:px-6 py-2 sm:py-3 flex items-center justify-between border-t-2 border-amber-200 flex-shrink-0",children:[a.jsxs("button",{onClick:()=>fe(Math.max(0,ee-1)),disabled:ee===0,className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-full font-bold text-sm transition-all disabled:opacity-30 disabled:cursor-not-allowed shadow-lg hover:shadow-xl ${l?"flex-row-reverse":""}`,style:{fontFamily:'"Comic Sans MS", "Chalkboard", cursive'},children:[a.jsx("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 ${l?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"hidden sm:inline",children:i("common.buttons.previous")})]}),a.jsxs("span",{className:"text-purple-700 font-bold text-xs sm:text-sm",style:{fontFamily:'"Comic Sans MS", "Chalkboard", cursive'},children:[ee+1," / ",ue]}),a.jsxs("button",{onClick:()=>fe(Math.min(ue-1,ee+1)),disabled:ee>=ue-1,className:`flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-full font-bold text-sm transition-all disabled:opacity-30 disabled:cursor-not-allowed shadow-lg hover:shadow-xl ${l?"flex-row-reverse":""}`,style:{fontFamily:'"Comic Sans MS", "Chalkboard", cursive'},children:[a.jsx("span",{className:"hidden sm:inline",children:i("common.buttons.next")}),a.jsx("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 ${l?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})})})():null,T&&a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>O(null),children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-md w-full",onClick:k=>k.stopPropagation(),children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:i("studio.plotWorld.deleteStory.title")}),a.jsx("p",{className:"text-gray-400",children:i("studio.plotWorld.deleteStory.confirmText")})]}),a.jsxs("div",{className:`flex gap-3 ${l?"flex-row-reverse":""}`,children:[a.jsx("button",{onClick:()=>O(null),className:"flex-1 py-3 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:i("studio.plotWorld.deleteStory.cancel")}),a.jsx("button",{onClick:()=>ci(T.id),disabled:me,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 rounded-xl font-semibold transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:me?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i("common.buttons.deleting")]}):i("studio.plotWorld.deleteStory.delete")})]})]})}),X&&a.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>Ve(null),children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-md w-full",onClick:k=>k.stopPropagation(),children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:l?"  ":"Share Story"}),a.jsx("p",{className:"text-gray-400",children:l?"          !":"Send this link to friends and family so they can read the story!"})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:`flex gap-2 ${l?"flex-row-reverse":""}`,children:[a.jsx("input",{type:"text",value:X.shareUrl,readOnly:!0,className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white text-sm",dir:"ltr"}),a.jsx("button",{onClick:di,className:`px-4 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 ${X.copied?"bg-green-500 text-white":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg hover:shadow-purple-500/30"}`,children:X.copied?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),l?"!":"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),l?"":"Copy"]})})]})}),a.jsx("button",{onClick:()=>Ve(null),className:"w-full py-3 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:l?"":"Close"})]})})]})}const ok="https://babumedia.lemonsqueezy.com/buy/870ca6c4-80e6-440f-8bb4-a795be72ce39",lk="https://babumedia.lemonsqueezy.com/buy/a1a0c205-5ab5-49d4-b628-c2f3d43101b3",Sh="https://babumedia.lemonsqueezy.com/billing";function Ch(){const{user:e,signOut:t}=It(),r=Yt(),{t:n,language:s,setLanguage:i,isRTL:o,localizedHref:l}=Dt(),[c,u]=w.useState(!0),[d,h]=w.useState(null),[f,m]=w.useState(null);w.useEffect(()=>{(async()=>{if(e)try{const j=await ei(e.id);h(j),m(j.subscription)}catch(j){console.error("Error loading settings:",j)}finally{u(!1)}})()},[e]);const v=()=>{const p=e!=null&&e.email?`${Sh}?email=${encodeURIComponent(e.email)}`:Sh;window.open(p,"_blank")},y=p=>{const j=p==="pro"?lk:ok,_=e!=null&&e.email?`${j}?checkout[email]=${encodeURIComponent(e.email)}`:j;window.open(_,"_blank")},b=async()=>{await t(),r(l("/"))};if(c)return a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})});const g=(d==null?void 0:d.tier)||"free",x=g.charAt(0).toUpperCase()+g.slice(1);return a.jsxs("div",{className:"min-h-screen bg-[#0B0A16] text-white",children:[a.jsx("header",{className:"border-b border-white/10 px-6 py-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>r(l("/dashboard")),className:`flex items-center gap-2 text-gray-400 hover:text-white transition-colors ${o?"flex-row-reverse":""}`,children:[a.jsx("svg",{className:`w-5 h-5 ${o?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),n("settings.backToDashboard")]}),a.jsx("h1",{className:"text-xl font-bold",children:n("settings.pageTitle")}),a.jsx("div",{className:"w-20"})," "]})}),a.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8 space-y-8",children:[a.jsxs("section",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:n("settings.account.title")}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-white/10",children:[a.jsx("span",{className:"text-gray-400",children:n("settings.account.email")}),a.jsx("span",{children:e==null?void 0:e.email})]}),a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("span",{className:"text-gray-400",children:n("settings.account.memberSince")}),a.jsx("span",{children:new Date(e==null?void 0:e.created_at).toLocaleDateString(s==="he"?"he-IL":"en-US")})]})]})]}),a.jsxs("section",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:n("settings.language.title")}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:n("settings.language.description")}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>i("en"),className:`flex-1 py-3 px-4 rounded-xl font-semibold transition-all ${s==="en"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10"}`,children:n("settings.language.english")}),a.jsx("button",{onClick:()=>i("he"),className:`flex-1 py-3 px-4 rounded-xl font-semibold transition-all ${s==="he"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10"}`,children:n("settings.language.hebrew")})]})]}),a.jsxs("section",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:n("settings.subscription.title")}),a.jsx("div",{className:"mb-6 p-4 rounded-xl bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-400 mb-1",children:n("settings.subscription.currentPlan")}),a.jsxs("div",{className:"text-2xl font-bold",children:[x,g==="free"&&a.jsxs("span",{className:`text-sm font-normal text-gray-400 ${o?"mr-2":"ml-2"}`,children:["(",n("settings.subscription.free"),")"]}),g==="creator"&&a.jsx("span",{className:`text-sm font-normal text-purple-300 ${o?"mr-2":"ml-2"}`,children:"$9.99/mo"}),g==="pro"&&a.jsx("span",{className:`text-sm font-normal text-amber-300 ${o?"mr-2":"ml-2"}`,children:"$19.99/mo"})]})]}),g!=="free"&&a.jsx("span",{className:"px-3 py-1 bg-emerald-500/20 text-emerald-400 text-sm font-semibold rounded-full",children:n("settings.subscription.active")})]})}),d&&a.jsxs("div",{className:"mb-6 space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wide",children:n("settings.subscription.yourUsage")}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[a.jsxs("div",{className:"text-2xl font-bold",children:[d.children.current,a.jsxs("span",{className:"text-sm font-normal text-gray-400",children:["/",d.children.limit===1/0?"":d.children.limit]})]}),a.jsx("div",{className:"text-sm text-gray-400",children:n("settings.subscription.children")})]}),a.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[a.jsxs("div",{className:"text-2xl font-bold",children:[d.characters.current,a.jsxs("span",{className:"text-sm font-normal text-gray-400",children:["/",d.characters.limit===1/0?"":d.characters.limit]})]}),a.jsxs("div",{className:"text-sm text-gray-400",children:[n("settings.subscription.characters"),d.characters.period!=="lifetime"&&a.jsxs("span",{className:"text-xs",children:[" (",d.characters.period==="monthly"?n("settings.subscription.monthly"):n("settings.subscription.weekly"),")"]})]})]}),a.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[a.jsxs("div",{className:"text-2xl font-bold",children:[d.stories.current,a.jsxs("span",{className:"text-sm font-normal text-gray-400",children:["/",d.stories.limit===1/0?"":d.stories.limit]})]}),a.jsxs("div",{className:"text-sm text-gray-400",children:[n("settings.subscription.stories"),d.stories.period!=="lifetime"&&a.jsxs("span",{className:"text-xs",children:[" (",d.stories.period==="weekly"?n("settings.subscription.weekly"):n("settings.subscription.monthly"),")"]})]})]})]})]}),a.jsx("div",{className:"space-y-3",children:g==="free"?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>y("creator"),className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:n("settings.subscription.upgradeToCreator")}),a.jsx("button",{onClick:()=>y("pro"),className:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 rounded-xl font-bold hover:shadow-lg hover:shadow-amber-500/30 transition-all",children:n("settings.subscription.upgradeToPro")})]}):g==="creator"?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>y("pro"),className:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 rounded-xl font-bold hover:shadow-lg hover:shadow-amber-500/30 transition-all",children:n("settings.subscription.upgradeToPro")}),a.jsx("button",{onClick:v,className:"w-full py-3 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:n("settings.subscription.manageSubscription")})]}):a.jsx("button",{onClick:v,className:"w-full py-3 border border-white/20 rounded-xl font-semibold hover:bg-white/5 transition-all",children:n("settings.subscription.manageSubscription")})}),g!=="free"&&a.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:n("settings.subscription.manageNote")})]}),a.jsxs("section",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:n("settings.planComparison.title")}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/10",children:[a.jsx("th",{className:`${o?"text-right":"text-left"} py-3 text-gray-400 font-medium`,children:n("settings.planComparison.feature")}),a.jsx("th",{className:"text-center py-3 text-gray-400 font-medium",children:n("settings.planComparison.explorer")}),a.jsx("th",{className:"text-center py-3 text-purple-400 font-medium",children:n("settings.planComparison.creator")}),a.jsx("th",{className:"text-center py-3 text-amber-400 font-medium",children:n("settings.planComparison.pro")})]})}),a.jsxs("tbody",{className:"divide-y divide-white/5",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"py-3",children:n("settings.planComparison.childProfiles")}),a.jsx("td",{className:"text-center py-3",children:"1"}),a.jsx("td",{className:"text-center py-3",children:n("settings.planComparison.unlimited")}),a.jsx("td",{className:"text-center py-3",children:n("settings.planComparison.unlimited")})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-3",children:n("settings.planComparison.characters")}),a.jsxs("td",{className:"text-center py-3",children:["2 ",n("settings.planComparison.total")]}),a.jsxs("td",{className:"text-center py-3",children:["5",n("settings.planComparison.perMonth")]}),a.jsx("td",{className:"text-center py-3",children:n("settings.planComparison.unlimited")})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-3",children:n("settings.planComparison.stories")}),a.jsxs("td",{className:"text-center py-3",children:["1 ",n("settings.planComparison.total")]}),a.jsxs("td",{className:"text-center py-3",children:["10",n("settings.planComparison.perWeek")]}),a.jsx("td",{className:"text-center py-3",children:n("settings.planComparison.unlimited")})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-3",children:n("settings.planComparison.storage")}),a.jsx("td",{className:"text-center py-3",children:n("settings.planComparison.basic")}),a.jsx("td",{className:"text-center py-3",children:n("settings.planComparison.extended")}),a.jsx("td",{className:"text-center py-3",children:n("settings.planComparison.unlimited")})]})]})]})})]}),a.jsxs("section",{className:"bg-red-500/5 border border-red-500/20 rounded-2xl p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 text-red-400",children:n("settings.accountActions.title")}),a.jsx("div",{className:"space-y-3",children:a.jsx("button",{onClick:b,className:"w-full py-3 border border-red-500/30 text-red-400 rounded-xl font-semibold hover:bg-red-500/10 transition-all",children:n("settings.accountActions.signOut")})})]})]})]})}const ck=({src:e,alt:t,className:r,fallback:n,priority:s=!1})=>{const[i,o]=w.useState(!1),[l,c]=w.useState(!1),u=w.useRef(null);return w.useEffect(()=>{if(o(!1),c(!1),e&&s){const d=new Image;d.src=e,d.onload=()=>o(!0),d.onerror=()=>c(!0)}},[e,s]),w.useEffect(()=>{var d,h;(d=u.current)!=null&&d.complete&&((h=u.current)==null?void 0:h.naturalHeight)>0&&o(!0)},[e]),!e||l?n||null:a.jsxs("div",{className:`relative ${r}`,children:[!i&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900/30 to-blue-900/30 animate-pulse flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-3 border-purple-500 border-t-transparent rounded-full animate-spin"})}),a.jsx("img",{ref:u,src:e,alt:t,loading:s?"eager":"lazy",fetchpriority:s?"high":"auto",decoding:"async",className:`w-full h-full object-cover transition-opacity duration-300 ${i?"opacity-100":"opacity-0"}`,onLoad:()=>o(!0),onError:()=>c(!0)})]})};function Eh(){var ce;const{shareToken:e}=Qm();Yt();const{t,isRTL:r,language:n,localizedHref:s}=Dt(),{user:i}=It(),[o,l]=w.useState(null),[c,u]=w.useState(!0),[d,h]=w.useState(null),[f,m]=w.useState(0);if(w.useEffect(()=>{e&&(async()=>{try{const{data:F,error:E}=await G.from("stories").select("*, characters(name, image_url)").eq("share_token",e).single();if(E)throw E;if(!F){h("Story not found");return}l(F)}catch(F){console.error("Error fetching story:",F),h("Story not found or has been removed")}finally{u(!1)}})()},[e]),c)return a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:t("common.buttons.loading")||"Loading..."})]})});if(d||!o)return a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center px-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:r?"  ":"Story Not Found"}),a.jsx("p",{className:"text-gray-400 mb-8",children:r?"     ":"This story doesn't exist or has been removed"}),a.jsx(De,{to:s("/"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:r?"  ":"Create Your Own Story"})]})});const v=Array.isArray(o.pages)?o.pages:[],y=r?140:200,b=[];let g="";v.forEach(K=>{const F=typeof K=="string"?K:(K==null?void 0:K.text)||"";if(!F)return;(F.match(/[^.!?]+[.!?]+/g)||[F]).forEach(I=>{const M=I.trim();M&&(g.length+M.length<=y?g+=(g?" ":"")+M:(g&&b.push({text:g}),g=M))})}),g&&b.push({text:g});const x=((ce=o.images)==null?void 0:ce.length)||0,p=[];let j=0;for(let K=0;K<Math.min(x-1,2);K++)p.push({type:"image-text",imageIndex:K,textChunk:b[j]||null}),j++,b[j]&&(p.push({type:"text-only",textChunk:b[j],textChunk2:b[j+1]||null}),j+=2);for(;j<b.length;)p.push({type:"text-only",textChunk:b[j],textChunk2:b[j+1]||null}),j+=2;p.push({type:"end",imageIndex:x-1});const _=p.length,N=p[f]||p[0],S="h-[320px] sm:h-[380px] md:h-[420px]",C=Math.max(...b.map(K=>K.text.length),0),L=C>120?r?"text-base sm:text-lg md:text-xl":"text-sm sm:text-base md:text-lg":C>80?r?"text-lg sm:text-xl md:text-2xl":"text-base sm:text-lg md:text-xl":r?"text-xl sm:text-2xl md:text-3xl":"text-lg sm:text-xl md:text-2xl",B=({imgIndex:K})=>{var F,E;return a.jsx("div",{className:"w-full md:w-1/2 bg-gradient-to-br from-amber-100 to-orange-100 p-4 sm:p-6 flex items-center justify-center",children:a.jsx("div",{className:"relative w-full max-w-[200px] sm:max-w-[240px] md:max-w-[280px] aspect-square rounded-xl overflow-hidden shadow-lg border-4 border-amber-200/50",children:(E=(F=o.images)==null?void 0:F[K])!=null&&E.url?a.jsx(ck,{src:o.images[K].url,alt:`Illustration ${K+1}`,className:"w-full h-full",priority:!0,fallback:a.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 bg-gradient-to-br from-blue-100 to-purple-100",children:a.jsx("span",{className:"text-4xl",children:""})})}):a.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 bg-gradient-to-br from-blue-100 to-purple-100",children:a.jsx("span",{className:"text-4xl",children:""})})})})},z=({textChunk:K,isHalfWidth:F=!0})=>K?a.jsx("div",{className:`${F?"w-full md:w-1/2":"w-full"} bg-gradient-to-br from-amber-50 to-orange-50 p-5 sm:p-6 md:p-8 flex flex-col justify-center`,dir:r?"rtl":"ltr",children:a.jsx("div",{className:`text-center leading-relaxed space-y-2 sm:space-y-3 ${L}`,style:{fontFamily:r?'"David Libre", "Frank Ruhl Libre", Georgia, serif':'Georgia, "Times New Roman", serif',lineHeight:r?"1.8":"1.7"},children:K.text.split(`
`).map((E,I)=>a.jsx("p",{className:"text-gray-900 font-medium",children:E},I))})}):a.jsx("div",{className:`${F?"w-full md:w-1/2":"w-full"} bg-gradient-to-br from-amber-50 to-orange-50 p-5 sm:p-6 md:p-8 flex items-center justify-center`,children:a.jsx("div",{className:"text-amber-300 text-4xl",children:"~"})}),Y=()=>a.jsx("div",{className:"flex justify-center gap-1 sm:gap-1.5 flex-wrap max-w-[200px] mx-auto",children:Array.from({length:_}).map((K,F)=>a.jsx("button",{onClick:()=>m(F),className:`w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full transition-all ${F===f?"bg-purple-500 scale-125":"bg-purple-300 hover:bg-purple-400"}`},F))}),ae=()=>a.jsxs("div",{className:"mt-4 flex flex-col items-center gap-3",children:[a.jsxs(De,{to:s("/signup"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all text-sm sm:text-base",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),r?"  !":"Create Your Own Story!"]}),a.jsx("p",{className:"text-amber-700 text-xs sm:text-sm text-center",children:r?"     ":"Join and create magical stories for your kids"})]});return a.jsxs("div",{className:"min-h-screen bg-[#0B0A16] text-white py-6 sm:py-8 px-4",children:[a.jsx("div",{className:"max-w-5xl mx-auto mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(De,{to:s("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx("svg",{className:`w-5 h-5 ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),r?"  ":"Back to Home"]}),!i&&a.jsx(De,{to:s("/signup"),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg font-semibold text-sm hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:r?"":"Sign Up"})]})}),a.jsx("div",{className:"w-full max-w-5xl mx-auto px-2 sm:px-4 md:min-h-[500px] md:flex md:items-center md:justify-center",children:a.jsxs("div",{className:"relative bg-gradient-to-br from-amber-800/20 to-amber-700/20 rounded-3xl p-2 sm:p-3 shadow-2xl border-4 border-amber-600/40 w-full",children:[a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl overflow-hidden shadow-inner flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 py-2 sm:py-3 px-4 sm:px-6 flex-shrink-0",children:a.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-black text-white text-center drop-shadow-lg",style:{fontFamily:'"Comic Sans MS", "Chalkboard", "Comic Neue", cursive',textShadow:"2px 2px 0 rgba(0,0,0,0.2), -1px -1px 0 rgba(255,255,255,0.3)",letterSpacing:"0.05em"},children:o.title})}),N.type==="end"?a.jsxs("div",{className:`flex flex-col md:flex-row ${S}`,children:[a.jsx(B,{imgIndex:N.imageIndex}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsxs("div",{className:"w-full md:w-1/2 flex flex-col items-center justify-center bg-gradient-to-br from-amber-100 via-orange-50 to-pink-100 p-4 sm:p-6 relative overflow-hidden",children:[a.jsx("svg",{className:"absolute top-4 left-4 w-5 h-5 sm:w-6 sm:h-6 text-amber-400 animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute top-8 right-6 w-4 h-4 sm:w-5 sm:h-5 text-purple-400 animate-pulse",style:{animationDelay:"300ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute bottom-16 left-6 w-4 h-4 sm:w-5 sm:h-5 text-pink-400 animate-pulse",style:{animationDelay:"500ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute bottom-12 right-4 w-5 h-5 sm:w-6 sm:h-6 text-blue-400 animate-pulse",style:{animationDelay:"700ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-amber-500 via-orange-500 to-pink-500 bg-clip-text text-transparent mb-2",style:{fontFamily:'Georgia, "Times New Roman", serif',fontStyle:"italic",letterSpacing:"0.02em"},children:t("studio.plotWorld.reader.theEnd")||"The End"}),a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[a.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),a.jsx("svg",{className:"w-5 h-5 sm:w-7 sm:h-7 text-pink-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),a.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx(Y,{}),!i&&a.jsx(ae,{})]})]}):N.type==="image-text"?a.jsxs("div",{className:`flex flex-col md:flex-row ${S}`,children:[a.jsx(B,{imgIndex:N.imageIndex}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsxs("div",{className:"w-full md:w-1/2 flex flex-col bg-gradient-to-br from-amber-50 to-orange-50",children:[a.jsx("div",{className:"flex-1 flex flex-col justify-center",children:a.jsx(z,{textChunk:N.textChunk,isHalfWidth:!1})}),a.jsx("div",{className:"py-2 sm:py-3 border-t border-amber-200/50",children:a.jsx(Y,{})})]})]}):a.jsxs("div",{className:`flex flex-col md:flex-row ${S}`,children:[a.jsx(z,{textChunk:N.textChunk}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsx(z,{textChunk:N.textChunk2}),a.jsx("div",{className:"py-2 sm:py-3 md:absolute md:bottom-2 md:left-0 md:right-0",children:a.jsx(Y,{})})]})]}),a.jsx("button",{onClick:()=>m(Math.max(0,f-1)),disabled:f===0,className:`absolute top-1/2 -translate-y-1/2 ${r?"right-0 -mr-3 sm:-mr-5":"left-0 -ml-3 sm:-ml-5"} w-10 h-10 sm:w-12 sm:h-12 bg-amber-600/80 hover:bg-amber-500 rounded-full flex items-center justify-center shadow-lg transition-all ${f===0?"opacity-30 cursor-not-allowed":"hover:scale-110"}`,children:a.jsx("svg",{className:`w-5 h-5 sm:w-6 sm:h-6 text-white ${r?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}),a.jsx("button",{onClick:()=>m(Math.min(_-1,f+1)),disabled:f===_-1,className:`absolute top-1/2 -translate-y-1/2 ${r?"left-0 -ml-3 sm:-ml-5":"right-0 -mr-3 sm:-mr-5"} w-10 h-10 sm:w-12 sm:h-12 bg-amber-600/80 hover:bg-amber-500 rounded-full flex items-center justify-center shadow-lg transition-all ${f===_-1?"opacity-30 cursor-not-allowed":"hover:scale-110"}`,children:a.jsx("svg",{className:`w-5 h-5 sm:w-6 sm:h-6 text-white ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})}),!i&&N.type!=="end"&&a.jsxs("div",{className:"max-w-5xl mx-auto mt-8 text-center",children:[a.jsx("p",{className:"text-gray-400 mb-4",children:r?"  ?   !":"Loved this story? Create your own!"}),a.jsx(De,{to:s("/signup"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-bold text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:r?" ":"Sign Up Free"})]})]})}const Ph=["rZt0e7gGc2nA","idMeDtwlXJ09","JYT9YUJBGnyu","GQzszSG3q5Uj","LhfVjqxDwpL9"],uk=["Babu in the Magic Forest","Bonbon and the Pirate's Golden Treasure","Brian the Brave Little Lion","''   "],ic=({src:e,alt:t,className:r,fallback:n,priority:s=!1})=>{const[i,o]=w.useState(!1),[l,c]=w.useState(!1),u=w.useRef(null);return w.useEffect(()=>{if(o(!1),c(!1),e&&s){const d=new Image;d.src=e,d.onload=()=>o(!0),d.onerror=()=>c(!0)}},[e,s]),w.useEffect(()=>{var d,h;(d=u.current)!=null&&d.complete&&((h=u.current)==null?void 0:h.naturalHeight)>0&&o(!0)},[e]),!e||l?n||null:a.jsxs("div",{className:`relative ${r}`,children:[!i&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900/30 to-blue-900/30 animate-pulse flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-3 border-purple-500 border-t-transparent rounded-full animate-spin"})}),a.jsx("img",{ref:u,src:e,alt:t,loading:s?"eager":"lazy",fetchpriority:s?"high":"auto",decoding:"async",className:`w-full h-full object-cover transition-opacity duration-300 ${i?"opacity-100":"opacity-0"}`,onLoad:()=>o(!0),onError:()=>c(!0)})]})};function dk({story:e,onClose:t,isRTL:r,t:n,showCTA:s=!0,localizedHref:i}){var L;const[o,l]=w.useState(0),{user:c}=It(),u=Array.isArray(e.pages)?e.pages:[],d=r?140:200,h=[];let f="";u.forEach(B=>{const z=typeof B=="string"?B:(B==null?void 0:B.text)||"";if(!z)return;(z.match(/[^.!?]+[.!?]+/g)||[z]).forEach(ae=>{const ce=ae.trim();ce&&(f.length+ce.length<=d?f+=(f?" ":"")+ce:(f&&h.push({text:f}),f=ce))})}),f&&h.push({text:f});const m=((L=e.images)==null?void 0:L.length)||0,v=[];let y=0;for(let B=0;B<Math.min(m-1,2);B++)v.push({type:"image-text",imageIndex:B,textChunk:h[y]||null}),y++,h[y]&&(v.push({type:"text-only",textChunk:h[y],textChunk2:h[y+1]||null}),y+=2);for(;y<h.length;)v.push({type:"text-only",textChunk:h[y],textChunk2:h[y+1]||null}),y+=2;v.push({type:"end",imageIndex:m-1});const b=v.length,g=v[o]||v[0],x="h-[320px] sm:h-[380px] md:h-[420px]",p=Math.max(...h.map(B=>B.text.length),0),_=p>120?r?"text-base sm:text-lg md:text-xl":"text-sm sm:text-base md:text-lg":p>80?r?"text-lg sm:text-xl md:text-2xl":"text-base sm:text-lg md:text-xl":r?"text-xl sm:text-2xl md:text-3xl":"text-lg sm:text-xl md:text-2xl",N=({imgIndex:B})=>{var z,Y;return a.jsx("div",{className:"w-full md:w-1/2 bg-gradient-to-br from-amber-100 to-orange-100 p-4 sm:p-6 flex items-center justify-center",children:a.jsx("div",{className:"relative w-full max-w-[200px] sm:max-w-[240px] md:max-w-[280px] aspect-square rounded-xl overflow-hidden shadow-lg border-4 border-amber-200/50",children:(Y=(z=e.images)==null?void 0:z[B])!=null&&Y.url?a.jsx(ic,{src:e.images[B].url,alt:`Illustration ${B+1}`,className:"w-full h-full",priority:!0,fallback:a.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 bg-gradient-to-br from-blue-100 to-purple-100",children:a.jsx("span",{className:"text-4xl",children:""})})}):a.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center gap-3 bg-gradient-to-br from-blue-100 to-purple-100",children:a.jsx("span",{className:"text-4xl",children:""})})})})},S=({textChunk:B,isHalfWidth:z=!0})=>B?a.jsx("div",{className:`${z?"w-full md:w-1/2":"w-full"} bg-gradient-to-br from-amber-50 to-orange-50 p-5 sm:p-6 md:p-8 flex flex-col justify-center`,dir:r?"rtl":"ltr",children:a.jsx("div",{className:`text-center leading-relaxed space-y-2 sm:space-y-3 ${_}`,style:{fontFamily:r?'"David Libre", "Frank Ruhl Libre", Georgia, serif':'Georgia, "Times New Roman", serif',lineHeight:r?"1.8":"1.7"},children:B.text.split(`
`).map((Y,ae)=>a.jsx("p",{className:"text-gray-900 font-medium",children:Y},ae))})}):a.jsx("div",{className:`${z?"w-full md:w-1/2":"w-full"} bg-gradient-to-br from-amber-50 to-orange-50 p-5 sm:p-6 md:p-8 flex items-center justify-center`,children:a.jsx("div",{className:"text-amber-300 text-4xl",children:"~"})}),C=()=>a.jsx("div",{className:"flex justify-center gap-1 sm:gap-1.5 flex-wrap max-w-[200px] mx-auto",children:Array.from({length:b}).map((B,z)=>a.jsx("button",{onClick:()=>l(z),className:`w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full transition-all ${z===o?"bg-purple-500 scale-125":"bg-purple-300 hover:bg-purple-400"}`},z))}),A=()=>a.jsxs("div",{className:"mt-3 flex flex-col items-center gap-2",children:[a.jsxs(De,{to:i("/signup"),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full font-bold text-white text-sm hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),r?"  !":"Create Your Own Story!"]}),a.jsx("p",{className:"text-amber-700 text-xs text-center",children:r?"     ":"Join and create magical stories for your kids"})]});return a.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"w-full max-w-5xl",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-50 w-12 h-12 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center shadow-lg transition-all hover:scale-110",children:a.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),a.jsxs("div",{className:"relative bg-gradient-to-br from-amber-800/20 to-amber-700/20 rounded-3xl p-2 sm:p-3 shadow-2xl border-4 border-amber-600/40 w-full",children:[a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl overflow-hidden shadow-inner flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 py-2 sm:py-3 px-4 sm:px-6 flex-shrink-0",children:a.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-black text-white text-center drop-shadow-lg",style:{fontFamily:'"Comic Sans MS", "Chalkboard", "Comic Neue", cursive',textShadow:"2px 2px 0 rgba(0,0,0,0.2), -1px -1px 0 rgba(255,255,255,0.3)",letterSpacing:"0.05em"},children:e.title})}),g.type==="end"?a.jsxs("div",{className:`flex flex-col md:flex-row ${x}`,children:[a.jsx(N,{imgIndex:g.imageIndex}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsxs("div",{className:"w-full md:w-1/2 flex flex-col items-center justify-center bg-gradient-to-br from-amber-100 via-orange-50 to-pink-100 p-4 sm:p-6 relative overflow-hidden",children:[a.jsx("svg",{className:"absolute top-4 left-4 w-5 h-5 sm:w-6 sm:h-6 text-amber-400 animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute top-8 right-6 w-4 h-4 sm:w-5 sm:h-5 text-purple-400 animate-pulse",style:{animationDelay:"300ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute bottom-16 left-6 w-4 h-4 sm:w-5 sm:h-5 text-pink-400 animate-pulse",style:{animationDelay:"500ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("svg",{className:"absolute bottom-12 right-4 w-5 h-5 sm:w-6 sm:h-6 text-blue-400 animate-pulse",style:{animationDelay:"700ms"},fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})}),a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-amber-500 via-orange-500 to-pink-500 bg-clip-text text-transparent mb-2",style:{fontFamily:'Georgia, "Times New Roman", serif',fontStyle:"italic",letterSpacing:"0.02em"},children:r?"":"The End"}),a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[a.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),a.jsx("svg",{className:"w-5 h-5 sm:w-7 sm:h-7 text-pink-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),a.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx(C,{}),s&&!c&&a.jsx(A,{})]})]}):g.type==="image-text"?a.jsxs("div",{className:`flex flex-col md:flex-row ${x}`,children:[a.jsx(N,{imgIndex:g.imageIndex}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsxs("div",{className:"w-full md:w-1/2 flex flex-col bg-gradient-to-br from-amber-50 to-orange-50",children:[a.jsx("div",{className:"flex-1 flex flex-col justify-center",children:a.jsx(S,{textChunk:g.textChunk,isHalfWidth:!1})}),a.jsx("div",{className:"py-2 sm:py-3 border-t border-amber-200/50",children:a.jsx(C,{})})]})]}):a.jsxs("div",{className:`flex flex-col md:flex-row ${x} relative`,children:[a.jsx(S,{textChunk:g.textChunk}),a.jsx("div",{className:"hidden md:block w-0.5 bg-amber-200"}),a.jsx(S,{textChunk:g.textChunk2}),a.jsx("div",{className:"py-2 sm:py-3 md:absolute md:bottom-2 md:left-0 md:right-0",children:a.jsx(C,{})})]})]}),a.jsx("button",{onClick:()=>l(Math.max(0,o-1)),disabled:o===0,className:`absolute top-1/2 -translate-y-1/2 ${r?"right-0 -mr-3 sm:-mr-5":"left-0 -ml-3 sm:-ml-5"} w-10 h-10 sm:w-12 sm:h-12 bg-amber-600/80 hover:bg-amber-500 rounded-full flex items-center justify-center shadow-lg transition-all ${o===0?"opacity-30 cursor-not-allowed":"hover:scale-110"}`,children:a.jsx("svg",{className:`w-5 h-5 sm:w-6 sm:h-6 text-white ${r?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})}),a.jsx("button",{onClick:()=>l(Math.min(b-1,o+1)),disabled:o===b-1,className:`absolute top-1/2 -translate-y-1/2 ${r?"left-0 -ml-3 sm:-ml-5":"right-0 -mr-3 sm:-mr-5"} w-10 h-10 sm:w-12 sm:h-12 bg-amber-600/80 hover:bg-amber-500 rounded-full flex items-center justify-center shadow-lg transition-all ${o===b-1?"opacity-30 cursor-not-allowed":"hover:scale-110"}`,children:a.jsx("svg",{className:`w-5 h-5 sm:w-6 sm:h-6 text-white ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})]})})}function Th(){const{t:e,isRTL:t,language:r,localizedHref:n}=Dt(),{user:s}=It(),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(null),h=r==="he";w.useEffect(()=>{(async()=>{try{const{data:v,error:y}=await G.from("stories").select("*, characters(name, image_url)").in("share_token",Ph);y&&console.error("Error fetching token stories:",y);const{data:b,error:g}=await G.from("stories").select("*, characters(name, image_url)").in("title",uk);g&&console.error("Error fetching title stories:",g);const x=[],p=new Set;v&&Ph.forEach(j=>{const _=v.find(N=>N.share_token===j);_&&!p.has(_.id)&&(x.push(_),p.add(_.id))}),b&&b.forEach(j=>{p.has(j.id)||(x.push(j),p.add(j.id))}),o(x)}catch(v){console.error("Error:",v)}finally{c(!1)}})()},[]);const f=m=>{const v={forest:"from-emerald-500 to-teal-500",pirates:"from-amber-500 to-orange-500",space:"from-indigo-500 to-purple-500",underwater:"from-blue-500 to-cyan-500",castle:"from-purple-500 to-pink-500",dinosaurs:"from-green-500 to-lime-500",superheroes:"from-red-500 to-orange-500",candy:"from-pink-500 to-rose-500",default:"from-purple-500 to-pink-500"};return v[m]||v.default};return l?a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:h?" ...":"Loading stories..."})]})}):a.jsxs("div",{className:"min-h-screen bg-[#0B0A16] text-white",children:[a.jsx("header",{className:"border-b border-white/10 px-4 sm:px-6 py-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a.jsxs(De,{to:n("/"),className:`flex items-center gap-2 text-gray-400 hover:text-white transition-colors ${t?"flex-row-reverse":""}`,children:[a.jsx("svg",{className:`w-5 h-5 ${t?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),h?"  ":"Back to Home"]}),s?a.jsx(De,{to:n("/dashboard"),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg font-semibold text-sm hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:h?" ":"My Studio"}):a.jsx(De,{to:n("/signup"),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg font-semibold text-sm hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:h?"  ":"Create Your Own"})]})}),a.jsxs("section",{className:"relative py-12 sm:py-16 px-4 sm:px-6 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/20 via-transparent to-transparent"}),a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[400px] bg-gradient-to-r from-purple-500/20 to-pink-500/20 blur-[100px] rounded-full"}),a.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30 rounded-full text-sm font-medium text-purple-300 mb-6",children:[a.jsx("span",{className:"text-xl",children:""}),h?" ":"Story Library"]}),a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-black mb-4",children:h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"  "}),a.jsx("br",{}),"   "]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Discover the Magic"}),a.jsx("br",{}),"of Our Children's Stories"]})}),a.jsx("p",{className:"text-lg text-gray-400 max-w-2xl mx-auto",children:h?"       .      ,    .":"Click on any story to read it in full. Each story is crafted with original characters, exciting adventures, and meaningful lessons."})]})]}),a.jsx("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 pb-16",children:i.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("p",{className:"text-gray-400",children:h?"   ":"No stories to display yet"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8",children:i.map(m=>{var v,y,b,g;return a.jsxs("div",{className:"group relative bg-white/5 border border-white/10 rounded-3xl overflow-hidden hover:border-white/20 transition-all duration-300 cursor-pointer hover:scale-[1.02]",onClick:()=>d(m),children:[a.jsxs("div",{className:"relative h-48 sm:h-56 overflow-hidden",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${f(m.adventure_theme)} opacity-60`}),((y=(v=m.images)==null?void 0:v[0])==null?void 0:y.url)&&a.jsx(ic,{src:m.images[0].url,alt:m.title,className:"w-full h-full",fallback:a.jsx("div",{className:`w-full h-full bg-gradient-to-br ${f(m.adventure_theme)} flex items-center justify-center`,children:a.jsx("span",{className:"text-6xl",children:""})})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0B0A16] via-transparent to-transparent"}),a.jsxs("div",{className:`absolute bottom-4 ${t?"right-4":"left-4"} flex items-center gap-3`,children:[a.jsx("div",{className:"w-14 h-14 rounded-full bg-white/10 border-2 border-white/30 overflow-hidden backdrop-blur-sm",children:(b=m.characters)!=null&&b.image_url?a.jsx(ic,{src:m.characters.image_url,alt:m.characters.name,className:"w-full h-full",fallback:a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-2xl",children:""})}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-2xl",children:""})}),a.jsx("div",{children:a.jsx("div",{className:"font-bold text-white text-sm",children:((g=m.characters)==null?void 0:g.name)||(h?"":"Character")})})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsxs("div",{className:"px-6 py-3 bg-white/90 rounded-full font-bold text-gray-900 flex items-center gap-2 shadow-xl",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),h?" ":"Read Story"]})})]}),a.jsxs("div",{className:"p-5 sm:p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-purple-400 transition-colors",children:m.title}),a.jsxs("div",{className:`flex flex-wrap gap-2 ${t?"justify-end":""}`,children:[m.moral_lesson&&a.jsxs("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-300 text-xs font-medium rounded-full flex items-center gap-1",children:[a.jsx("span",{children:""}),m.moral_lesson]}),m.adventure_theme&&a.jsxs("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 text-xs font-medium rounded-full flex items-center gap-1",children:[a.jsx("span",{children:""}),m.adventure_theme]})]})]})]},m.id)})})}),a.jsx("section",{className:"border-t border-white/10 py-16 px-4 sm:px-6",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[a.jsx("div",{className:"text-5xl mb-6",children:""}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:h?"   ?":"Want to Create Your Own Story?"}),a.jsx("p",{className:"text-gray-400 mb-8 max-w-xl mx-auto",children:h?"  ,   ,    AI      .":"Create original characters, choose adventures and lessons, and let AI magic craft personalized stories for your children."}),a.jsxs(De,{to:n("/signup"),className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full font-bold text-lg hover:shadow-xl hover:shadow-purple-500/30 transition-all hover:scale-105",children:[h?"  - !":"Start Now - Free!",a.jsx("svg",{className:`w-5 h-5 ${t?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})}),u&&a.jsx(dk,{story:u,onClose:()=>d(null),isRTL:t,t:e,showCTA:!0,localizedHref:n})]})}function Vt({children:e}){const{user:t,loading:r}=It(),n=At(),s=Ia(n.pathname);return r?a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):t?e:a.jsx(ep,{to:Ln("/login",s)})}function Vi({children:e}){const{user:t,loading:r}=It(),n=At(),s=Ia(n.pathname);return r?a.jsx("div",{className:"min-h-screen bg-[#0B0A16] flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):t?a.jsx(ep,{to:Ln("/dashboard",s)}):e}const hk="/Babu-Media/";function fk(){return a.jsxs(Bv,{children:[a.jsx(je,{path:"/",element:a.jsx(hh,{})}),a.jsx(je,{path:"/library",element:a.jsx(Th,{})}),a.jsx(je,{path:"/story/:shareToken",element:a.jsx(Eh,{})}),a.jsx(je,{path:"/login",element:a.jsx(Vi,{children:a.jsx(fh,{})})}),a.jsx(je,{path:"/signup",element:a.jsx(Vi,{children:a.jsx(mh,{})})}),a.jsx(je,{path:"/dashboard",element:a.jsx(Vt,{children:a.jsx(Hi,{})})}),a.jsx(je,{path:"/studio",element:a.jsx(Vt,{children:a.jsx(Hi,{})})}),a.jsx(je,{path:"/add-child",element:a.jsx(Vt,{children:a.jsx(xh,{})})}),a.jsx(je,{path:"/fusion-lab/:childId",element:a.jsx(Vt,{children:a.jsx(yh,{})})}),a.jsx(je,{path:"/settings",element:a.jsx(Vt,{children:a.jsx(Ch,{})})}),a.jsx(je,{path:"/he",element:a.jsx(hh,{})}),a.jsx(je,{path:"/he/library",element:a.jsx(Th,{})}),a.jsx(je,{path:"/he/story/:shareToken",element:a.jsx(Eh,{})}),a.jsx(je,{path:"/he/login",element:a.jsx(Vi,{children:a.jsx(fh,{})})}),a.jsx(je,{path:"/he/signup",element:a.jsx(Vi,{children:a.jsx(mh,{})})}),a.jsx(je,{path:"/he/dashboard",element:a.jsx(Vt,{children:a.jsx(Hi,{})})}),a.jsx(je,{path:"/he/studio",element:a.jsx(Vt,{children:a.jsx(Hi,{})})}),a.jsx(je,{path:"/he/add-child",element:a.jsx(Vt,{children:a.jsx(xh,{})})}),a.jsx(je,{path:"/he/fusion-lab/:childId",element:a.jsx(Vt,{children:a.jsx(yh,{})})}),a.jsx(je,{path:"/he/settings",element:a.jsx(Vt,{children:a.jsx(Ch,{})})})]})}function mk(){return a.jsx(oy,{basename:hk,children:a.jsx(Vb,{children:a.jsx(y2,{children:a.jsx(fk,{})})})})}Qo.createRoot(document.getElementById("root")).render(a.jsx(Ag.StrictMode,{children:a.jsx(mk,{})}));
